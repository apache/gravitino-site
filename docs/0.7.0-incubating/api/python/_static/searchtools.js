"use strict";if(void 0===Scorer)var Scorer={objNameMatch:11,objPartialMatch:6,objPrio:{0:15,1:5,2:-5},objPrioDefault:0,title:15,partialTitle:7,term:5,partialTerm:2};const _removeChildren=e=>{for(;e&&e.lastChild;)e.removeChild(e.lastChild)},_escapeRegExp=e=>e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),_displayItem=(e,t)=>{const r=DOCUMENTATION_OPTIONS.BUILDER,n=DOCUMENTATION_OPTIONS.URL_ROOT,a=DOCUMENTATION_OPTIONS.FILE_SUFFIX,s=DOCUMENTATION_OPTIONS.LINK_SUFFIX,c=DOCUMENTATION_OPTIONS.SHOW_SEARCH_SUMMARY,[o,l,i,h,d,u]=e;let m,S,p=document.createElement("li");if("dirhtml"===r){let e=o+"/";e.match(/\/index\/$/)?e=e.substring(0,e.length-6):"index/"===e&&(e=""),m=n+e,S=m}else m=n+o+a,S=o+s;let f=p.appendChild(document.createElement("a"));f.href=S+i,f.dataset.score=d,f.innerHTML=l,h?p.appendChild(document.createElement("span")).innerHTML=" ("+h+")":c&&fetch(m).then((e=>e.text())).then((e=>{e&&p.appendChild(Search.makeSearchSummary(e,t))})),Search.output.appendChild(p)},_finishSearch=e=>{Search.stopPulse(),Search.title.innerText=_("Search Results"),Search.status.innerText=e?_(`Search finished, found ${e} page(s) matching the search query.`):Documentation.gettext("Your search did not match any documents. Please make sure that all words are spelled correctly and that you've selected enough categories.")},_displayNextItem=(e,t,r)=>{e.length?(_displayItem(e.pop(),r),setTimeout((()=>_displayNextItem(e,t,r)),5)):_finishSearch(t)};if(void 0===splitQuery)var splitQuery=e=>e.split(/[^\p{Letter}\p{Number}_\p{Emoji_Presentation}]+/gu).filter((e=>e));const Search={_index:null,_queued_query:null,_pulse_status:-1,htmlToText:e=>{const t=(new DOMParser).parseFromString(e,"text/html");t.querySelectorAll(".headerlink").forEach((e=>{e.remove()}));const r=t.querySelector('[role="main"]');return void 0!==r?r.textContent:(console.warn("Content block not found. Sphinx search tries to obtain it via '[role=main]'. Could you check your theme or template."),"")},init:()=>{const e=new URLSearchParams(window.location.search).get("q");document.querySelectorAll('input[name="q"]').forEach((t=>t.value=e)),e&&Search.performSearch(e)},loadIndex:e=>document.body.appendChild(document.createElement("script")).src=e,setIndex:e=>{if(Search._index=e,null!==Search._queued_query){const e=Search._queued_query;Search._queued_query=null,Search.query(e)}},hasIndex:()=>null!==Search._index,deferQuery:e=>Search._queued_query=e,stopPulse:()=>Search._pulse_status=-1,startPulse:()=>{if(Search._pulse_status>=0)return;const e=()=>{Search._pulse_status=(Search._pulse_status+1)%4,Search.dots.innerText=".".repeat(Search._pulse_status),Search._pulse_status>=0&&window.setTimeout(e,500)};e()},performSearch:e=>{const t=document.createElement("h2");t.textContent=_("Searching");const r=document.createElement("p");r.classList.add("search-summary"),r.innerText="";const n=document.createElement("ul");n.classList.add("search");const a=document.getElementById("search-results");Search.title=a.appendChild(t),Search.dots=Search.title.appendChild(document.createElement("span")),Search.status=a.appendChild(r),Search.output=a.appendChild(n);const s=document.getElementById("search-progress");s&&(s.innerText=_("Preparing search...")),Search.startPulse(),Search.hasIndex()?Search.query(e):Search.deferQuery(e)},query:e=>{const t=Search._index.filenames,r=Search._index.docnames,n=Search._index.titles,a=Search._index.alltitles,s=Search._index.indexentries,c=new Stemmer,o=new Set,l=new Set,i=new Set,h=new Set(splitQuery(e.toLowerCase().trim()));splitQuery(e.trim()).forEach((e=>{const t=e.toLowerCase();if(-1!==stopwords.indexOf(t)||e.match(/^\d+$/))return;let r=c.stemWord(t);"-"===r[0]?l.add(r.substr(1)):(o.add(r),i.add(t))})),SPHINX_HIGHLIGHT_ENABLED&&localStorage.setItem("sphinx_highlight_terms",[...i].join(" "));let d=[];_removeChildren(document.getElementById("search-progress"));const u=e.toLowerCase();for(const[S,p]of Object.entries(a))if(S.toLowerCase().includes(u)&&u.length>=S.length/2)for(const[e,a]of p){let s=Math.round(100*u.length/S.length);d.push([r[e],n[e]!==S?`${n[e]} > ${S}`:S,null!==a?"#"+a:"",null,s,t[e]])}for(const[S,p]of Object.entries(s))if(S.includes(u)&&u.length>=S.length/2)for(const[e,a]of p){let s=Math.round(100*u.length/S.length);d.push([r[e],n[e],a?"#"+a:"",null,s,t[e]])}h.forEach((e=>d.push(...Search.performObjectSearch(e,h)))),d.push(...Search.performTermsSearch(o,l)),Scorer.score&&d.forEach((e=>e[4]=Scorer.score(e))),d.sort(((e,t)=>{const r=e[4],n=t[4];if(r===n){const r=e[1].toLowerCase(),n=t[1].toLowerCase();return r===n?0:r>n?-1:1}return r>n?1:-1}));let m=new Set;d=d.reverse().reduce(((e,t)=>{let r=t.slice(0,4).concat([t[5]]).map((e=>String(e))).join(",");return m.has(r)||(e.push(t),m.add(r)),e}),[]),d=d.reverse(),_displayNextItem(d,d.length,o)},performObjectSearch:(e,t)=>{const r=Search._index.filenames,n=Search._index.docnames,a=Search._index.objects,s=Search._index.objnames,c=Search._index.titles,o=[];return Object.keys(a).forEach((l=>a[l].forEach((a=>((a,l)=>{const i=l[4],h=(a?a+".":"")+i,d=h.toLowerCase();if(d.indexOf(e)<0)return;let u=0;const m=d.split(".");d===e||m.slice(-1)[0]===e?u+=Scorer.objNameMatch:m.slice(-1)[0].indexOf(e)>-1&&(u+=Scorer.objPartialMatch);const S=s[l[1]][2],p=c[l[0]],f=new Set(t);if(f.delete(e),f.size>0){const e=`${a} ${i} ${S} ${p}`.toLowerCase();if([...f].some((t=>e.indexOf(t)<0)))return}let x=l[3];""===x?x=h:"-"===x&&(x=s[l[1]][1]+"-"+h);const g=S+_(", in ")+p;Scorer.objPrio.hasOwnProperty(l[2])?u+=Scorer.objPrio[l[2]]:u+=Scorer.objPrioDefault,o.push([n[l[0]],h,"#"+x,g,u,r[l[0]]])})(l,a))))),o},performTermsSearch:(e,t)=>{const r=Search._index.terms,n=Search._index.titleterms,a=Search._index.filenames,s=Search._index.docnames,c=Search._index.titles,o=new Map,l=new Map;e.forEach((e=>{const t=[],a=[{files:r[e],score:Scorer.term},{files:n[e],score:Scorer.title}];if(e.length>2){const t=_escapeRegExp(e);Object.keys(r).forEach((n=>{n.match(t)&&!r[e]&&a.push({files:r[n],score:Scorer.partialTerm})})),Object.keys(n).forEach((r=>{r.match(t)&&!n[e]&&a.push({files:n[e],score:Scorer.partialTitle})}))}a.every((e=>void 0===e.files))||(a.forEach((r=>{if(void 0===r.files)return;let n=r.files;void 0===n.length&&(n=[n]),t.push(...n),n.forEach((t=>{o.has(t)||o.set(t,{}),o.get(t)[e]=r.score}))})),t.forEach((t=>{l.has(t)&&-1===l.get(t).indexOf(e)?l.get(t).push(e):l.set(t,[e])})))}));const i=[];for(const[h,d]of l){const l=[...e].filter((e=>e.length>2)).length;if(d.length!==e.size&&d.length!==l)continue;if([...t].some((e=>r[e]===h||n[e]===h||(r[e]||[]).includes(h)||(n[e]||[]).includes(h))))break;const u=Math.max(...d.map((e=>o.get(h)[e])));i.push([s[h],c[h],"",null,u,a[h]])}return i},makeSearchSummary:(e,t)=>{const r=Search.htmlToText(e);if(""===r)return null;const n=r.toLowerCase(),a=[...t].map((e=>n.indexOf(e.toLowerCase()))).filter((e=>e>-1)).slice(-1)[0],s=Math.max(a-120,0),c=0===s?"":"...",o=s+240<r.length?"...":"";let l=document.createElement("p");return l.classList.add("context"),l.textContent=c+r.substr(s,240).trim()+o,l}};_ready(Search.init);