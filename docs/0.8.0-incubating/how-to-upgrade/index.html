<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-0.8.0-incubating docs-doc-page docs-doc-id-how-to-upgrade" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">How to upgrade Apache Gravitino | Apache Gravitino</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gravitino.apache.org/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://gravitino.apache.org/img/social-card.png"><meta data-rh="true" property="og:url" content="https://gravitino.apache.org/docs/0.8.0-incubating/how-to-upgrade"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.8.0-incubating"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.8.0-incubating"><meta data-rh="true" name="docsearch:version" content="0.8.0-incubating"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.8.0-incubating"><meta data-rh="true" property="og:title" content="How to upgrade Apache Gravitino | Apache Gravitino"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gravitino.apache.org/docs/0.8.0-incubating/how-to-upgrade"><link data-rh="true" rel="alternate" href="https://gravitino.apache.org/docs/0.8.0-incubating/how-to-upgrade" hreflang="en"><link data-rh="true" rel="alternate" href="https://gravitino.apache.org/docs/0.8.0-incubating/how-to-upgrade" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Gravitino RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Gravitino Atom Feed">









<script src="/js/matomo.js" async></script><link rel="stylesheet" href="/assets/css/styles.ecc19b7f.css">
<script src="/assets/js/runtime~main.c2c8dc18.js" defer="defer"></script>
<script src="/assets/js/main.1992bf22.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_deSZ" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Logo" class="themedComponent_QZ3t themedComponent--light_Y46D"><img src="/img/logo.svg" alt="Logo" class="themedComponent_QZ3t themedComponent--dark_PLWD"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Apache Gravitino</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/contrib">Contributing</a><a class="navbar__item navbar__link" href="/downloads">Downloads</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/0.8.0-incubating/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/docs/0.8.0-incubating/how-to-upgrade">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li><li><a href="https://github.com/apache/gravitino/blob/main/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="dropdown__link">Code of Conduct</a></li></ul></div><a href="https://github.com/apache/gravitino" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbarSearchContainer_vCe2"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_cWIH"><div class="docsWrapper_P_60"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_o_OJ" type="button"></button><div class="docRoot_feSq"><aside class="theme-doc-sidebar-container docSidebarContainer_sTQI"><div class="sidebarViewport_rB8v"><div class="sidebar_mhZE"><div class="tw"><div class="relative my-2 px-2"><button class="border-none relative w-full cursor-default rounded-md bg-white dark:bg-[#21222b] dark:text-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 sm:text-sm sm:leading-6" id="headlessui-listbox-button-:R32llaqh:" type="button" aria-haspopup="listbox" aria-expanded="false" data-headlessui-state=""><span class="flex items-center"><span class="ml-3 block truncate">0.8.0-incubating</span></span><span class="pointer-events-none absolute inset-y-0 right-0 ml-3 flex items-center pr-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-5 w-5 text-gray-400"><path fill-rule="evenodd" d="M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z" clip-rule="evenodd"></path></svg></span></button></div></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.8.0-incubating/">What&#x27;s Apache Gravitino?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.8.0-incubating/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.8.0-incubating/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.8.0-incubating/how-to-install">How to install Gravitino</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.8.0-incubating/iceberg-rest-service">Iceberg REST catalog service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.8.0-incubating/webui">Web UI</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.8.0-incubating/getting-started#getting-started-locally">Running Gravitino on</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.8.0-incubating/lakehouse-iceberg-catalog">Catalogs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.8.0-incubating/trino-connector/index">Trino connector</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.8.0-incubating/spark-connector/spark-connector">Spark connector</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.8.0-incubating/flink-connector/flink-connector">Flink connector</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.8.0-incubating/gravitino-server-config">Server administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.8.0-incubating/security/security">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.8.0-incubating/how-to-use-the-playground">Gravitino playground</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.8.0-incubating/manage-metalake-using-gravitino">Programming guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/0.8.0-incubating/how-to-build">Development guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.8.0-incubating/how-to-build">How to build</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.8.0-incubating/how-to-test">How to test</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.8.0-incubating/how-to-sign-releases">How to sign and verify</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.8.0-incubating/publish-docker-images">Publish Docker images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.8.0-incubating/docker-image-details">Docker image details</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0.8.0-incubating/how-to-upgrade">How to upgrade</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.8.0-incubating/glossary">Apache Gravitino Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_mHbc"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_gAtQ"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache Gravitino<!-- --> <b>0.8.0-incubating</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/1.0.0/how-to-upgrade">latest version</a></b> (<!-- -->1.0.0<!-- -->).</div></div><div class="docItemContainer_Y6pU"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_YRN5" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_BGoW"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Development guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">How to upgrade</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.8.0-incubating</span><div class="tocCollapsible_KxXo theme-doc-toc-mobile tocMobile_s7xu"><button type="button" class="clean-btn tocCollapsibleButton_yck2">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to upgrade Apache Gravitino</h1></header><div class="row"><div class="col col--12 markdown"><h2 class="anchor anchorWithStickyNavbar__3An" id="introduction">Introduction<a class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" href="/docs/0.8.0-incubating/how-to-upgrade#introduction">​</a></h2>
<p>This document describes how to upgrade the schema of backed
Gravitino instance from one release version of Gravitino to another
release version of Gravitino. For example, by following the steps listed
below it is possible to upgrade a Gravitino 0.6.0 schema to a
Gravitino 0.7.0 schema. Before attempting this project we
strongly recommend that you read through all of the steps in this
document and familiarize yourself with the required tools.</p>
<h2 class="anchor anchorWithStickyNavbar__3An" id="upgrade-steps">Upgrade Steps<a class="hash-link" aria-label="Direct link to Upgrade Steps" title="Direct link to Upgrade Steps" href="/docs/0.8.0-incubating/how-to-upgrade#upgrade-steps">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar__3An" id="step-1-shutdown-your-gravitino-instance">Step 1: Shutdown your Gravitino instance<a class="hash-link" aria-label="Direct link to Step 1: Shutdown your Gravitino instance" title="Direct link to Step 1: Shutdown your Gravitino instance" href="/docs/0.8.0-incubating/how-to-upgrade#step-1-shutdown-your-gravitino-instance">​</a></h3>
<p>Shutdown your Gravitino instance and restrict access to the
Apache Gravitino&#x27;s database. It is very important that no one else
accesses or modifies the contents of database while you are
performing the schema upgrade.</p>
<h3 class="anchor anchorWithStickyNavbar__3An" id="step-2-backup-your-gravitino-instance">Step 2: Backup your Gravitino instance<a class="hash-link" aria-label="Direct link to Step 2: Backup your Gravitino instance" title="Direct link to Step 2: Backup your Gravitino instance" href="/docs/0.8.0-incubating/how-to-upgrade#step-2-backup-your-gravitino-instance">​</a></h3>
<p>Create a backup of your database. This will allow
you to revert any changes made during the upgrade process if
something goes wrong.</p>
<h4 class="anchor anchorWithStickyNavbar__3An" id="mysql">MySQL<a class="hash-link" aria-label="Direct link to MySQL" title="Direct link to MySQL" href="/docs/0.8.0-incubating/how-to-upgrade#mysql">​</a></h4>
<p>For MySQL, you can use the following command to backup your database:</p>
<div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mysqldump --opt &lt;db_name&gt; &gt; backup.sql</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that you may also need to specify a hostname and username
using the <code>--host</code> and <code>--user</code> command line switches.</p>
<h4 class="anchor anchorWithStickyNavbar__3An" id="h2">H2<a class="hash-link" aria-label="Direct link to H2" title="Direct link to H2" href="/docs/0.8.0-incubating/how-to-upgrade#h2">​</a></h4>
<p>The easiest way of accomplishing this task is
by creating a copy of the directory containing your database.</p>
<h4 class="anchor anchorWithStickyNavbar__3An" id="postgresql">PostgreSQL<a class="hash-link" aria-label="Direct link to PostgreSQL" title="Direct link to PostgreSQL" href="/docs/0.8.0-incubating/how-to-upgrade#postgresql">​</a></h4>
<p>For PostgreSQL, you can use the following command to backup your database:</p>
<div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pg_dump -U username -h hostname -d database_name -n schema_name -a -F c -f data_backup.sql</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar__3An" id="step-3-dump-your-gravitino-database">Step 3: Dump your Gravitino database<a class="hash-link" aria-label="Direct link to Step 3: Dump your Gravitino database" title="Direct link to Step 3: Dump your Gravitino database" href="/docs/0.8.0-incubating/how-to-upgrade#step-3-dump-your-gravitino-database">​</a></h3>
<p>Dump your Gravitino database schema to a file</p>
<h4 class="anchor anchorWithStickyNavbar__3An" id="mysql-1">MySQL<a class="hash-link" aria-label="Direct link to MySQL" title="Direct link to MySQL" href="/docs/0.8.0-incubating/how-to-upgrade#mysql-1">​</a></h4>
<p>You can use the mysqldump utility to dump the database schema to a file:</p>
<div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mysqldump --skip-add-drop-table --no-data &lt;db_name&gt; &gt; schema-x.y.z-mysql.sql</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar__3An" id="h2-1">H2<a class="hash-link" aria-label="Direct link to H2" title="Direct link to H2" href="/docs/0.8.0-incubating/how-to-upgrade#h2-1">​</a></h4>
<p>For H2, you can use the <code>Script</code> tool to dump the database schema to a file:</p>
<div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">wget https://repo1.maven.org/maven2/com/h2database/h2/1.4.200/h2-1.4.200.jar</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">java -cp h2-1.4.200.jar org.h2.tools.Script -url &quot;jdbc:h2:file:&lt;db_file&gt;;DB_CLOSE_DELAY=-1;MODE=MYSQL&quot; -user &lt;user&gt; -password &lt;password&gt; -script backup.sql</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that you may need to specify your h2 file path, username and password</p>
<h4 class="anchor anchorWithStickyNavbar__3An" id="postgresql-1">PostgreSQL<a class="hash-link" aria-label="Direct link to PostgreSQL" title="Direct link to PostgreSQL" href="/docs/0.8.0-incubating/how-to-upgrade#postgresql-1">​</a></h4>
<p>For PostgreSQL, you can use the following command to dump the database schema to a file:</p>
<div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pg_dump -U username -h hostname -d database_name -n schema_name -s -F c -f schema-x.y.z-postgresql.sql</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar__3An" id="step-4-determine-differences-between-your-schema-and-the-official-schema">Step 4: Determine differences between your schema and the official schema<a class="hash-link" aria-label="Direct link to Step 4: Determine differences between your schema and the official schema" title="Direct link to Step 4: Determine differences between your schema and the official schema" href="/docs/0.8.0-incubating/how-to-upgrade#step-4-determine-differences-between-your-schema-and-the-official-schema">​</a></h3>
<p>The schema upgrade scripts assume that the schema you are upgrading
closely matches the official schema for your particular version of
Gravitino. The files in this directory with names like
<code>schema-x.y.z-&lt;type&gt;.sql</code> contain dumps of the official schemas
corresponding to each of the released versions of Gravitino. You can
determine differences between your schema and the official schema
by comparing the contents of the official dump with the schema dump
you created in the previous step. Some differences are acceptable and will not interfere
with the upgrade process, but others need to be resolved manually
or the upgrade scripts will fail to complete.</p>
<h3 class="anchor anchorWithStickyNavbar__3An" id="step-5-apply-the-upgrade-scripts">Step 5: Apply the upgrade scripts<a class="hash-link" aria-label="Direct link to Step 5: Apply the upgrade scripts" title="Direct link to Step 5: Apply the upgrade scripts" href="/docs/0.8.0-incubating/how-to-upgrade#step-5-apply-the-upgrade-scripts">​</a></h3>
<p>You are now ready to run the schema upgrade scripts. If you are
upgrading from Gravitino 0.6.0 to Gravitino 0.7.0 you need to run the
<code>upgrade-0.6.0-to-0.7.0-&lt;type&gt;.sql</code> script, but if you are upgrading
from 0.6.0 to 0.8.0 you will need to run the 0.6.0 to 0.7.0 upgrade
script followed by the 0.7.0 to 0.8.0 upgrade script.</p>
<h4 class="anchor anchorWithStickyNavbar__3An" id="mysql-2">MySQL<a class="hash-link" aria-label="Direct link to MySQL" title="Direct link to MySQL" href="/docs/0.8.0-incubating/how-to-upgrade#mysql-2">​</a></h4>
<p>Assuming you are upgrading the version of Gravitino server from 0.6.0 to 0.8.0</p>
<div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mysql --verbose</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mysql&gt; use &lt;db_name&gt;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Database changed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mysql&gt; source upgrade-0.6.0-to-0.7.0-mysql.sql</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mysql&gt; source upgrade-0.7.0-to-0.8.0-mysql.sql</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar__3An" id="h2-2">H2<a class="hash-link" aria-label="Direct link to H2" title="Direct link to H2" href="/docs/0.8.0-incubating/how-to-upgrade#h2-2">​</a></h4>
<p>For H2, you can use the <code>RunScript</code> tool to apply the upgrade script:</p>
<div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">java -cp h2-1.4.200.jar org.h2.tools.RunScript -url &quot;jdbc:h2:file:&lt;db_file&gt;;DB_CLOSE_DELAY=-1;MODE=MYSQL&quot; -user &lt;user&gt; -password &lt;password&gt; -script upgrade-0.6.0-to-0.7.0-h2.sql</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">java -cp h2-1.4.200.jar org.h2.tools.RunScript -url &quot;jdbc:h2:file:&lt;db_file&gt;;DB_CLOSE_DELAY=-1;MODE=MYSQL&quot; -user &lt;user&gt; -password &lt;password&gt; -script upgrade-0.7.0-to-0.8.0-h2.sql</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar__3An" id="postgresql-2">PostgreSQL<a class="hash-link" aria-label="Direct link to PostgreSQL" title="Direct link to PostgreSQL" href="/docs/0.8.0-incubating/how-to-upgrade#postgresql-2">​</a></h4>
<p>For PostgreSQL, you can use the following command to apply the upgrade script:</p>
<div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">psql -U username -h hostname -d database_name -c &quot;SET search_path TO schema_name;&quot; -f upgrade-0.6.0-to-0.7.0-postgresql.sql</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">psql -U username -h hostname -d database_name -c &quot;SET search_path TO schema_name;&quot; -f upgrade-0.7.0-to-0.8.0-postgresql.sql</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These scripts should run to completion without any errors. If you
do encounter errors you need to analyze the cause and attempt to
trace it back to one of the preceding steps.</p>
<h3 class="anchor anchorWithStickyNavbar__3An" id="step-6-verify-the-upgrade">Step 6: Verify the upgrade<a class="hash-link" aria-label="Direct link to Step 6: Verify the upgrade" title="Direct link to Step 6: Verify the upgrade" href="/docs/0.8.0-incubating/how-to-upgrade#step-6-verify-the-upgrade">​</a></h3>
<p>The final step of the upgrade process is validating your freshly
upgraded schema against the official schema for your particular
version of Gravitino. This is accomplished by repeating steps (3) and
(4), but this time comparing against the official version of the
upgraded schema, e.g. if you upgraded the schema to Gravitino 0.8.0 then
you will want to compare your schema dump against the contents of
<code>schema-0.8.0-&lt;type&gt;.sql</code></p>
<img src="https://analytics.apache.org/matomo.php?idsite=62&amp;rec=1&amp;bots=1&amp;action_name=HowToUpgrade" alt=""></div></div></div><div class="row"><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/gravitino-site/tree/main/docs/how-to-upgrade.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_IcLb" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_tkxX"></div></div></footer></div></div></article><div class="row"><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0.8.0-incubating/docker-image-details"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Docker image details</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0.8.0-incubating/glossary"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Apache Gravitino Glossary</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_P9pP thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/0.8.0-incubating/how-to-upgrade#introduction">Introduction</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/0.8.0-incubating/how-to-upgrade#upgrade-steps">Upgrade Steps</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/0.8.0-incubating/how-to-upgrade#step-1-shutdown-your-gravitino-instance">Step 1: Shutdown your Gravitino instance</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/0.8.0-incubating/how-to-upgrade#step-2-backup-your-gravitino-instance">Step 2: Backup your Gravitino instance</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/0.8.0-incubating/how-to-upgrade#step-3-dump-your-gravitino-database">Step 3: Dump your Gravitino database</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/0.8.0-incubating/how-to-upgrade#step-4-determine-differences-between-your-schema-and-the-official-schema">Step 4: Determine differences between your schema and the official schema</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/0.8.0-incubating/how-to-upgrade#step-5-apply-the-upgrade-scripts">Step 5: Apply the upgrade scripts</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/0.8.0-incubating/how-to-upgrade#step-6-verify-the-upgrade">Step 6: Verify the upgrade</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"><div>
      <p>
        Copyright © 2025 The Apache Software Foundation, Licensed under the Apache License, Version 2.0. <br>
        Apache Gravitino, the names of other Apache projects, and the ASF logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.
      </p>
      </div></div></div></div></footer></div>
</body>
</html>