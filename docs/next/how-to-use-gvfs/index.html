<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-how-to-use-gvfs" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">How to use Apache Gravitino Virtual File System with Filesets | Apache Gravitino</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gravitino.apache.org/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://gravitino.apache.org/img/social-card.png"><meta data-rh="true" property="og:url" content="https://gravitino.apache.org/docs/next/how-to-use-gvfs"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to use Apache Gravitino Virtual File System with Filesets | Apache Gravitino"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gravitino.apache.org/docs/next/how-to-use-gvfs"><link data-rh="true" rel="alternate" href="https://gravitino.apache.org/docs/next/how-to-use-gvfs" hreflang="en"><link data-rh="true" rel="alternate" href="https://gravitino.apache.org/docs/next/how-to-use-gvfs" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Gravitino RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Gravitino Atom Feed">









<script src="js/matomo.js" async></script><link rel="stylesheet" href="/assets/css/styles.a5a38d1c.css">
<script src="/assets/js/runtime~main.9d471c52.js" defer="defer"></script>
<script src="/assets/js/main.983555b5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_Bdtr" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Logo" class="themedComponent_CzBg themedComponent--light_Z2p2"><img src="/img/logo.svg" alt="Logo" class="themedComponent_CzBg themedComponent--dark_bRqs"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Apache Gravitino</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/contrib">Contributing</a><a class="navbar__item navbar__link" href="/downloads">Downloads</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/next/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/docs/next/how-to-use-gvfs">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li><li><a href="https://github.com/apache/gravitino/blob/main/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="dropdown__link">Code of Conduct</a></li></ul></div><a href="https://github.com/apache/gravitino" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbarSearchContainer_Ddwr"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_LrL_"><div class="docsWrapper_SMWk"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Ue0u" type="button"></button><div class="docRoot_hCPp"><aside class="theme-doc-sidebar-container docSidebarContainer_zmUf"><div class="sidebarViewport_Qwcd"><div class="sidebar_mhZE"><div class="tw"><div class="relative my-2 px-2"><button class="border-none relative w-full cursor-default rounded-md bg-white dark:bg-[#21222b] dark:text-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 sm:text-sm sm:leading-6" id="headlessui-listbox-button-:R32llaqh:" type="button" aria-haspopup="listbox" aria-expanded="false" data-headlessui-state=""><span class="flex items-center"><span class="ml-3 block truncate">Next</span></span><span class="pointer-events-none absolute inset-y-0 right-0 ml-3 flex items-center pr-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-5 w-5 text-gray-400"><path fill-rule="evenodd" d="M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z" clip-rule="evenodd"></path></svg></span></button></div></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/">What&#x27;s Apache Gravitino?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/how-to-install">How to install Gravitino</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/chart">Install Gravitino on Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/iceberg-rest-service">Iceberg REST catalog service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/webui">Web UI</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/lakehouse-iceberg-catalog">Catalogs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/trino-connector/index">Trino connector</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/spark-connector/spark-connector">Spark connector</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/flink-connector/flink-connector">Flink connector</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/gravitino-server-config">Server administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/lineage/lineage">Lineage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/security/security">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/how-to-use-the-playground">Gravitino playground</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/next/manage-metalake-using-gravitino">Programming guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/manage-metalake-using-gravitino">Manage metalake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/manage-relational-metadata-using-gravitino">Manage relational metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/manage-table-partition-using-gravitino">Manage table partition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/table-partitioning-bucketing-sort-order-indexes">Table partitioning, bucketing, sort ordering and indexes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/expression">Expression system</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/manage-fileset-metadata-using-gravitino">Manage fileset metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/how-to-use-gvfs">Use Gravitino Virtual File System with Filesets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/manage-massaging-metadata-using-gravitino">Manage messaging metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/manage-model-metadata-using-gravitino">Manage model metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/manage-tags-in-gravitino">Manage tags in Gravitino</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/how-to-use-gravitino-python-client">Use Gravitino Python Client</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/next/api/rest/gravitino-rest-api">Gravitino Open API</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="/docs/0.9.0-incubating/api/java/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_Gtab" tabindex="0">Gravitino Java doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Kxm2"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="/docs/0.9.0-incubating/api/python/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_Gtab" tabindex="0">Gravitino Python doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Kxm2"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/how-to-build">Development guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/glossary">Apache Gravitino Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_NnVP"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Hwzn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Apache Gravitino<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/0.9.0-incubating/how-to-use-gvfs">latest version</a></b> (<!-- -->0.9.0-incubating<!-- -->).</div></div><div class="docItemContainer__5yL"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_fYtt" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_whEV"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Programming guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Use Gravitino Virtual File System with Filesets</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_Ye3u theme-doc-toc-mobile tocMobile_JT7t"><button type="button" class="clean-btn tocCollapsibleButton_yQne">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to use Apache Gravitino Virtual File System with Filesets</h1></header><div class="row"><div class="col col--12 markdown"><h2 class="anchor anchorWithStickyNavbar_J_tx" id="introduction">Introduction<a class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" href="/docs/next/how-to-use-gvfs#introduction">​</a></h2>
<p><code>Fileset</code> is a concept brought in by Apache Gravitino, which is a logical collection of files and
directories, with <code>fileset</code> you can manage non-tabular data through Gravitino. For
details, you can read <a href="/docs/next/manage-fileset-metadata-using-gravitino">How to manage fileset metadata using Gravitino</a>.</p>
<p>To use <code>fileset</code> managed by Gravitino, Gravitino provides a virtual file system layer called
the Gravitino Virtual File System (GVFS):</p>
<ul>
<li>In Java, it&#x27;s built on top of the Hadoop Compatible File System(HCFS) interface.</li>
<li>In Python, it&#x27;s built on top of the <a href="https://filesystem-spec.readthedocs.io/en/stable/index.html" target="_blank" rel="noopener noreferrer">fsspec</a>
interface.</li>
</ul>
<p>GVFS is a virtual layer that manages the files and directories in the fileset through a virtual
path, without needing to understand the specific storage details of the fileset. You can access
the files or folders as shown below:</p>
<div class="language-text codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-text codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gvfs://fileset/${catalog_name}/${schema_name}/${fileset_name}/sub_dir/</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In python GVFS, you can also access the files or folders as shown below:</p>
<div class="language-text codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-text codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">fileset/${catalog_name}/${schema_name}/${fileset_name}/sub_dir/</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here <code>gvfs</code> is the scheme of the GVFS, <code>fileset</code> is the root directory of the GVFS which can&#x27;t
modified, and <code>${catalog_name}/${schema_name}/${fileset_name}</code> is the virtual path of the fileset.
You can access the files and folders under this virtual path by concatenating a file or folder
name to the virtual path.</p>
<p>The usage pattern for GVFS is the same as HDFS or S3. GVFS internally manages
the path mapping and convert automatically.</p>
<h2 class="anchor anchorWithStickyNavbar_J_tx" id="1-managing-files-of-fileset-with-java-gvfs">1. Managing files of Fileset with Java GVFS<a class="hash-link" aria-label="Direct link to 1. Managing files of Fileset with Java GVFS" title="Direct link to 1. Managing files of Fileset with Java GVFS" href="/docs/next/how-to-use-gvfs#1-managing-files-of-fileset-with-java-gvfs">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_J_tx" id="prerequisites">Prerequisites<a class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" href="/docs/next/how-to-use-gvfs#prerequisites">​</a></h3>
<ul>
<li>GVFS has been tested against Hadoop 3.3.1. It is recommended to use Hadoop 3.3.1 or later, but it should work with Hadoop 2.
x. Please create an <a href="https://www.github.com/apache/gravitino/issues" target="_blank" rel="noopener noreferrer">issue</a> if you find any
compatibility issues.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_J_tx" id="configuration">Configuration<a class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration" href="/docs/next/how-to-use-gvfs#configuration">​</a></h3>
<table><thead><tr><th>Configuration item</th><th>Description</th><th>Default value</th><th>Required</th><th>Since version</th></tr></thead><tbody><tr><td><code>fs.AbstractFileSystem.gvfs.impl</code></td><td>The Gravitino Virtual File System abstract class, set it to <code>org.apache.gravitino.filesystem.hadoop.Gvfs</code>.</td><td>(none)</td><td>Yes</td><td>0.5.0</td></tr><tr><td><code>fs.gvfs.impl</code></td><td>The Gravitino Virtual File System implementation class, set it to <code>org.apache.gravitino.filesystem.hadoop.GravitinoVirtualFileSystem</code>.</td><td>(none)</td><td>Yes</td><td>0.5.0</td></tr><tr><td><code>fs.gvfs.impl.disable.cache</code></td><td>Disable the Gravitino Virtual File System cache in the Hadoop environment. If you need to proxy multi-user operations, please set this value to <code>true</code> and create a separate File System for each user.</td><td><code>false</code></td><td>No</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.server.uri</code></td><td>The Gravitino server URI which GVFS needs to load the fileset metadata.</td><td>(none)</td><td>Yes</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.client.metalake</code></td><td>The metalake to which the fileset belongs.</td><td>(none)</td><td>Yes</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.client.authType</code></td><td>The auth type to initialize the Gravitino client to use with the Gravitino Virtual File System. Currently only supports <code>simple</code>, <code>oauth2</code> and <code>kerberos</code> auth types.</td><td><code>simple</code></td><td>No</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.client.oauth2.serverUri</code></td><td>The auth server URI for the Gravitino client when using <code>oauth2</code> auth type with the Gravitino Virtual File System.</td><td>(none)</td><td>Yes if you use <code>oauth2</code> auth type</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.client.oauth2.credential</code></td><td>The auth credential for the Gravitino client when using <code>oauth2</code> auth type in the Gravitino Virtual File System.</td><td>(none)</td><td>Yes if you use <code>oauth2</code> auth type</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.client.oauth2.path</code></td><td>The auth server path for the Gravitino client when using <code>oauth2</code> auth type with the Gravitino Virtual File System. Please remove the first slash <code>/</code> from the path, for example <code>oauth/token</code>.</td><td>(none)</td><td>Yes if you use <code>oauth2</code> auth type</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.client.oauth2.scope</code></td><td>The auth scope for the Gravitino client when using <code>oauth2</code> auth type with the Gravitino Virtual File System.</td><td>(none)</td><td>Yes if you use <code>oauth2</code> auth type</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.client.kerberos.principal</code></td><td>The auth principal for the Gravitino client when using <code>kerberos</code> auth type with the Gravitino Virtual File System.</td><td>(none)</td><td>Yes if you use <code>kerberos</code> auth type</td><td>0.5.1</td></tr><tr><td><code>fs.gravitino.client.kerberos.keytabFilePath</code></td><td>The auth keytab file path for the Gravitino client when using <code>kerberos</code> auth type in the Gravitino Virtual File System.</td><td>(none)</td><td>No</td><td>0.5.1</td></tr><tr><td><code>fs.gravitino.fileset.cache.maxCapacity</code></td><td>The cache capacity of the Gravitino Virtual File System.</td><td><code>20</code></td><td>No</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.fileset.cache.evictionMillsAfterAccess</code></td><td>The value of time that the cache expires after accessing in the Gravitino Virtual File System. The value is in <code>milliseconds</code>.</td><td><code>3600000</code></td><td>No</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.fileset.cache.evictionMillsAfterAccess</code></td><td>The value of time that the cache expires after accessing in the Gravitino Virtual File System. The value is in <code>milliseconds</code>.</td><td><code>3600000</code></td><td>No</td><td>0.5.0</td></tr><tr><td><code>fs.gravitino.current.location.name</code></td><td>The configuration used to select the location of the fileset. If this configuration is not set, the value of environment variable configured by <code>fs.gravitino.current.location.env.var</code> will be checked. If neither is set, the value of fileset property <code>default-location-name</code> will be used as the location name.</td><td>the value of fileset property <code>default-location-name</code></td><td>No</td><td>0.9.0-incubating</td></tr><tr><td><code>fs.gravitino.current.location.name.env.var</code></td><td>The environment variable name to get the current location name.</td><td><code>CURRENT_LOCATION_NAME</code></td><td>No</td><td>0.9.0-incubating</td></tr><tr><td><code>fs.gravitino.operations.class</code></td><td>The operations class to provide the FS operations for the Gravitino Virtual File System. Users can extends <code>BaseGVFSOperations</code> to implement their own operations and configure the class name in this conf to use custom FS operations.</td><td><code>org.apache.gravitino.filesystem.hadoop.DefaultGVFSOperations</code></td><td>No</td><td>0.9.0-incubating</td></tr><tr><td><code>fs.gravitino.hook.class</code></td><td>The hook class to inject into the <br>Gravitino Virtual File System. Users can implement their own <code>GravitinoVirtualFileSystemHook</code> and configure the class name in this conf to inject custom code.</td><td><code>org.apache.gravitino.filesystem.hadoop.NoOpHook</code></td><td>No</td><td>0.9.0-incubating</td></tr><tr><td><code>fs.gravitino.client.request.header.</code></td><td>The configuration key prefix for the Gravitino client request header. You can set the request header for the Gravitino client.</td><td>(none)</td><td>No</td><td>0.9.0-incubating</td></tr><tr><td><code>fs.gravitino.enableCredentialVending</code></td><td>Whether to enable credential vending for the Gravitino Virtual File System.</td><td><code>false</code></td><td>No</td><td>0.9.0-incubating</td></tr></tbody></table>
<p>Apart from the above properties, to access fileset like S3, GCS, OSS and custom fileset, extra properties are needed, please see
<a href="/docs/next/hadoop-catalog-with-s3#using-the-gvfs-java-client-to-access-the-fileset">S3 GVFS Java client configurations</a>, <a href="/docs/next/hadoop-catalog-with-gcs#using-the-gvfs-java-client-to-access-the-fileset">GCS GVFS Java client configurations</a>, <a href="/docs/next/hadoop-catalog-with-oss#using-the-gvfs-java-client-to-access-the-fileset">OSS GVFS Java client configurations</a> and <a href="/docs/next/hadoop-catalog-with-adls#using-the-gvfs-java-client-to-access-the-fileset">Azure Blob Storage GVFS Java client configurations</a> for more details.</p>
<h4 class="anchor anchorWithStickyNavbar_J_tx" id="custom-fileset">Custom fileset<a class="hash-link" aria-label="Direct link to Custom fileset" title="Direct link to Custom fileset" href="/docs/next/how-to-use-gvfs#custom-fileset">​</a></h4>
<p>Since 0.7.0-incubating, users can define their own fileset type and configure the corresponding properties, for more, please refer to <a href="/docs/next/hadoop-catalog#how-to-custom-your-own-hcfs-file-system-fileset">Custom Fileset</a>.
So, if you want to access the custom fileset through GVFS, you need to configure the corresponding properties.</p>
<table><thead><tr><th>Configuration item</th><th>Description</th><th>Default value</th><th>Required</th><th>Since version</th></tr></thead><tbody><tr><td><code>your-custom-properties</code></td><td>The properties will be used to create a FileSystem instance in <code>CustomFileSystemProvider#getFileSystem</code></td><td>(none)</td><td>No</td><td>-</td></tr></tbody></table>
<p>You can configure these properties in two ways:</p>
<ol>
<li>
<p>Before obtaining the <code>FileSystem</code> in the code, construct a <code>Configuration</code> object and set its properties:</p>
<div class="language-java codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-java codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Configuration conf = new Configuration();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.AbstractFileSystem.gvfs.impl&quot;,&quot;org.apache.gravitino.filesystem.hadoop.Gvfs&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gvfs.impl&quot;,&quot;org.apache.gravitino.filesystem.hadoop.GravitinoVirtualFileSystem&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.server.uri&quot;,&quot;http://localhost:8090&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.metalake&quot;,&quot;test_metalake&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Path filesetPath = new Path(&quot;gvfs://fileset/test_catalog/test_schema/test_fileset_1&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FileSystem fs = filesetPath.getFileSystem(conf);</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Configure the properties in the <code>core-site.xml</code> file of the Hadoop environment:</p>
<div class="language-xml codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-xml codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">property</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">name</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">fs.AbstractFileSystem.gvfs.impl</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">name</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">value</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">org.apache.gravitino.filesystem.hadoop.Gvfs</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">value</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">property</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">property</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">name</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">fs.gvfs.impl</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">name</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">value</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">org.apache.gravitino.filesystem.hadoop.GravitinoVirtualFileSystem</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">value</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">property</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">property</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">name</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">fs.gravitino.server.uri</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">name</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">value</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">http://localhost:8090</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">value</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">property</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">property</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">name</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">fs.gravitino.client.metalake</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">name</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">value</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">test_metalake</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">value</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">property</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_J_tx" id="usage-examples">Usage examples<a class="hash-link" aria-label="Direct link to Usage examples" title="Direct link to Usage examples" href="/docs/next/how-to-use-gvfs#usage-examples">​</a></h3>
<p>First make sure to obtain the Gravitino Virtual File System runtime jar, which you can get in
two ways:</p>
<ol>
<li>
<p>Download from the maven central repository. You can download the runtime jar named
<code>gravitino-filesystem-hadoop3-runtime-{version}.jar</code> from <a href="https://mvnrepository.com/" target="_blank" rel="noopener noreferrer">Maven repository</a>.</p>
</li>
<li>
<p>Compile from the source code:</p>
<p>Download or clone the <a href="https://github.com/apache/gravitino" target="_blank" rel="noopener noreferrer">Gravitino source code</a>, and compile it
locally using the following command in the Gravitino source code directory:</p>
<div class="language-shell codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-shell codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ./gradlew :clients:filesystem-hadoop3-runtime:build -x test</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_eK1l alert alert--secondary"><div class="admonitionHeading_wt4v"><span class="admonitionIcon_xQj2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_xFN2"><p>For fileset with multiple locations, you can specify which location to access using one of these methods (in priority order):</p><ol>
<li>Set the <code>fs.gravitino.current.location.name</code> configuration property</li>
<li>Export the environment variable <code>CURRENT_LOCATION_NAME</code></li>
<li>If neither is specified, the system will use the value of <code>default-location-name</code> from the fileset properties</li>
</ol></div></div>
<h4 class="anchor anchorWithStickyNavbar_J_tx" id="via-hadoop-shell-command">Via Hadoop shell command<a class="hash-link" aria-label="Direct link to Via Hadoop shell command" title="Direct link to Via Hadoop shell command" href="/docs/next/how-to-use-gvfs#via-hadoop-shell-command">​</a></h4>
<p>You can use the Hadoop shell command to perform operations on the fileset storage. For example:</p>
<div class="language-shell codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-shell codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 1. Configure the hadoop `core-site.xml` configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># You should put the required properties into this file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># set the location name if you want to access a specific location</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># export CURRENT_LOCATION_NAME=${the_fileset_location_name}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">vi ${HADOOP_HOME}/etc/hadoop/core-site.xml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 2. Place the GVFS runtime jar into your Hadoop environment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cp gravitino-filesystem-hadoop3-runtime-{version}.jar ${HADOOP_HOME}/share/hadoop/common/lib/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 3. Complete the Kerberos authentication setup of the Hadoop environment (if necessary).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># You need to ensure that the Kerberos has permission on the HDFS directory.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kinit -kt your_kerberos.keytab your_kerberos@xxx.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 4. Try to list the fileset</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./${HADOOP_HOME}/bin/hadoop dfs -ls gvfs://fileset/test_catalog/test_schema/test_fileset_1</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_J_tx" id="via-java-code">Via Java code<a class="hash-link" aria-label="Direct link to Via Java code" title="Direct link to Via Java code" href="/docs/next/how-to-use-gvfs#via-java-code">​</a></h4>
<p>You can also perform operations on the files or directories managed by fileset through Java code.
Make sure that your code is using the correct Hadoop environment, and that your environment
has the <code>gravitino-filesystem-hadoop3-runtime-{version}.jar</code> dependency.</p>
<p>For example:</p>
<div class="language-java codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-java codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Configuration conf = new Configuration();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.AbstractFileSystem.gvfs.impl&quot;,&quot;org.apache.gravitino.filesystem.hadoop.Gvfs&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gvfs.impl&quot;,&quot;org.apache.gravitino.filesystem.hadoop.GravitinoVirtualFileSystem&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.server.uri&quot;,&quot;http://localhost:8090&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.metalake&quot;,&quot;test_metalake&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// set the location name if you want to access a specific location</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// conf.set(&quot;fs.gravitino.current.location.name&quot;,&quot;test_location_name&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Path filesetPath = new Path(&quot;gvfs://fileset/test_catalog/test_schema/test_fileset_1&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FileSystem fs = filesetPath.getFileSystem(conf);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs.getFileStatus(filesetPath);</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_J_tx" id="via-apache-spark">Via Apache Spark<a class="hash-link" aria-label="Direct link to Via Apache Spark" title="Direct link to Via Apache Spark" href="/docs/next/how-to-use-gvfs#via-apache-spark">​</a></h4>
<ol>
<li>
<p>Add the GVFS runtime jar to the Spark environment.</p>
<p>You can use <code>--packages</code> or <code>--jars</code> in the Spark submit shell to include the Gravitino Virtual
File System runtime jar, like so:</p>
<div class="language-shell codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-shell codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./${SPARK_HOME}/bin/spark-submit --packages org.apache.gravitino:filesystem-hadoop3-runtime:${version}</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you want to include the Gravitino Virtual File System runtime jar in your Spark installation, add it to the <code>${SPARK_HOME}/jars/</code> folder.</p>
</li>
<li>
<p>Configure the Hadoop configuration when submitting the job.</p>
<p>You can configure in the shell command in this way:</p>
<div class="language-shell codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-shell codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">--conf spark.hadoop.fs.AbstractFileSystem.gvfs.impl=org.apache.gravitino.filesystem.hadoop.Gvfs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--conf spark.hadoop.fs.gvfs.impl=org.apache.gravitino.filesystem.hadoop.GravitinoVirtualFileSystem</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--conf spark.hadoop.fs.gravitino.server.uri=${your_gravitino_server_uri}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--conf spark.hadoop.fs.gravitino.client.metalake=${your_gravitino_metalake}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># set the location name if you want to access a specific location</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># --conf spark.hadoop.fs.gravitino.current.location.name=${the_fileset_location_name}</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Perform operations on the fileset storage in your code.</p>
<p>Finally, you can access the fileset storage in your Spark program:</p>
<div class="language-scala codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-scala codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Scala code</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">val spark = SparkSession.builder()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      .appName(&quot;Gvfs Example&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      .getOrCreate()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">val rdd = spark.sparkContext.textFile(&quot;gvfs://fileset/test_catalog/test_schema/test_fileset_1&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rdd.foreach(println)</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_J_tx" id="via-tensorflow">Via Tensorflow<a class="hash-link" aria-label="Direct link to Via Tensorflow" title="Direct link to Via Tensorflow" href="/docs/next/how-to-use-gvfs#via-tensorflow">​</a></h4>
<p>For Tensorflow to support GVFS, you need to recompile the <a href="https://github.com/tensorflow/io" target="_blank" rel="noopener noreferrer">tensorflow-io</a> module.</p>
<ol>
<li>
<p>First, add a patch and recompile tensorflow-io.</p>
<p>You need to add a <a href="https://github.com/tensorflow/io/pull/1970" target="_blank" rel="noopener noreferrer">patch</a> to support GVFS on
tensorflow-io. Then you can follow the <a href="https://github.com/tensorflow/io/blob/master/docs/development.md" target="_blank" rel="noopener noreferrer">tutorial</a>
to recompile your code and release the tensorflow-io module.</p>
</li>
<li>
<p>Then you need to configure the Hadoop configuration.</p>
<p>You need to configure the Hadoop configuration and add <code>gravitino-filesystem-hadoop3-runtime-{version}.jar</code>,
and set up the Kerberos environment according to the <a href="/docs/next/how-to-use-gvfs#use-gvfs-via-hadoop-shell-command">Use GVFS via Hadoop shell command</a> sections.</p>
<p>Then you need to set your environment as follows:</p>
<div class="language-shell codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-shell codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export HADOOP_HOME=${your_hadoop_home}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export HADOOP_CONF_DIR=${your_hadoop_conf_home}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># set the location name if you want to access a specific location</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># export CURRENT_LOCATION_NAME=${the_fileset_location_name} </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export PATH=$PATH:$HADOOP_HOME/libexec/hadoop-config.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$JAVA_HOME/jre/lib/amd64/server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export CLASSPATH=&quot;$(hadoop classpath --glob)&quot;</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Import tensorflow-io and test.</p>
<div class="language-python codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-python codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> tensorflow </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> tf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> tensorflow_io </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> tfio</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">## read a file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">tf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">io</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">read_file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;gvfs://fileset/test_catalog/test_schema/test_fileset_1/test.txt&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">## list directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">tf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">io</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">gfile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;gvfs://fileset/test_catalog/test_schema/test_fileset_1/&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_J_tx" id="authentication">Authentication<a class="hash-link" aria-label="Direct link to Authentication" title="Direct link to Authentication" href="/docs/next/how-to-use-gvfs#authentication">​</a></h3>
<p>Currently, Gravitino Virtual File System supports two kinds of authentication types to access Gravitino server: <code>simple</code> and <code>oauth2</code>.</p>
<p>The type of <code>simple</code> is the default authentication type in Gravitino Virtual File System.</p>
<h4 class="anchor anchorWithStickyNavbar_J_tx" id="how-to-use-authentication">How to use authentication<a class="hash-link" aria-label="Direct link to How to use authentication" title="Direct link to How to use authentication" href="/docs/next/how-to-use-gvfs#how-to-use-authentication">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_J_tx" id="using-simple-authentication">Using <code>simple</code> authentication<a class="hash-link" aria-label="Direct link to using-simple-authentication" title="Direct link to using-simple-authentication" href="/docs/next/how-to-use-gvfs#using-simple-authentication">​</a></h5>
<p>First, make sure that your Gravitino server is also configured to use the <code>simple</code> authentication mode.</p>
<p>Then, you can configure the Hadoop configuration like this:</p>
<div class="language-java codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-java codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Simple type uses the environment variable `GRAVITINO_USER` as the client user.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// If the environment variable `GRAVITINO_USER` isn&#x27;t set,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// the client uses the user of the machine that sends requests.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">System.setProperty(&quot;GRAVITINO_USER&quot;, &quot;test&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Configuration conf = new Configuration();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.AbstractFileSystem.gvfs.impl&quot;,&quot;org.apache.gravitino.filesystem.hadoop.Gvfs&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gvfs.impl&quot;,&quot;org.apache.gravitino.filesystem.hadoop.GravitinoVirtualFileSystem&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.server.uri&quot;,&quot;http://localhost:8090&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.metalake&quot;,&quot;test_metalake&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Configure the auth type to simple,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// or do not configure this configuration, gvfs will use simple type as default.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.authType&quot;, &quot;simple&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Path filesetPath = new Path(&quot;gvfs://fileset/test_catalog/test_schema/test_fileset_1&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FileSystem fs = filesetPath.getFileSystem(conf);</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_J_tx" id="using-oauth-authentication">Using <code>OAuth</code> authentication<a class="hash-link" aria-label="Direct link to using-oauth-authentication" title="Direct link to using-oauth-authentication" href="/docs/next/how-to-use-gvfs#using-oauth-authentication">​</a></h5>
<p>If you want to use <code>oauth2</code> authentication for the Gravitino client in the Gravitino Virtual File System,
please refer to this document to complete the configuration of the Gravitino server and the OAuth server: <a href="/docs/next/security/security">Security</a>.</p>
<p>Then, you can configure the Hadoop configuration like this:</p>
<div class="language-java codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-java codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Configuration conf = new Configuration();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.AbstractFileSystem.gvfs.impl&quot;,&quot;org.apache.gravitino.filesystem.hadoop.Gvfs&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gvfs.impl&quot;,&quot;org.apache.gravitino.filesystem.hadoop.GravitinoVirtualFileSystem&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.server.uri&quot;,&quot;http://localhost:8090&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.metalake&quot;,&quot;test_metalake&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Configure the auth type to oauth2.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.authType&quot;, &quot;oauth2&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Configure the OAuth configuration.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.oauth2.serverUri&quot;, &quot;${your_oauth_server_uri}&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.oauth2.credential&quot;, &quot;${your_client_credential}&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.oauth2.path&quot;, &quot;${your_oauth_server_path}&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.oauth2.scope&quot;, &quot;${your_client_scope}&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Path filesetPath = new Path(&quot;gvfs://fileset/test_catalog/test_schema/test_fileset_1&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FileSystem fs = filesetPath.getFileSystem(conf);</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_J_tx" id="using-kerberos-authentication">Using <code>Kerberos</code> authentication<a class="hash-link" aria-label="Direct link to using-kerberos-authentication" title="Direct link to using-kerberos-authentication" href="/docs/next/how-to-use-gvfs#using-kerberos-authentication">​</a></h5>
<p>If you want to use <code>kerberos</code> authentication for the Gravitino client in the Gravitino Virtual File System,
please refer to this document to complete the configuration of the Gravitino server: <a href="/docs/next/security/security">Security</a>.</p>
<p>Then, you can configure the Hadoop configuration like this:</p>
<div class="language-java codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-java codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Configuration conf = new Configuration();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.AbstractFileSystem.gvfs.impl&quot;,&quot;org.apache.gravitino.filesystem.hadoop.Gvfs&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gvfs.impl&quot;,&quot;org.apache.gravitino.filesystem.hadoop.GravitinoVirtualFileSystem&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.server.uri&quot;,&quot;http://localhost:8090&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.metalake&quot;,&quot;test_metalake&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Configure the auth type to kerberos.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.authType&quot;, &quot;kerberos&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Configure the Kerberos configuration.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.kerberos.principal&quot;, &quot;${your_kerberos_principal}&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Optional. You don&#x27;t need to set the keytab if you use kerberos ticket cache.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conf.set(&quot;fs.gravitino.client.kerberos.keytabFilePath&quot;, &quot;${your_kerberos_keytab}&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Path filesetPath = new Path(&quot;gvfs://fileset/test_catalog/test_schema/test_fileset_1&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FileSystem fs = filesetPath.getFileSystem(conf);</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_J_tx" id="2-managing-files-of-fileset-with-python-gvfs">2. Managing files of Fileset with Python GVFS<a class="hash-link" aria-label="Direct link to 2. Managing files of Fileset with Python GVFS" title="Direct link to 2. Managing files of Fileset with Python GVFS" href="/docs/next/how-to-use-gvfs#2-managing-files-of-fileset-with-python-gvfs">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_J_tx" id="prerequisites-1">Prerequisites<a class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" href="/docs/next/how-to-use-gvfs#prerequisites-1">​</a></h3>
<ul>
<li>A Hadoop environment with HDFS or other Hadoop Compatible File System (HCFS) implementations like S3, GCS, etc. GVFS has been tested against Hadoop 3.3.1. It is recommended to use Hadoop 3.3.1 or later, but it should work with Hadoop 2.x. Please create an <a href="https://www.github.com/apache/gravitino/issues" target="_blank" rel="noopener noreferrer">issue</a>
if you find any compatibility issues.</li>
<li>Python version &gt;= 3.8. It has been tested GVFS works well with Python 3.8 and Python 3.9.
Your Python version should be at least higher than Python 3.8.</li>
</ul>
<p>Attention: If you are using macOS or Windows operating system, you need to follow the steps in the
<a href="https://github.com/apache/hadoop/blob/trunk/BUILDING.txt" target="_blank" rel="noopener noreferrer">Hadoop official building documentation</a>(Need match your Hadoop version)
to recompile the native libraries like <code>libhdfs</code> and others, and completely replace the files in <code>${HADOOP_HOME}/lib/native</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_J_tx" id="configuration-1">Configuration<a class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration" href="/docs/next/how-to-use-gvfs#configuration-1">​</a></h3>
<table><thead><tr><th>Configuration item</th><th>Description</th><th>Default value</th><th>Required</th><th>Since version</th></tr></thead><tbody><tr><td><code>server_uri</code></td><td>The Gravitino server uri, e.g. <code>http://localhost:8090</code>.</td><td>(none)</td><td>Yes</td><td>0.6.0-incubating</td></tr><tr><td><code>metalake_name</code></td><td>The metalake name which the fileset belongs to.</td><td>(none)</td><td>Yes</td><td>0.6.0-incubating</td></tr><tr><td><code>cache_size</code></td><td>The cache capacity of the Gravitino Virtual File System.</td><td><code>20</code></td><td>No</td><td>0.6.0-incubating</td></tr><tr><td><code>cache_expired_time</code></td><td>The value of time that the cache expires after accessing in the Gravitino Virtual File System. The value is in <code>seconds</code>.</td><td><code>3600</code></td><td>No</td><td>0.6.0-incubating</td></tr><tr><td><code>auth_type</code></td><td>The auth type to initialize the Gravitino client to use with the Gravitino Virtual File System. Currently supports <code>simple</code> and <code>oauth2</code> auth types.</td><td><code>simple</code></td><td>No</td><td>0.6.0-incubating</td></tr><tr><td><code>oauth2_server_uri</code></td><td>The auth server URI for the Gravitino client when using <code>oauth2</code> auth type.</td><td>(none)</td><td>Yes if you use <code>oauth2</code> auth type</td><td>0.7.0-incubating</td></tr><tr><td><code>oauth2_credential</code></td><td>The auth credential for the Gravitino client when using <code>oauth2</code> auth type.</td><td>(none)</td><td>Yes if you use <code>oauth2</code> auth type</td><td>0.7.0-incubating</td></tr><tr><td><code>oauth2_path</code></td><td>The auth server path for the Gravitino client when using <code>oauth2</code> auth type. Please remove the first slash <code>/</code> from the path, for example <code>oauth/token</code>.</td><td>(none)</td><td>Yes if you use <code>oauth2</code> auth type</td><td>0.7.0-incubating</td></tr><tr><td><code>oauth2_scope</code></td><td>The auth scope for the Gravitino client when using <code>oauth2</code> auth type with the Gravitino Virtual File System.</td><td>(none)</td><td>Yes if you use <code>oauth2</code> auth type</td><td>0.7.0-incubating</td></tr><tr><td><code>credential_expiration_ratio</code></td><td>The ratio of expiration time for credential from Gravitino. This is used in the cases where Gravitino Hadoop catalogs have enable credential vending. if the expiration time of credential fetched from Gravitino is 1 hour, GVFS client will try to refresh the credential in 1 * 0.9 = 0.5 hour.</td><td>0.5</td><td>No</td><td>0.8.0-incubating</td></tr><tr><td><code>current_location_name</code></td><td>The configuration used to select the location of the fileset. If this configuration is not set, the value of environment variable configured by <code>current_location_name_env_var</code> will be checked. If neither is set, the value of fileset property <code>default-location-name</code> will be used as the location name.</td><td>the value of fileset property <code>default-location-name</code></td><td>No</td><td>0.9.0-incubating</td></tr><tr><td><code>current_location_name_env_var</code></td><td>The environment variable name to get the current location name.</td><td><code>CURRENT_LOCATION_NAME</code></td><td>No</td><td>0.9.0-incubating</td></tr><tr><td><code>operations_class</code></td><td>The operations class to provide the FS operations for the Gravitino Virtual File System. Users can extends <code>BaseGVFSOperations</code> to implement their own operations and configure the class name in this conf to use custom FS operations.</td><td><code>gravitino.filesystem.gvfs_default_operations.DefaultGVFSOperations</code></td><td>No</td><td>0.9.0-incubating</td></tr><tr><td><code>hook_class</code></td><td>The hook class to inject into the Gravitino Virtual File System. Users can implement their own <code>GravitinoVirtualFileSystemHook</code> and configure the class name in this conf to inject custom code.</td><td><code>gravitino.filesystem.gvfs_hook.NoOpHook</code></td><td>No</td><td>0.9.0-incubating</td></tr><tr><td><code>client_request_header_</code></td><td>The configuration key prefix for the Gravitino client request header. You can set the request header for the Gravitino client.</td><td>(none)</td><td>No</td><td>0.9.0-incubating</td></tr><tr><td><code>enable_credential_vending</code></td><td>Whether to enable credential vending for the Gravitino Virtual File System.</td><td><code>false</code></td><td>No</td><td>0.9.0-incubating</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_J_tx" id="configurations-for-s3-gcs-oss-and-azure-blob-storage-fileset">Configurations for S3, GCS, OSS and Azure Blob storage fileset<a class="hash-link" aria-label="Direct link to Configurations for S3, GCS, OSS and Azure Blob storage fileset" title="Direct link to Configurations for S3, GCS, OSS and Azure Blob storage fileset" href="/docs/next/how-to-use-gvfs#configurations-for-s3-gcs-oss-and-azure-blob-storage-fileset">​</a></h4>
<p>Please see the cloud-storage-specific configurations <a href="/docs/next/hadoop-catalog-with-gcs#using-the-gvfs-python-client-to-access-a-fileset">GCS GVFS Java client configurations</a>, <a href="/docs/next/hadoop-catalog-with-s3#using-the-gvfs-python-client-to-access-a-fileset">S3 GVFS Java client configurations</a>, <a href="/docs/next/hadoop-catalog-with-oss#using-the-gvfs-python-client-to-access-a-fileset">OSS GVFS Java client configurations</a> and <a href="/docs/next/hadoop-catalog-with-adls#using-the-gvfs-python-client-to-access-a-fileset">Azure Blob Storage GVFS Java client configurations</a> for more details.</p>
<div class="theme-admonition theme-admonition-note admonition_eK1l alert alert--secondary"><div class="admonitionHeading_wt4v"><span class="admonitionIcon_xQj2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_xFN2"><p>Gravitino python client does not support <a href="/docs/next/hadoop-catalog#how-to-custom-your-own-hcfs-file-system-fileset">customized file systems</a> defined by users due to the limit of <code>fsspec</code> library.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_J_tx" id="usage-examples-1">Usage examples<a class="hash-link" aria-label="Direct link to Usage examples" title="Direct link to Usage examples" href="/docs/next/how-to-use-gvfs#usage-examples-1">​</a></h3>
<div class="theme-admonition theme-admonition-note admonition_eK1l alert alert--secondary"><div class="admonitionHeading_wt4v"><span class="admonitionIcon_xQj2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_xFN2"><p>For fileset with multiple locations, you can specify which location to access using one of these methods (in priority order):</p><ol>
<li>Set the <code>current_location_name</code> configuration property</li>
<li>Export the environment variable <code>CURRENT_LOCATION_NAME</code></li>
<li>If neither is specified, the system will use the value of <code>default-location-name</code> from the fileset properties</li>
</ol></div></div>
<ol>
<li>
<p>Make sure to obtain the Gravitino library.
You can get it by <a href="https://pip.pypa.io/en/stable/installation/" target="_blank" rel="noopener noreferrer">pip</a>:</p>
<div class="language-shell codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-shell codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip install apache-gravitino</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Configuring the Hadoop environment.
You should ensure that the Python client has Kerberos authentication information and
configure Hadoop environments in the system environment:</p>
<div class="language-shell codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-shell codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kinit kerberos</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kinit -kt /tmp/xxx.keytab xxx@HADOOP.COM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Or you can configure kerberos information in the Hadoop `core-site.xml` file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;name&gt;hadoop.security.authentication&lt;/name&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;value&gt;kerberos&lt;/value&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;name&gt;hadoop.client.kerberos.principal&lt;/name&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;value&gt;xxx@HADOOP.COM&lt;/value&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;name&gt;hadoop.client.keytab.file&lt;/name&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;value&gt;/tmp/xxx.keytab&lt;/value&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!-- Optional, if you want to access a specific location --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;name&gt;fs.gravitino.current.location.name&lt;/name&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;value&gt;location-name&lt;/value&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Configure Hadoop env in Linux</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export HADOOP_HOME=${YOUR_HADOOP_PATH}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export HADOOP_CONF_DIR=${YOUR_HADOOP_PATH}/etc/hadoop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export CLASSPATH=`$HADOOP_HOME/bin/hdfs classpath --glob`</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_J_tx" id="via-fsspec-style-interface">Via fsspec-style interface<a class="hash-link" aria-label="Direct link to Via fsspec-style interface" title="Direct link to Via fsspec-style interface" href="/docs/next/how-to-use-gvfs#via-fsspec-style-interface">​</a></h4>
<p>You can use the fsspec-style interface to perform operations on the fileset files.</p>
<p>For example:</p>
<div class="language-python codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-python codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> gravitino </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> gvfs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># init the gvfs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gvfs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GravitinoVirtualFileSystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   server_uri</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://localhost:8090&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   metalake_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test_metalake&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># set the location name if you want to access a specific location</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   options</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;current_location_name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;the_location_name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># list file infos under the fileset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ls</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># get file info under the fileset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">info</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir/test.parquet&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># check a file or a directory whether exists</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">exists</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># write something into a file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">open</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir/test.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;wb&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> output_stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    output_stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">b&quot;hello world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># append something into a file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">open</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir/test.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ab&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> append_stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    append_stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">b&quot;hello world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># read something from a file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">open</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir/test.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;rb&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> input_stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    input_stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># copy a file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">cp_file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path1</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir/test.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           path2</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir/test-1.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># delete a file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">rm_file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/ttt/test-1.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># two methods to create a directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">makedirs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir_2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">mkdir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir_3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># delete a file or a directory recursively</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">rm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir_2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> recursive</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># delete a directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">rmdir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir_2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># move a file or a directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">mv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path1</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/test-1.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      path2</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/sub_dir/test-2.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># get the content of a file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">cat_file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/test-1.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># copy a remote file to local</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get_file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">rpath</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/test-1.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            lpath</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/tmp/local-file-1.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_J_tx" id="integrating-with-third-party-python-libraries">Integrating with Third-party Python libraries<a class="hash-link" aria-label="Direct link to Integrating with Third-party Python libraries" title="Direct link to Integrating with Third-party Python libraries" href="/docs/next/how-to-use-gvfs#integrating-with-third-party-python-libraries">​</a></h4>
<p>You can also perform operations on the files or directories managed by fileset
integrating with some Third-party Python libraries which support fsspec compatible filesystems.</p>
<p>For example:</p>
<ol>
<li>Integrating with <a href="https://pandas.pydata.org/docs/reference/io.html" target="_blank" rel="noopener noreferrer">Pandas</a>(2.0.3).</li>
</ol>
<div class="language-python codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-python codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> gravitino </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> gvfs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> pandas </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> pd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Name&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;A&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;B&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;C&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;D&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;ID&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">21</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">19</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">18</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">storage_options </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;server_uri&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;http://localhost:8090&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;metalake_name&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;test_metalake&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># save data to a parquet file under the fileset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">to_parquet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/test.parquet&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> storage_options</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">storage_options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># read data from a parquet file under the fileset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">read_parquet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/test.parquet&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     storage_options</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">storage_options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># save data to a csv file under the fileset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">to_csv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/test.csv&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> storage_options</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">storage_options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># save data from a csv file under the fileset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">df </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">read_csv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/test.csv&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> storage_options</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">storage_options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">df</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Integrating with <a href="https://arrow.apache.org/docs/python/filesystems.html" target="_blank" rel="noopener noreferrer">PyArrow</a>(15.0.2).</li>
</ol>
<div class="language-python codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-python codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> gravitino </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> gvfs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> pyarrow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dataset </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> dt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> pyarrow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">parquet </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> pq</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gvfs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GravitinoVirtualFileSystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    server_uri</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://localhost:8090&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    metalake_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test_metalake&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># set the location name if you want to access a specific location</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    options</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;current_location_name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;the_location_name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># read a parquet file as arrow dataset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">arrow_dataset </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> dt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dataset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/test.parquet&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> filesystem</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># read a parquet file as arrow parquet table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">arrow_table </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">read_table</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/test.parquet&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> filesystem</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Integrating with <a href="https://docs.ray.io/en/latest/data/loading-data.html#loading-data" target="_blank" rel="noopener noreferrer">Ray</a>(2.10.0).</li>
</ol>
<div class="language-python codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-python codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> gravitino </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> gvfs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> ray</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gvfs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GravitinoVirtualFileSystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    server_uri</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://localhost:8090&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    metalake_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test_metalake&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># set the location name if you want to access a specific location</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    options</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;current_location_name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;the_location_name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># read a parquet file as ray dataset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">read_parquet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/tmp_fileset/test.parquet&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Integrating with <a href="https://docs.llamaindex.ai/en/stable/module_guides/loading/simpledirectoryreader/#support-for-external-filesystems" target="_blank" rel="noopener noreferrer">LlamaIndex</a>(0.10.40).</li>
</ol>
<div class="language-python codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-python codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> gravitino </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> gvfs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> llama_index</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">core </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> SimpleDirectoryReader</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gvfs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GravitinoVirtualFileSystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   server_uri</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">server_uri</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   metalake_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">metalake_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># set the location name if you want to access a specific location</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   options</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;current_location_name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;the_location_name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># read all document files like csv files under the fileset sub dir</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">reader </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> SimpleDirectoryReader</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    input_dir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;fileset/fileset_catalog/tmp/tmp_fileset/sub_dir&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    recursive</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># recursively searches all subdirectories</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">documents </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reader</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">load_data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">documents</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_J_tx" id="authentication-1">Authentication<a class="hash-link" aria-label="Direct link to Authentication" title="Direct link to Authentication" href="/docs/next/how-to-use-gvfs#authentication-1">​</a></h3>
<p>Currently, Gravitino Virtual File System in Python supports two kinds of authentication types to access Gravitino server: <code>simple</code> and <code>oauth2</code>.</p>
<p>The type of <code>simple</code> is the default authentication type in Gravitino Virtual File System in Python.</p>
<h4 class="anchor anchorWithStickyNavbar_J_tx" id="how-to-use-authentication-1">How to use authentication<a class="hash-link" aria-label="Direct link to How to use authentication" title="Direct link to How to use authentication" href="/docs/next/how-to-use-gvfs#how-to-use-authentication-1">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_J_tx" id="using-simple-authentication-1">Using <code>simple</code> authentication<a class="hash-link" aria-label="Direct link to using-simple-authentication-1" title="Direct link to using-simple-authentication-1" href="/docs/next/how-to-use-gvfs#using-simple-authentication-1">​</a></h5>
<p>First, make sure that your Gravitino server is also configured to use the <code>simple</code> authentication mode.</p>
<p>Then, you can configure the authentication like this:</p>
<div class="language-python codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-python codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> gravitino </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> gvfs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">options </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;auth_type&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;simple&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gvfs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GravitinoVirtualFileSystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">server_uri</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://localhost:8090&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> metalake_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test_metalake&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> options</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ls</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/test_fileset&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_J_tx" id="using-oauth-authentication-1">Using <code>OAuth</code> authentication<a class="hash-link" aria-label="Direct link to using-oauth-authentication-1" title="Direct link to using-oauth-authentication-1" href="/docs/next/how-to-use-gvfs#using-oauth-authentication-1">​</a></h5>
<p>First, make sure that your Gravitino server is also configured to use the <code>oauth2</code> authentication mode,
and you have an OAuth server to fetch the token: <a href="/docs/next/security/security">Security</a>.</p>
<p>Then, you can configure the authentication like this:</p>
<div class="language-python codeBlockContainer_XLLM theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_uwMo"><pre tabindex="0" class="prism-code language-python codeBlock_E3PG thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_Mwyt"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> gravitino </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> gvfs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">options </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    GVFSConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AUTH_TYPE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> GVFSConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">OAUTH2_AUTH_TYPE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    GVFSConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">OAUTH2_SERVER_URI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://127.0.0.1:1082&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    GVFSConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">OAUTH2_CREDENTIAL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;xx:xx&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    GVFSConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">OAUTH2_SCOPE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    GVFSConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">OAUTH2_PATH</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;token/test&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gvfs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GravitinoVirtualFileSystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">server_uri</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://localhost:8090&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> metalake_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test_metalake&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> options</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ls</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gvfs://fileset/fileset_catalog/tmp/test_fileset&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup_JtQh"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_GAxi" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_bDb5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hvzS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div class="row"><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/gravitino-site/tree/main/docs/how-to-use-gvfs.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_ibpd" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_xDDx"></div></div></footer></div></div></article><div class="row"><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/manage-fileset-metadata-using-gravitino"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Manage fileset metadata</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/manage-massaging-metadata-using-gravitino"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Manage messaging metadata</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_P6pj thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#introduction">Introduction</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#1-managing-files-of-fileset-with-java-gvfs">1. Managing files of Fileset with Java GVFS</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#prerequisites">Prerequisites</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#configuration">Configuration</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#usage-examples">Usage examples</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#authentication">Authentication</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#2-managing-files-of-fileset-with-python-gvfs">2. Managing files of Fileset with Python GVFS</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#prerequisites-1">Prerequisites</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#configuration-1">Configuration</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#usage-examples-1">Usage examples</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/next/how-to-use-gvfs#authentication-1">Authentication</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"><div>
      <p>
        Copyright © 2025 The Apache Software Foundation, Licensed under the Apache License, Version 2.0. <br>
        Apache Gravitino, the names of other Apache projects, and the ASF logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.
      </p>
      </div></div></div></div></footer></div>
</body>
</html>