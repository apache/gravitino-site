<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.0.0 docs-doc-page docs-doc-id-manage-statistics-in-gravitino" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Manage statistics in Gravitino | Apache Gravitino</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gravitino.apache.org/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://gravitino.apache.org/img/social-card.png"><meta data-rh="true" property="og:url" content="https://gravitino.apache.org/docs/1.0.0/manage-statistics-in-gravitino"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.0.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.0.0"><meta data-rh="true" name="docsearch:version" content="1.0.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.0.0"><meta data-rh="true" property="og:title" content="Manage statistics in Gravitino | Apache Gravitino"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gravitino.apache.org/docs/1.0.0/manage-statistics-in-gravitino"><link data-rh="true" rel="alternate" href="https://gravitino.apache.org/docs/1.0.0/manage-statistics-in-gravitino" hreflang="en"><link data-rh="true" rel="alternate" href="https://gravitino.apache.org/docs/1.0.0/manage-statistics-in-gravitino" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Gravitino RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Gravitino Atom Feed">









<script src="/js/matomo.js" async></script><link rel="stylesheet" href="/assets/css/styles.ecc19b7f.css">
<script src="/assets/js/runtime~main.3b707321.js" defer="defer"></script>
<script src="/assets/js/main.c94de5ad.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_deSZ" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Logo" class="themedComponent_QZ3t themedComponent--light_Y46D"><img src="/img/logo.svg" alt="Logo" class="themedComponent_QZ3t themedComponent--dark_PLWD"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Apache Gravitino</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/contrib">Contributing</a><a class="navbar__item navbar__link" href="/downloads">Downloads</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/1.0.0/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/docs/1.0.0/manage-statistics-in-gravitino">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li><li><a href="https://github.com/apache/gravitino/blob/main/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="dropdown__link">Code of Conduct</a></li></ul></div><a href="https://github.com/apache/gravitino" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbarSearchContainer_vCe2"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_cWIH"><div class="docsWrapper_P_60"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_o_OJ" type="button"></button><div class="docRoot_feSq"><aside class="theme-doc-sidebar-container docSidebarContainer_sTQI"><div class="sidebarViewport_rB8v"><div class="sidebar_mhZE"><div class="tw"><div class="relative my-2 px-2"><button class="border-none relative w-full cursor-default rounded-md bg-white dark:bg-[#21222b] dark:text-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 sm:text-sm sm:leading-6" id="headlessui-listbox-button-:R32llaqh:" type="button" aria-haspopup="listbox" aria-expanded="false" data-headlessui-state=""><span class="flex items-center"><span class="ml-3 block truncate">1.0.0</span></span><span class="pointer-events-none absolute inset-y-0 right-0 ml-3 flex items-center pr-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-5 w-5 text-gray-400"><path fill-rule="evenodd" d="M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z" clip-rule="evenodd"></path></svg></span></button></div></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.0.0/">What&#x27;s Apache Gravitino?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.0.0/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/getting-started/index">Getting started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/how-to-install">Install</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.0.0/iceberg-rest-service">Iceberg REST catalog service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.0.0/gravitino-mcp-server">Gravitino MCP server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.0.0/webui">Web UI</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/jdbc-doris-catalog">Catalogs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/trino-connector/index">Trino connector</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/spark-connector/spark-connector">Spark connector</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/flink-connector/flink-connector">Flink connector</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/gravitino-server-config">Server administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/lineage/lineage">Lineage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/security/security">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/how-to-use-the-playground">Gravitino playground</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/1.0.0/manage-metalake-using-gravitino">Programming guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/manage-metalake-using-gravitino">Manage metalake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/manage-relational-metadata-using-gravitino">Manage relational metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/manage-table-partition-using-gravitino">Manage table partition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/table-partitioning-distribution-sort-order-indexes">Table partitioning, distribution, sort ordering and indexes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/expression">Expression system</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/manage-fileset-metadata-using-gravitino">Manage fileset metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/how-to-use-gvfs">Use Gravitino Virtual File System with Filesets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/manage-massaging-metadata-using-gravitino">Manage messaging metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/manage-model-metadata-using-gravitino">Manage model metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/manage-tags-in-gravitino">Manage tags in Gravitino</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/manage-jobs-in-gravitino">Manage jobs in Gravitino</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/manage-policies-in-gravitino">Manage policies in Gravitino</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.0.0/manage-statistics-in-gravitino">Manage statistics in Gravitino</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/how-to-use-gravitino-python-client">Use Gravitino Python Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/how-to-use-gravitino-client">Use Apache Gravitino client</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/1.0.0/api/rest/gravitino-rest-api">Gravitino Open API</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="/docs/0.9.1/api/java/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NY1D" tabindex="0">Gravitino Java doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_EU5R"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="/docs/0.9.1/api/python/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NY1D" tabindex="0">Gravitino Python doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_EU5R"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.0/how-to-build">Development guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.0.0/glossary">Apache Gravitino Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_mHbc"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_gAtQ"><div class="docItemContainer_Y6pU"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_YRN5" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_BGoW"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Programming guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Manage statistics in Gravitino</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.0.0</span><div class="tocCollapsible_KxXo theme-doc-toc-mobile tocMobile_s7xu"><button type="button" class="clean-btn tocCollapsibleButton_yck2">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Manage statistics in Gravitino</h1></header><div class="row"><div class="col col--12 markdown"><h2 class="anchor anchorWithStickyNavbar__3An" id="introduction">Introduction<a class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" href="/docs/1.0.0/manage-statistics-in-gravitino#introduction">​</a></h2>
<p>Starting from 1.0.0, Gravitino introduces statistics of tables and partitions.</p>
<p>This document provides a brief introduction using both Gravitino Java client and
REST APIs. If you want to know more about the statistics system in Gravitino, please refer to the
Javadoc and REST API documentation.</p>
<p>Statistics only support the custom statistics, which names must start with <code>custom-</code>.
Gravitino will support built-in statistics in the future.</p>
<p>The query engine uses statistics for cost-based optimization (CBO). Meanwhile, statistics can also
be used for metadata action systems to trigger some jobs, such as compaction, data archiving, etc.</p>
<p>You can create statistics. And then you can create policies based on statistics. Users can analyze the statistics
and policies to decide the next action. For example,
you can create a statistic named <code>custom-tableLastModifiedTime</code> to record the last modified time of a table.
Then you can create a policy to check if the table hasn&#x27;t been modified for a long time, and archive the table data to
cold storage.</p>
<p>Currently, Gravitino doesn&#x27;t handle the computation of the statistics, you need to compute the statistics
and update them to Gravitino. Gravitino can&#x27;t judge the expiration of the statistics,
You need to ensure the statistics are up-to-date.</p>
<h2 class="anchor anchorWithStickyNavbar__3An" id="metadata-object-statistic-operations">Metadata object statistic operations<a class="hash-link" aria-label="Direct link to Metadata object statistic operations" title="Direct link to Metadata object statistic operations" href="/docs/1.0.0/manage-statistics-in-gravitino#metadata-object-statistic-operations">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar__3An" id="update-statistics-of-metadata-objects">Update statistics of metadata objects<a class="hash-link" aria-label="Direct link to Update statistics of metadata objects" title="Direct link to Update statistics of metadata objects" href="/docs/1.0.0/manage-statistics-in-gravitino#update-statistics-of-metadata-objects">​</a></h3>
<p>You can update the statistics of a metadata object by providing the statistics key and value.
Now only table statistics can be updated.</p>
<p>The request path for REST API is <code>/api/metalakes/{metalake}/objects/{metadataObjectType}/{metadataObjectName}/statistics</code>.</p>
<div class="tabs-container tabList_fOL3"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_OgCG tabs__item--active">Shell</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_OgCG">Java</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_tt9C"><div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -X PUT -H &quot;Accept: application/vnd.gravitino.v1+json&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-H &quot;Content-Type: application/json&quot; -d &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;updates&quot; : {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;custom-tableLastModifiedTime&quot;: &quot;20250128&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27; http://localhost:8090/api/metalakes/metalake/objects/table/catalog.schema.table/statistics</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_tt9C" hidden=""><div class="language-java codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-java codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Table table = ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Map&lt;String, StatisticValue&lt;?&gt;&gt; updateStatistics = Maps.newHashMap();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">updateStatistics.put(&quot;custom-k1&quot;, StatisticValues.stringValue(&quot;v1&quot;));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">updateStatistics.put(&quot;custom-k2&quot;, StatisticValues.stringValue(&quot;v2&quot;));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">table.updateStatistics(updateStatistics);</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar__3An" id="list-statistics-of-metadata-objects">List statistics of metadata objects<a class="hash-link" aria-label="Direct link to List statistics of metadata objects" title="Direct link to List statistics of metadata objects" href="/docs/1.0.0/manage-statistics-in-gravitino#list-statistics-of-metadata-objects">​</a></h3>
<p>You can list all the statistics of a metadata object.
Now only table statistics can be listed.</p>
<p>The request path for REST API is <code>/api/metalakes/{metalake}/objects/{metadataObjectType}/{metadataObjectName}/statistics</code>.</p>
<div class="tabs-container tabList_fOL3"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_OgCG tabs__item--active">Shell</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_OgCG">Java</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_tt9C"><div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -X GET -H &quot;Accept: application/vnd.gravitino.v1+json&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> http://localhost:8090/api/metalakes/metalake/objects/table/catalog.schema.table/statistics</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_tt9C" hidden=""><div class="language-java codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-java codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Table table = ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">table.listStatistics();</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar__3An" id="drop-statistics-of-metadata-objects">Drop statistics of metadata objects<a class="hash-link" aria-label="Direct link to Drop statistics of metadata objects" title="Direct link to Drop statistics of metadata objects" href="/docs/1.0.0/manage-statistics-in-gravitino#drop-statistics-of-metadata-objects">​</a></h3>
<p>You can drop the statistics of a metadata object by providing the statistics keys.
Now only table statistics can be dropped.</p>
<p>The request path for REST API is <code>/api/metalakes/{metalake}/objects/{metadataObjectType}/{metadataObjectName}/statistics</code>.</p>
<div class="tabs-container tabList_fOL3"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_OgCG tabs__item--active">Shell</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_OgCG">Java</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_tt9C"><div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -X POST -H &quot;Accept: application/vnd.gravitino.v1+json&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> -H &quot;Content-Type: application/json&quot; -d &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;names&quot;:[&quot;custom-k1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27; http://localhost:8090/api/metalakes/metalake/objects/table/catalog.schema.table/statistics</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_tt9C" hidden=""><div class="language-java codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-java codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Table table = ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;String&gt; statisticsToDrop = Lists.newArrayList(&quot;custom-k1&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">table.dropStatistics(statisticsToDrop);</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar__3An" id="partition-statistics-operations">Partition statistics operations<a class="hash-link" aria-label="Direct link to Partition statistics operations" title="Direct link to Partition statistics operations" href="/docs/1.0.0/manage-statistics-in-gravitino#partition-statistics-operations">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar__3An" id="update-statistics-of-partitions">Update statistics of partitions<a class="hash-link" aria-label="Direct link to Update statistics of partitions" title="Direct link to Update statistics of partitions" href="/docs/1.0.0/manage-statistics-in-gravitino#update-statistics-of-partitions">​</a></h3>
<p>You can update the statistics of a partition by providing the statistics key and value. If the statistics
already exist, it will be updated; otherwise, a new statistic will be created.</p>
<p>The request path for REST API is <code>/api/metalakes/{metalake}/objects/table/{metadataObjectName}/statistics/partitions</code>.</p>
<div class="tabs-container tabList_fOL3"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_OgCG tabs__item--active">Shell</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_OgCG">Java</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_tt9C"><div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -X PUT -H &quot;Accept: application/vnd.gravitino.v1+json&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-H &quot;Content-Type: application/json&quot; -d &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;updates&quot;:[{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;partitionName&quot; : &quot;p0&quot; ,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;statistics&quot; : {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;custom-k1&quot; : &quot;v1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27; http://localhost:8090/api/metalakes/metalake/objects/table/catalog.schema.table/statistics/partitions</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_tt9C" hidden=""><div class="language-java codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-java codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Table table = ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;PartitionStatisticsUpdate&gt; statisticsToUpdate = Lists.newArrayList();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Map&lt;String, StatisticValue&lt;?&gt;&gt; stats = Maps.newHashMap();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">stats.put(&quot;custom-k1&quot;, StatisticValues.stringValue(&quot;v1&quot;));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">stats.put(&quot;custom-k2&quot;, StatisticValues.stringValue(&quot;v2&quot;));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">statisticsToUpdate.add(PartitionStatisticsModification.update(&quot;p1&quot;, stats));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">table.updatePartitionStatistics(statisticsToUpdate);</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar__3An" id="list-statistics-of-partitions">List statistics of partitions<a class="hash-link" aria-label="Direct link to List statistics of partitions" title="Direct link to List statistics of partitions" href="/docs/1.0.0/manage-statistics-in-gravitino#list-statistics-of-partitions">​</a></h3>
<p>You can list the statistics of specified partitions.
You can specify a range of partitions by providing the <code>from</code> and <code>to</code> parameters,
and whether the range is inclusive using <code>fromInclusive</code> and <code>toInclusive</code> parameters.</p>
<p>The request path for REST API is <code>/api/metalakes/{metalake}/objects/table/{metadataObjectName}/statistics/partitions</code>.</p>
<div class="tabs-container tabList_fOL3"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_OgCG tabs__item--active">Shell</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_OgCG">Java</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_tt9C"><div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -X GET -H &quot;Accept: application/vnd.gravitino.v1+json&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &#x27;http://localhost:8090/api/metalakes/metalake/objects/table/catalog.schema.table/statistics/partitions?from=p0&amp;to=p1&amp;fromInclusive=true&amp;toInclusive=false&#x27;</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_tt9C" hidden=""><div class="language-java codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-java codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Table table = ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PartitionRange range = PartitionRange.downTo(&quot;p0&quot;, PartitionRange.BoundType.CLOSED);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">table.listPartitionStatistics(range);</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar__3An" id="drop-statistics-of-partitions">Drop statistics of partitions<a class="hash-link" aria-label="Direct link to Drop statistics of partitions" title="Direct link to Drop statistics of partitions" href="/docs/1.0.0/manage-statistics-in-gravitino#drop-statistics-of-partitions">​</a></h3>
<p>You can drop the statistics of specified partitions by providing the statistics keys.</p>
<p>The request path for REST API is <code>/api/metalakes/{metalake}/objects/table/{metadataObjectName}/statistics/partitions</code>.</p>
<div class="tabs-container tabList_fOL3"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_OgCG tabs__item--active">Shell</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_OgCG">Java</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_tt9C"><div class="language-shell codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-shell codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -X POST -H &quot;Accept: application/vnd.gravitino.v1+json&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-H &quot;Content-Type: application/json&quot; -d &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;drops&quot; : [{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;partitionName&quot; : &quot;p0&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;statisticNames&quot;: [&quot;custom-k1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27; http://localhost:8090/api/metalakes/metalake/objects/table/catalog.schema.table/statistics/partitions </span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_tt9C" hidden=""><div class="language-java codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-java codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;PartitionStatisticsDrop&gt; statisticsToDrop = Lists.newArrayList();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">statisticsToDrop.add(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    PartitionStatisticsModification.drop(&quot;p0&quot;, Lists.newArrayList(&quot;custom-k1&quot;)));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">table.dropPartitionStatistics(statisticsToDrop);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar__3An" id="server-configuration">Server configuration<a class="hash-link" aria-label="Direct link to Server configuration" title="Direct link to Server configuration" href="/docs/1.0.0/manage-statistics-in-gravitino#server-configuration">​</a></h3>
<table><thead><tr><th>Configuration item</th><th>Description</th><th>Default value</th><th>Required</th><th>Since version</th></tr></thead><tbody><tr><td><code>gravitino.stats.partition.storageFactoryClass</code></td><td>The storage factory class for partition statistics, which is used to store partition statistics in the different storage. The <code>org.apache.gravitino.stats.storage.MemoryPartitionStatsStorageFactory</code>  can only be used for testing.</td><td><code>org.apache.gravitino.stats.storage.LancePartitionStatisticStorageFactory</code></td><td>No</td><td>1.0.0</td></tr></tbody></table>
<p>If you use <a href="https://lancedb.github.io/lance/" target="_blank" rel="noopener noreferrer">Lance</a> as the partition statistics storage, you can set the options below, if you have other lance storage options, you can pass it by adding prefix <code>gravitino.stats.partition.storageOption.</code>.
For example, if you set an extra property <code>foo</code> to <code>bar</code> for Lance storage option, you can add a configuration item <code>gravitino.stats.partition.storageOption.foo</code> with value <code>bar</code>.</p>
<p>For Lance remote storage, you can refer to the document <a href="https://lancedb.github.io/lance/usage/storage/" target="_blank" rel="noopener noreferrer">here</a>.</p>
<table><thead><tr><th>Configuration item</th><th>Description</th><th>Default value</th><th>Required</th><th>Since version</th></tr></thead><tbody><tr><td><code>gravitino.stats.partition.storageOption.location</code></td><td>The location of Lance files</td><td><code>${GRAVITINO_HOME}/data/lance</code></td><td>No</td><td>1.0.0</td></tr><tr><td><code>gravitino.stats.partition.storageOption.maxRowsPerFile</code></td><td>The maximum rows per file</td><td><code>1000000</code></td><td>No</td><td>1.0.0</td></tr><tr><td><code>gravitino.stats.partition.storageOption.maxBytesPerFile</code></td><td>The maximum bytes per file</td><td><code>104857600</code></td><td>No</td><td>1.0.0</td></tr><tr><td><code>gravitino.stats.partition.storageOption.maxRowsPerGroup</code></td><td>The maximum rows per group</td><td><code>1000000</code></td><td>No</td><td>1.0.0</td></tr><tr><td><code>gravitino.stats.partition.storageOption.readBatchSize</code></td><td>The batch record number when reading</td><td><code>10000</code></td><td>No</td><td>1.0.0</td></tr><tr><td><code>gravitino.stats.partition.storageOption.datasetCacheSize</code></td><td>size of dataset cache for Lance</td><td><code>0</code>, It means we don&#x27;t use the cache</td><td>No</td><td>1.0.0</td></tr><tr><td><code>gravitino.stats.partition.storageOption.metadataFileCacheSizeBytes</code></td><td>The Lance&#x27;s metadata file cache size</td><td><code>102400</code></td><td>No</td><td>1.0.0</td></tr><tr><td><code>gravitino.stats.partition.storageOption.indexCacheSizeBytes</code></td><td>The Lance&#x27;s index cache size</td><td><code>102400</code></td><td>No</td><td>1.0.0</td></tr></tbody></table>
<p>If you have many tables with a small number of partitions, you should set a smaller metadataFileCacheSizeBytes and indexCacheSizeBytes.</p>
<h3 class="anchor anchorWithStickyNavbar__3An" id="implementation-a-custom-partition-storage">Implementation a custom partition storage<a class="hash-link" aria-label="Direct link to Implementation a custom partition storage" title="Direct link to Implementation a custom partition storage" href="/docs/1.0.0/manage-statistics-in-gravitino#implementation-a-custom-partition-storage">​</a></h3>
<p>You can implement a custom partition storage by implementing the interface <code>org.apache.gravitino.stats.storage.PartitionStatisticStorageFactory</code> and
setting the configuration item <code>gravitino.stats.partition.storageFactoryClass</code> to your class name.</p>
<p>For example:</p>
<div class="language-java codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-java codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class MyPartitionStatsStorageFactory implements PartitionStatisticStorageFactory {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public PartitionStatisticStorage create(Map&lt;String, String&gt; options) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // Create your custom PartitionStatsStorage here</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return new MyPartitionStatsStorage(...);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_WW7n theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_JDvy"><pre tabindex="0" class="prism-code language-java codeBlock_ACB_ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_k06n"><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class MyPartitionStatsStorage implements PartitionStatisticStorage {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void close() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // Close your storage here</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void updateStatistics(String metalake, List&lt;MetadataObjectStatisticsUpdate&gt; updates) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // Update partition statistics in your storage here</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public List&lt;PersistedPartitionStatistics&gt; listStatistics(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            String metalake, MetadataObject metadataObject, PartitionRange range) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // List partition statistics from your storage here</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return Maps.newHashMap();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public int dropStatistics(String metalake, List&lt;MetadataObjectStatisticsDrop&gt; drops) {    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // Drop partition statistics from your storage here</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_Fs0h"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ZtRq" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_jb0S"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Zo9d"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div class="row"><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/gravitino-site/tree/main/docs/manage-statistics-in-gravitino.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_IcLb" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_tkxX"></div></div></footer></div></div></article><div class="row"><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/1.0.0/manage-policies-in-gravitino"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Manage policies in Gravitino</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/1.0.0/how-to-use-gravitino-python-client"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Use Gravitino Python Client</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_P9pP thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#introduction">Introduction</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#metadata-object-statistic-operations">Metadata object statistic operations</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#update-statistics-of-metadata-objects">Update statistics of metadata objects</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#list-statistics-of-metadata-objects">List statistics of metadata objects</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#drop-statistics-of-metadata-objects">Drop statistics of metadata objects</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#partition-statistics-operations">Partition statistics operations</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#update-statistics-of-partitions">Update statistics of partitions</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#list-statistics-of-partitions">List statistics of partitions</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#drop-statistics-of-partitions">Drop statistics of partitions</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#server-configuration">Server configuration</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/1.0.0/manage-statistics-in-gravitino#implementation-a-custom-partition-storage">Implementation a custom partition storage</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"><div>
      <p>
        Copyright © 2025 The Apache Software Foundation, Licensed under the Apache License, Version 2.0. <br>
        Apache Gravitino, the names of other Apache projects, and the ASF logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.
      </p>
      </div></div></div></div></footer></div>
</body>
</html>