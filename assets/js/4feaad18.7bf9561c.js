"use strict";(self.webpackChunkapache_website_template=self.webpackChunkapache_website_template||[]).push([[21907],{40132:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>d,contentTitle:()=>c,default:()=>l,frontMatter:()=>s,metadata:()=>o,toc:()=>h});var n=r(13274),t=r(21943);const s={title:"Spark authentication with Gravitino server",slug:"/spark-connector/spark-authentication",keyword:"spark connector authentication oauth2 kerberos",license:"This software is licensed under the Apache License version 2."},c=void 0,o={id:"spark-connector/spark-authentication-with-gravitino",title:"Spark authentication with Gravitino server",description:"Overview",source:"@site/versioned_docs/version-0.9.0-incubating/spark-connector/spark-authentication-with-gravitino.md",sourceDirName:"spark-connector",slug:"/spark-connector/spark-authentication",permalink:"/docs/0.9.0-incubating/spark-connector/spark-authentication",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/gravitino-site/tree/main/docs/spark-connector/spark-authentication-with-gravitino.md",tags:[],version:"0.9.0-incubating",frontMatter:{title:"Spark authentication with Gravitino server",slug:"/spark-connector/spark-authentication",keyword:"spark connector authentication oauth2 kerberos",license:"This software is licensed under the Apache License version 2."},sidebar:"docs",previous:{title:"JDBC",permalink:"/docs/0.9.0-incubating/spark-connector/spark-catalog-jdbc"},next:{title:"Overview",permalink:"/docs/0.9.0-incubating/flink-connector/flink-connector"}},d={},h=[{value:"Overview",id:"overview",level:2},{value:"Simple mode",id:"simple-mode",level:2},{value:"OAuth2 mode",id:"oauth2-mode",level:2},{value:"Kerberos mode",id:"kerberos-mode",level:2}];function a(e){const i={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(i.p,{children:["Spark connector supports ",(0,n.jsx)(i.code,{children:"simple"})," ",(0,n.jsx)(i.code,{children:"oauth2"})," and ",(0,n.jsx)(i.code,{children:"kerberos"})," authentication when accessing Gravitino server."]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Property"}),(0,n.jsx)(i.th,{children:"Type"}),(0,n.jsx)(i.th,{children:"Default Value"}),(0,n.jsx)(i.th,{children:"Description"}),(0,n.jsx)(i.th,{children:"Required"}),(0,n.jsx)(i.th,{children:"Since Version"})]})}),(0,n.jsx)(i.tbody,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"spark.sql.gravitino.authType"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"simple"})}),(0,n.jsxs)(i.td,{children:["The authentication mechanisms when communicating with Gravitino server, supports ",(0,n.jsx)(i.code,{children:"simple"}),", ",(0,n.jsx)(i.code,{children:"oauth2"})," and ",(0,n.jsx)(i.code,{children:"kerberos"}),"."]}),(0,n.jsx)(i.td,{children:"No"}),(0,n.jsx)(i.td,{children:"0.7.0-incubating"})]})})]}),"\n",(0,n.jsx)(i.h2,{id:"simple-mode",children:"Simple mode"}),"\n",(0,n.jsx)(i.p,{children:"In the simple mode, the username originates from Spark, and is obtained using the following sequences:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["The environment variable of ",(0,n.jsx)(i.code,{children:"SPARK_USER"})]}),"\n",(0,n.jsxs)(i.li,{children:["The environment variable of ",(0,n.jsx)(i.code,{children:"HADOOP_USER_NAME"})]}),"\n",(0,n.jsx)(i.li,{children:"The user login in the machine"}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"oauth2-mode",children:"OAuth2 mode"}),"\n",(0,n.jsx)(i.p,{children:"In the OAuth2 mode, you could use the following configuration to fetch an OAuth2 token to access Gravitino server."}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Property"}),(0,n.jsx)(i.th,{children:"Type"}),(0,n.jsx)(i.th,{children:"Default Value"}),(0,n.jsx)(i.th,{children:"Description"}),(0,n.jsx)(i.th,{children:"Required"}),(0,n.jsx)(i.th,{children:"Since Version"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"spark.sql.gravitino.oauth2.serverUri"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"None"}),(0,n.jsx)(i.td,{children:"The OAuth2 server uri address."}),(0,n.jsx)(i.td,{children:"Yes, for OAuth2 mode"}),(0,n.jsx)(i.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"spark.sql.gravitino.oauth2.tokenPath"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"None"}),(0,n.jsx)(i.td,{children:"The path of token interface in OAuth2 server."}),(0,n.jsx)(i.td,{children:"Yes, for OAuth2 mode"}),(0,n.jsx)(i.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"spark.sql.gravitino.oauth2.credential"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"None"}),(0,n.jsx)(i.td,{children:"The credential to request the OAuth2 token."}),(0,n.jsx)(i.td,{children:"Yes, for OAuth2 mode"}),(0,n.jsx)(i.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"spark.sql.gravitino.oauth2.scope"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"None"}),(0,n.jsx)(i.td,{children:"The scope to request the OAuth2 token."}),(0,n.jsx)(i.td,{children:"Yes, for OAuth2 mode"}),(0,n.jsx)(i.td,{children:"0.7.0-incubating"})]})]})]}),"\n",(0,n.jsx)(i.h2,{id:"kerberos-mode",children:"Kerberos mode"}),"\n",(0,n.jsxs)(i.p,{children:["In kerberos mode, you could use the Spark kerberos configuration to fetch a kerberos ticket to access Gravitino server, use ",(0,n.jsx)(i.code,{children:"spark.kerberos.principal"}),", ",(0,n.jsx)(i.code,{children:"spark.kerberos.keytab"})," to specify kerberos principal and keytab."]}),"\n",(0,n.jsxs)(i.p,{children:["The principal of Gravitino server is like ",(0,n.jsx)(i.code,{children:"HTTP/$host@$realm"}),", please keep the ",(0,n.jsx)(i.code,{children:"$host"})," consistent with the host in Gravitino server uri address.\nPlease make sure ",(0,n.jsx)(i.code,{children:"krb5.conf"})," is accessible by Spark, like by specifying the configuration ",(0,n.jsx)(i.code,{children:'spark.driver.extraJavaOptions="-Djava.security.krb5.conf=/xx/krb5.conf"'}),"."]})]})}function l(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}}}]);