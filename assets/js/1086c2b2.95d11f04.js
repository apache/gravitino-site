"use strict";(globalThis.webpackChunkapache_website_template=globalThis.webpackChunkapache_website_template||[]).push([[67477],{84513(e,n,a){a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var i=a(13274),t=a(25709);const s={title:"Helm Chart",slug:"/chart",keyword:"chart",license:"This software is licensed under the Apache License version 2."},l="Install Gravitino on Kubernetes",r={id:"chart",title:"Helm Chart",description:"This Helm chart deploys Apache Gravitino on Kubernetes with customizable configurations.",source:"@site/versioned_docs/version-1.1.0/chart.md",sourceDirName:".",slug:"/chart",permalink:"/docs/1.1.0/chart",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/gravitino-site/tree/main/docs/chart.md",tags:[],version:"1.1.0",frontMatter:{title:"Helm Chart",slug:"/chart",keyword:"chart",license:"This software is licensed under the Apache License version 2."},sidebar:"docs",previous:{title:"How to install Gravitino",permalink:"/docs/1.1.0/how-to-install"},next:{title:"Install Iceberg Rest catalog server on Kubernetes",permalink:"/docs/1.1.0/iceberg-rest-catalog-chart"}},o={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Update Chart Dependency",id:"update-chart-dependency",level:2},{value:"View Chart values",id:"view-chart-values",level:2},{value:"Install Helm Chart",id:"install-helm-chart",level:2},{value:"Deploy with Default Configuration",id:"deploy-with-default-configuration",level:3},{value:"Deploy with Custom Configuration",id:"deploy-with-custom-configuration",level:3},{value:"Deploying Gravitino with MySQL as the Storage Backend",id:"deploying-gravitino-with-mysql-as-the-storage-backend",level:3},{value:"Disable Dynamic Storage Provisioning",id:"disable-dynamic-storage-provisioning",level:4},{value:"Deploy Gravitino using an existed MySQL Database",id:"deploy-gravitino-using-an-existed-mysql-database",level:3},{value:"Uninstall Helm Chart",id:"uninstall-helm-chart",level:2}];function d(e){const n={br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"install-gravitino-on-kubernetes",children:"Install Gravitino on Kubernetes"}),"\n",(0,i.jsx)(n.p,{children:"This Helm chart deploys Apache Gravitino on Kubernetes with customizable configurations."}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Kubernetes 1.29+"}),"\n",(0,i.jsx)(n.li,{children:"Helm 3+"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"update-chart-dependency",children:"Update Chart Dependency"}),"\n",(0,i.jsxs)(n.p,{children:["The Gravitino Helm chart has not yet been released to the helm registry.\nTo proceed, please clone the repository, navigate to the chart directory ",(0,i.jsx)(n.code,{children:"/path/to/gravitino/dev/charts"}),", and execute the Helm dependency update command."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"helm dependency update [CHART]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"view-chart-values",children:"View Chart values"}),"\n",(0,i.jsx)(n.p,{children:"You can customize values.yaml parameters to override chart default settings. Additionally, Gravitino configurations in gravitino.conf can be modified through Helm values.yaml."}),"\n",(0,i.jsx)(n.p,{children:"To display the default values of the Gravitino chart, run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"helm show values [CHART]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"install-helm-chart",children:"Install Helm Chart"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"helm install [RELEASE_NAME] [CHART] [flags]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"deploy-with-default-configuration",children:"Deploy with Default Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Run the following command to deploy Gravitino using the default settings, specify container image versions using --set image.tag=x.y.z (replace x, y, z with the expected version numbers):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"helm upgrade --install gravitino ./gravitino -n gravitino --create-namespace --set image.tag=<x.y.z>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"deploy-with-custom-configuration",children:"Deploy with Custom Configuration"}),"\n",(0,i.jsx)(n.p,{children:"To customize the deployment, use the --set flag to override specific values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"helm upgrade --install gravitino ./gravitino -n gravitino --create-namespace \\\n  --set key1=val1,key2=val2,...\n"})}),"\n",(0,i.jsx)(n.p,{children:"Alternatively, you can provide a custom values.yaml file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"helm upgrade --install gravitino ./gravitino -n gravitino --create-namespace -f /path/to/chart/resources/scenarios/ci-values.yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["Note: ",(0,i.jsx)(n.br,{}),"\n","/path/to/chart/resources/scenarios/ci-values.yaml is an example scenario to deploy."]})}),"\n",(0,i.jsx)(n.h3,{id:"deploying-gravitino-with-mysql-as-the-storage-backend",children:"Deploying Gravitino with MySQL as the Storage Backend"}),"\n",(0,i.jsx)(n.p,{children:"To deploy both Gravitino and MySQL, where MySQL is used as the storage backend, enable the built-in MySQL instance:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"helm upgrade --install gravitino ./gravitino -n gravitino --create-namespace \\\n  --set mysql.enabled=true\n"})}),"\n",(0,i.jsx)(n.h4,{id:"disable-dynamic-storage-provisioning",children:"Disable Dynamic Storage Provisioning"}),"\n",(0,i.jsx)(n.p,{children:'By default, the MySQL PersistentVolumeClaim(PVC) storage class is local-path. To disable dynamic provisioning, set the storage class to "-":'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:'helm upgrade --install gravitino ./gravitino -n gravitino --create-namespace \\\n  --set mysql.enabled=true \\\n  --set global.defaultStorageClass="-"\n'})}),"\n",(0,i.jsx)(n.p,{children:"You must then manually create a PersistentVolume (PV)."}),"\n",(0,i.jsx)(n.h3,{id:"deploy-gravitino-using-an-existed-mysql-database",children:"Deploy Gravitino using an existed MySQL Database"}),"\n",(0,i.jsxs)(n.p,{children:["Ensure you have the following MySQL credentials ready: Username, Password, Database Name. When creating your database, we recommend calling it ",(0,i.jsx)(n.code,{children:"gravitino"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Before deploying Gravitino, initialize your existing MySQL instance and create the necessary tables required for Gravitino to function properly."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"mysql -h database-1.***.***.rds.amazonaws.com -P 3306 -u <YOUR-USERNAME> -p <YOUR-PASSWORD> < schema-0.*.0-mysql.sql\n"})}),"\n",(0,i.jsx)(n.p,{children:"Use Helm to install or upgrade Gravitino, specifying the MySQL connection details."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:'helm upgrade --install gravitino ./gravitino -n gravitino --create-namespace \\\n  --set entity.jdbcUrl="jdbc:mysql://database-1.***.***.rds.amazonaws.com:3306/gravitino" \\\n  --set entity.jdbcDriver="com.mysql.cj.jdbc.Driver" \\\n  --set entity.jdbcUser="admin" \\\n  --set entity.jdbcPassword="admin123"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["Note: ",(0,i.jsx)(n.br,{}),"\n","Replace database-1.",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"."})}),".rds.amazonaws.com with your actual MySQL host. ",(0,i.jsx)(n.br,{}),"\n","Change admin and admin123 to your actual MySQL username and password. ",(0,i.jsx)(n.br,{}),"\n","Ensure the target MySQL database (gravitino) exists before deployment."]})}),"\n",(0,i.jsx)(n.h2,{id:"uninstall-helm-chart",children:"Uninstall Helm Chart"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"helm uninstall [RELEASE_NAME] -n [NAMESPACE]\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);