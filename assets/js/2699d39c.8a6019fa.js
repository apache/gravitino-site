"use strict";(globalThis.webpackChunkapache_website_template=globalThis.webpackChunkapache_website_template||[]).push([[35514],{29973(e,r,i){i.r(r),i.d(r,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>o});var n=i(13274),t=i(76245);const c={title:"Iceberg REST catalog service",slug:"/iceberg-rest-service",keywords:["Iceberg REST catalog"],license:"This software is licensed under the Apache License version 2."},s=void 0,a={id:"iceberg-rest-service",title:"Iceberg REST catalog service",description:"Background",source:"@site/versioned_docs/version-1.1.0/iceberg-rest-service.md",sourceDirName:".",slug:"/iceberg-rest-service",permalink:"/docs/1.1.0/iceberg-rest-service",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/gravitino-site/tree/main/docs/iceberg-rest-service.md",tags:[],version:"1.1.0",frontMatter:{title:"Iceberg REST catalog service",slug:"/iceberg-rest-service",keywords:["Iceberg REST catalog"],license:"This software is licensed under the Apache License version 2."},sidebar:"docs",previous:{title:"Install Iceberg Rest catalog server on Kubernetes",permalink:"/docs/1.1.0/iceberg-rest-catalog-chart"},next:{title:"Lance REST service",permalink:"/docs/1.1.0/lance-rest-service"}},d={},o=[{value:"Background",id:"background",level:2},{value:"Capabilities",id:"capabilities",level:3},{value:"Server management",id:"server-management",level:2},{value:"Apache Gravitino Iceberg REST catalog server configuration",id:"apache-gravitino-iceberg-rest-catalog-server-configuration",level:2},{value:"Configuration to enable Iceberg REST service in Gravitino server.",id:"configuration-to-enable-iceberg-rest-service-in-gravitino-server",level:3},{value:"HTTP server configuration",id:"http-server-configuration",level:3},{value:"Catalog backend configuration",id:"catalog-backend-configuration",level:3},{value:"Hive backend configuration",id:"hive-backend-configuration",level:4},{value:"JDBC backend configuration",id:"jdbc-backend-configuration",level:4},{value:"Custom backend configuration",id:"custom-backend-configuration",level:4},{value:"Multiple catalog backend support",id:"multiple-catalog-backend-support",level:3},{value:"Static catalog configuration provider",id:"static-catalog-configuration-provider",level:4},{value:"Dynamic catalog configuration provider",id:"dynamic-catalog-configuration-provider",level:4},{value:"How to access the specific catalog",id:"how-to-access-the-specific-catalog",level:4},{value:"Security",id:"security",level:3},{value:"OAuth2",id:"oauth2",level:4},{value:"HTTPS",id:"https",level:4},{value:"Backend authentication",id:"backend-authentication",level:4},{value:"Credential vending",id:"credential-vending",level:3},{value:"Access control",id:"access-control",level:3},{value:"Prerequisites",id:"prerequisites",level:4},{value:"How access control works",id:"how-access-control-works",level:4},{value:"Storage",id:"storage",level:3},{value:"S3 configuration",id:"s3-configuration",level:4},{value:"OSS configuration",id:"oss-configuration",level:4},{value:"GCS",id:"gcs",level:4},{value:"ADLS",id:"adls",level:4},{value:"HDFS configuration",id:"hdfs-configuration",level:4},{value:"Other storages",id:"other-storages",level:4},{value:"View support",id:"view-support",level:3},{value:"Other Apache Iceberg catalog properties",id:"other-apache-iceberg-catalog-properties",level:3},{value:"Event listener",id:"event-listener",level:3},{value:"Audit log",id:"audit-log",level:3},{value:"Apache Iceberg metrics store configuration",id:"apache-iceberg-metrics-store-configuration",level:3},{value:"Iceberg table metadata cache configuration",id:"iceberg-table-metadata-cache-configuration",level:3},{value:"Misc configurations",id:"misc-configurations",level:3},{value:"Memory settings",id:"memory-settings",level:3},{value:"Starting the Iceberg REST server",id:"starting-the-iceberg-rest-server",level:2},{value:"Exploring the Apache Gravitino Iceberg REST catalog service with Apache Spark",id:"exploring-the-apache-gravitino-iceberg-rest-catalog-service-with-apache-spark",level:2},{value:"Deploying Apache Spark with Apache Iceberg support",id:"deploying-apache-spark-with-apache-iceberg-support",level:3},{value:"Starting the Apache Spark client with the Apache Iceberg REST catalog",id:"starting-the-apache-spark-client-with-the-apache-iceberg-rest-catalog",level:3},{value:"Exploring Apache Iceberg with Apache Spark SQL",id:"exploring-apache-iceberg-with-apache-spark-sql",level:3},{value:"Exploring the Apache Gravitino Iceberg REST catalog service with Trino",id:"exploring-the-apache-gravitino-iceberg-rest-catalog-service-with-trino",level:2},{value:"Deploying Trino with Apache Iceberg support",id:"deploying-trino-with-apache-iceberg-support",level:3},{value:"Exploring Apache Iceberg with Trino SQL",id:"exploring-apache-iceberg-with-trino-sql",level:3},{value:"Exploring the Apache Gravitino Iceberg REST catalog service with Apache Doris",id:"exploring-the-apache-gravitino-iceberg-rest-catalog-service-with-apache-doris",level:2},{value:"Creating Iceberg catalog in Apache Doris",id:"creating-iceberg-catalog-in-apache-doris",level:3},{value:"Exploring Apache Iceberg with Apache Doris SQL",id:"exploring-apache-iceberg-with-apache-doris-sql",level:3},{value:"Exploring the Apache Gravitino Iceberg REST catalog service with StarRocks",id:"exploring-the-apache-gravitino-iceberg-rest-catalog-service-with-starrocks",level:2},{value:"Creating Iceberg catalog in StarRocks",id:"creating-iceberg-catalog-in-starrocks",level:3},{value:"Exploring Apache Iceberg with StarRocks SQL",id:"exploring-apache-iceberg-with-starrocks-sql",level:3},{value:"Exploring Apache Iceberg with PyIceberg",id:"exploring-apache-iceberg-with-pyiceberg",level:3},{value:"Docker instructions",id:"docker-instructions",level:2},{value:"Quick Start: Enable Access Control for Iceberg REST Server",id:"quick-start-enable-access-control-for-iceberg-rest-server",level:2},{value:"1. Enable Authorization and Dynamic Config Provider",id:"1-enable-authorization-and-dynamic-config-provider",level:3},{value:"2. Create a Metalake",id:"2-create-a-metalake",level:3},{value:"3. Create a Catalog",id:"3-create-a-catalog",level:3},{value:"4. Create a Role and Grant Privileges",id:"4-create-a-role-and-grant-privileges",level:3},{value:"Verify Access is Denied Without Privileges",id:"verify-access-is-denied-without-privileges",level:4},{value:"Grant Role to User",id:"grant-role-to-user",level:4},{value:"Verify Access is Granted With Privileges",id:"verify-access-is-granted-with-privileges",level:4}];function l(e){const r={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h2,{id:"background",children:"Background"}),"\n",(0,n.jsxs)(r.p,{children:["The Apache Gravitino Iceberg REST Server follows the ",(0,n.jsx)(r.a,{href:"https://github.com/apache/iceberg/blob/main/open-api/rest-catalog-open-api.yaml",children:"Apache Iceberg REST API specification"})," and acts as an Iceberg REST catalog server, you could access the Iceberg REST endpoint with the uri ",(0,n.jsx)(r.code,{children:"http://$ip:$port/iceberg/"}),"."]}),"\n",(0,n.jsx)(r.p,{children:"There are some key difference between Gravitino Iceberg REST server and Gravitino server."}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Items"}),(0,n.jsx)(r.th,{children:"Gravitino Iceberg REST server"}),(0,n.jsx)(r.th,{children:"Gravitino server"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Interfaces"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://github.com/apache/iceberg/blob/main/open-api/rest-catalog-open-api.yaml",children:"Iceberg REST API spec"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.a,{href:"https://gravitino.apache.org/docs/latest/api/rest/gravitino-rest-api",children:"Gravitino unified interfaces"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Managed table type"}),(0,n.jsx)(r.td,{children:"Iceberg table only"}),(0,n.jsx)(r.td,{children:"JDBC, Hive, Iceberg, Hudi, Paimon, etc"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"capabilities",children:"Capabilities"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Supports the Apache Iceberg REST API defined in Iceberg 1.10, and supports all namespace and table interfaces. The following interfaces are not implemented yet:","\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"multi table transaction"}),"\n",(0,n.jsx)(r.li,{children:"pagination"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["Works as a catalog proxy, supporting ",(0,n.jsx)(r.code,{children:"Hive"})," and ",(0,n.jsx)(r.code,{children:"JDBC"})," as catalog backend."]}),"\n",(0,n.jsxs)(r.li,{children:["Supports credential vending for ",(0,n.jsx)(r.code,{children:"S3"}),"\u3001",(0,n.jsx)(r.code,{children:"GCS"}),"\u3001",(0,n.jsx)(r.code,{children:"OSS"})," and ",(0,n.jsx)(r.code,{children:"ADLS"}),"."]}),"\n",(0,n.jsxs)(r.li,{children:["Supports different storages like ",(0,n.jsx)(r.code,{children:"S3"}),", ",(0,n.jsx)(r.code,{children:"HDFS"}),", ",(0,n.jsx)(r.code,{children:"OSS"}),", ",(0,n.jsx)(r.code,{children:"GCS"}),", ",(0,n.jsx)(r.code,{children:"ADLS"})," and provides the capability to support other storages."]}),"\n",(0,n.jsx)(r.li,{children:"Supports event listener."}),"\n",(0,n.jsx)(r.li,{children:"Supports Audit log."}),"\n",(0,n.jsx)(r.li,{children:"Supports OAuth2 and HTTPS."}),"\n",(0,n.jsx)(r.li,{children:"Supports access control (when running as an auxiliary service)."}),"\n",(0,n.jsx)(r.li,{children:"Provides a pluggable metrics store interface to store and delete Iceberg metrics."}),"\n",(0,n.jsx)(r.li,{children:"Supports table metadata cache."}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"server-management",children:"Server management"}),"\n",(0,n.jsx)(r.p,{children:"There are three deployment scenarios for Gravitino Iceberg REST server:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["A standalone server in a standalone Gravitino Iceberg REST server package, the classpath is ",(0,n.jsx)(r.code,{children:"libs"}),"."]}),"\n",(0,n.jsxs)(r.li,{children:["A standalone server in the Gravitino server package, the classpath is ",(0,n.jsx)(r.code,{children:"iceberg-rest-server/libs"}),"."]}),"\n",(0,n.jsxs)(r.li,{children:["An auxiliary service embedded in the Gravitino server, the classpath is ",(0,n.jsx)(r.code,{children:"iceberg-rest-server/libs"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(r.p,{children:["For detailed instructions on how to build and install the Gravitino server package, please refer to ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/how-to-build",children:"How to build"})," and ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/how-to-install",children:"How to install"}),". To build the Gravitino Iceberg REST server package, use the command ",(0,n.jsx)(r.code,{children:"./gradlew compileIcebergRESTServer -x test"}),". Alternatively, to create the corresponding compressed package in the distribution directory, use ",(0,n.jsx)(r.code,{children:"./gradlew assembleIcebergRESTServer -x test"}),". The Gravitino Iceberg REST server package includes the following files:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:"|\u2500\u2500 ...\n\u2514\u2500\u2500 distribution/gravitino-iceberg-rest-server\n    |\u2500\u2500 bin/\n    |   \u2514\u2500\u2500 gravitino-iceberg-rest-server.sh    # Gravitino Iceberg REST server Launching scripts.\n    |\u2500\u2500 conf/                                   # All configurations for Gravitino Iceberg REST server.\n    |   \u251c\u2500\u2500 gravitino-iceberg-rest-server.conf  # Gravitino Iceberg REST server configuration.\n    |   \u251c\u2500\u2500 gravitino-env.sh                    # Environment variables, etc., JAVA_HOME, GRAVITINO_HOME, and more.\n    |   \u2514\u2500\u2500 log4j2.properties                   # log4j configuration for the Gravitino Iceberg REST server.\n    |   \u2514\u2500\u2500 hdfs-site.xml & core-site.xml       # HDFS configuration files.\n    |\u2500\u2500 libs/                                   # Gravitino Iceberg REST server dependencies libraries.\n    |\u2500\u2500 logs/                                   # Gravitino Iceberg REST server logs. Automatically created after the server starts.\n"})}),"\n",(0,n.jsx)(r.h2,{id:"apache-gravitino-iceberg-rest-catalog-server-configuration",children:"Apache Gravitino Iceberg REST catalog server configuration"}),"\n",(0,n.jsxs)(r.p,{children:["There are distinct configuration files for standalone and auxiliary server: ",(0,n.jsx)(r.code,{children:"gravitino-iceberg-rest-server.conf"})," is used for the standalone server, while ",(0,n.jsx)(r.code,{children:"gravitino.conf"})," is for the auxiliary server. Although the configuration files differ, the configuration items remain the same."]}),"\n",(0,n.jsxs)(r.p,{children:["Starting with version ",(0,n.jsx)(r.code,{children:"0.6.0-incubating"}),", the prefix ",(0,n.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest."})," for auxiliary server configurations has been deprecated. If both ",(0,n.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.key"})," and ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.key"})," are present, the latter will take precedence. The configurations listed below use the ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest."})," prefix."]}),"\n",(0,n.jsx)(r.h3,{id:"configuration-to-enable-iceberg-rest-service-in-gravitino-server",children:"Configuration to enable Iceberg REST service in Gravitino server."}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.auxService.names"})}),(0,n.jsxs)(r.td,{children:["The auxiliary service name of the Gravitino Iceberg REST catalog service. Use ",(0,n.jsx)(r.strong,{children:(0,n.jsx)(r.code,{children:"iceberg-rest"})}),"."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.classpath"})}),(0,n.jsxs)(r.td,{children:["The classpath of the Gravitino Iceberg REST catalog service; includes the directory containing jars and configuration. It supports both absolute and relative paths, for example, ",(0,n.jsx)(r.code,{children:"iceberg-rest-server/libs, iceberg-rest-server/conf"})]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.2.0"})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["Please note that, it only takes affect in ",(0,n.jsx)(r.code,{children:"gravitino.conf"}),", you don't need to specify the above configurations if start as a standalone server."]}),"\n",(0,n.jsx)(r.h3,{id:"http-server-configuration",children:"HTTP server configuration"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.host"})}),(0,n.jsx)(r.td,{children:"The host of the Gravitino Iceberg REST catalog service."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"0.0.0.0"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.httpPort"})}),(0,n.jsx)(r.td,{children:"The port of the Gravitino Iceberg REST catalog service."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"9001"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.minThreads"})}),(0,n.jsxs)(r.td,{children:["The minimum number of threads in the thread pool used by the Jetty web server. ",(0,n.jsx)(r.code,{children:"minThreads"})," is 8 if the value is less than 8."]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Math.max(Math.min(Runtime.getRuntime().availableProcessors() * 2, 100), 8)"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.maxThreads"})}),(0,n.jsxs)(r.td,{children:["The maximum number of threads in the thread pool used by the Jetty web server. ",(0,n.jsx)(r.code,{children:"maxThreads"})," is 8 if the value is less than 8, and ",(0,n.jsx)(r.code,{children:"maxThreads"})," must be greater than or equal to ",(0,n.jsx)(r.code,{children:"minThreads"}),"."]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Math.max(Runtime.getRuntime().availableProcessors() * 4, 400)"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.threadPoolWorkQueueSize"})}),(0,n.jsx)(r.td,{children:"The size of the queue in the thread pool used by Gravitino Iceberg REST catalog service."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"100"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.stopTimeout"})}),(0,n.jsxs)(r.td,{children:["The amount of time in ms for the Gravitino Iceberg REST catalog service to stop gracefully. For more information, see ",(0,n.jsx)(r.code,{children:"org.eclipse.jetty.server.Server#setStopTimeout"}),"."]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"30000"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.idleTimeout"})}),(0,n.jsx)(r.td,{children:"The timeout in ms of idle connections."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"30000"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.requestHeaderSize"})}),(0,n.jsx)(r.td,{children:"The maximum size of an HTTP request."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"131072"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.responseHeaderSize"})}),(0,n.jsx)(r.td,{children:"The maximum size of an HTTP response."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"131072"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.customFilters"})}),(0,n.jsx)(r.td,{children:"Comma-separated list of filter class names to apply to the APIs."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.4.0"})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["The filter in ",(0,n.jsx)(r.code,{children:"customFilters"})," should be a standard javax servlet filter.\nYou can also specify filter parameters by setting configuration entries in the style ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.<class name of filter>.param.<param name>=<value>"}),"."]}),"\n",(0,n.jsx)(r.h3,{id:"catalog-backend-configuration",children:"Catalog backend configuration"}),"\n",(0,n.jsx)(r.admonition,{type:"info",children:(0,n.jsx)(r.p,{children:"The Gravitino Iceberg REST catalog service uses the memory catalog backend by default. You can specify a Hive or JDBC catalog backend for production environment."})}),"\n",(0,n.jsx)(r.h4,{id:"hive-backend-configuration",children:"Hive backend configuration"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.catalog-backend"})}),(0,n.jsxs)(r.td,{children:["The Catalog backend of the Gravitino Iceberg REST catalog service. Use the value ",(0,n.jsx)(r.strong,{children:(0,n.jsx)(r.code,{children:"hive"})})," for the Hive catalog backend."]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"memory"})}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.uri"})}),(0,n.jsxs)(r.td,{children:["The Hive metadata address, such as ",(0,n.jsx)(r.code,{children:"thrift://127.0.0.1:9083"}),"."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.warehouse"})}),(0,n.jsxs)(r.td,{children:["The warehouse directory of the Hive catalog, such as ",(0,n.jsx)(r.code,{children:"/user/hive/warehouse-hive/"}),"."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.catalog-backend-name"})}),(0,n.jsx)(r.td,{children:"The catalog backend name passed to underlying Iceberg catalog backend. Catalog name in JDBC backend is used to isolate namespace and tables."}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"hive"})," for Hive backend, ",(0,n.jsx)(r.code,{children:"jdbc"})," for JDBC backend, ",(0,n.jsx)(r.code,{children:"memory"})," for memory backend"]}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.5.2"})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"jdbc-backend-configuration",children:"JDBC backend configuration"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.catalog-backend"})}),(0,n.jsxs)(r.td,{children:["The Catalog backend of the Gravitino Iceberg REST catalog service. Use the value ",(0,n.jsx)(r.strong,{children:(0,n.jsx)(r.code,{children:"jdbc"})})," for the JDBC catalog backend."]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"memory"})}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.uri"})}),(0,n.jsxs)(r.td,{children:["The JDBC connection address, such as ",(0,n.jsx)(r.code,{children:"jdbc:postgresql://127.0.0.1:5432"})," for Postgres, or ",(0,n.jsx)(r.code,{children:"jdbc:mysql://127.0.0.1:3306/"})," for mysql."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.warehouse "})}),(0,n.jsxs)(r.td,{children:["The warehouse directory of JDBC catalog. Set the HDFS prefix if using HDFS, such as ",(0,n.jsx)(r.code,{children:"hdfs://127.0.0.1:9000/user/hive/warehouse-jdbc"})]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.catalog-backend-name"})}),(0,n.jsx)(r.td,{children:"The catalog name passed to underlying Iceberg catalog backend. Catalog name in JDBC backend is used to isolate namespace and tables."}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"jdbc"})," for JDBC backend"]}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.5.2"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-user"})}),(0,n.jsx)(r.td,{children:"The username of the JDBC connection."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-password"})}),(0,n.jsx)(r.td,{children:"The password of the JDBC connection."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-initialize"})}),(0,n.jsx)(r.td,{children:"Whether to initialize the meta tables when creating the JDBC catalog."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"true"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-driver"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"com.mysql.jdbc.Driver"})," or ",(0,n.jsx)(r.code,{children:"com.mysql.cj.jdbc.Driver"})," for MySQL, ",(0,n.jsx)(r.code,{children:"org.postgresql.Driver"})," for PostgreSQL."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.3.0"})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["If you have a JDBC Iceberg catalog prior, you must set ",(0,n.jsx)(r.code,{children:"catalog-backend-name"})," to keep consistent with your Jdbc Iceberg catalog name to operate the prior namespace and tables."]}),"\n",(0,n.jsx)(r.admonition,{type:"caution",children:(0,n.jsxs)(r.p,{children:["You must download the corresponding JDBC driver to the ",(0,n.jsx)(r.code,{children:"iceberg-rest-server/libs"})," directory.\nIf you are using multiple JDBC catalog backends, setting ",(0,n.jsx)(r.code,{children:"jdbc-initialize"})," to true may not take effect for RDBMS like ",(0,n.jsx)(r.code,{children:"Mysql"}),", you should create Iceberg meta tables explicitly."]})}),"\n",(0,n.jsx)(r.h4,{id:"custom-backend-configuration",children:"Custom backend configuration"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.catalog-backend"})}),(0,n.jsxs)(r.td,{children:["The Catalog backend of the Gravitino Iceberg REST catalog service. Use the value ",(0,n.jsx)(r.strong,{children:(0,n.jsx)(r.code,{children:"custom"})})," for the custom catalog backend."]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"memory"})}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.2.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.catalog-backend-impl"})}),(0,n.jsxs)(r.td,{children:["The fully-qualified class name of a custom catalog implementation, only worked if ",(0,n.jsx)(r.code,{children:"catalog-backend"})," is ",(0,n.jsx)(r.code,{children:"custom"}),"."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["If you want to use a custom Iceberg Catalog as ",(0,n.jsx)(r.code,{children:"catalog-backend"}),", you can add a corresponding jar file to the classpath and load a custom Iceberg Catalog implementation by specifying the ",(0,n.jsx)(r.code,{children:"catalog-backend-impl"})," property."]}),"\n",(0,n.jsx)(r.h3,{id:"multiple-catalog-backend-support",children:"Multiple catalog backend support"}),"\n",(0,n.jsxs)(r.p,{children:["The Gravitino Iceberg REST server supports multiple catalog backend, and you could use ",(0,n.jsx)(r.code,{children:"catalog-config-provider"})," to control the behavior about how to manage catalog backend configurations."]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.catalog-config-provider"})}),(0,n.jsxs)(r.td,{children:["The className of catalog configuration provider, Gravitino provides build-in ",(0,n.jsx)(r.code,{children:"static-config-provider"})," and ",(0,n.jsx)(r.code,{children:"dynamic-config-provider"}),", you could also develop a custom class that implements ",(0,n.jsx)(r.code,{children:"apache.gravitino.iceberg.service.provider.IcebergConfigProvider"})," and add the corresponding jar file to the Iceberg REST service classpath directory."]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"static-config-provider"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]})})]}),"\n",(0,n.jsxs)(r.p,{children:["Use ",(0,n.jsx)(r.code,{children:"static-config-provider"})," to manage catalog configuration in the file, the catalog configuration is loaded when the server start up and couldn't be changed.\nWhile ",(0,n.jsx)(r.code,{children:"dynamic-config-provider"})," is used to manage catalog config through Gravitino server, you could add&delete&change the catalog configurations dynamically."]}),"\n",(0,n.jsx)(r.h4,{id:"static-catalog-configuration-provider",children:"Static catalog configuration provider"}),"\n",(0,n.jsxs)(r.p,{children:["The static catalog configuration provider retrieves the catalog configuration from the configuration file of the Gravitino Iceberg REST server. You could configure the default catalog with ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.<param name>=<value>"}),". For others, use ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.catalog.<catalog name>.<param name>=<value>"})," to config the catalog with ",(0,n.jsx)(r.code,{children:"catalog name"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["For instance, you could configure three different catalogs, the default catalog and ",(0,n.jsx)(r.code,{children:"hive_backend"})," and ",(0,n.jsx)(r.code,{children:"jdbc_backend"})," catalogs separately."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:"gravitino.iceberg-rest.catalog-backend = jdbc\ngravitino.iceberg-rest.uri = jdbc:postgresql://127.0.0.1:5432\ngravitino.iceberg-rest.warehouse = hdfs://127.0.0.1:9000/user/hive/warehouse-postgresql\n...\ngravitino.iceberg-rest.catalog.hive_backend.catalog-backend = hive\ngravitino.iceberg-rest.catalog.hive_backend.uri = thrift://127.0.0.1:9084\ngravitino.iceberg-rest.catalog.hive_backend.warehouse = /user/hive/warehouse-hive/\n...\ngravitino.iceberg-rest.catalog.jdbc_backend.catalog-backend = jdbc\ngravitino.iceberg-rest.catalog.jdbc_backend.uri = jdbc:mysql://127.0.0.1:3306/\ngravitino.iceberg-rest.catalog.jdbc_backend.warehouse = hdfs://127.0.0.1:9000/user/hive/warehouse-mysql\n...\n"})}),"\n",(0,n.jsx)(r.h4,{id:"dynamic-catalog-configuration-provider",children:"Dynamic catalog configuration provider"}),"\n",(0,n.jsx)(r.p,{children:"The dynamic catalog configuration provider retrieves the catalog configuration from the Gravitino server, and the catalog configuration could be updated dynamically."}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.gravitino-uri"})}),(0,n.jsxs)(r.td,{children:["The uri of Gravitino server address, only worked if ",(0,n.jsx)(r.code,{children:"catalog-config-provider"})," is ",(0,n.jsx)(r.code,{children:"dynamic-config-provider"}),"."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.gravitino-metalake"})}),(0,n.jsxs)(r.td,{children:["The metalake name that ",(0,n.jsx)(r.code,{children:"dynamic-config-provider"})," used to request to Gravitino, only worked if ",(0,n.jsx)(r.code,{children:"catalog-config-provider"})," is ",(0,n.jsx)(r.code,{children:"dynamic-config-provider"}),"."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.default-catalog-name"})}),(0,n.jsxs)(r.td,{children:["The default catalog name used by Iceberg REST server if the Iceberg REST client doesn't specify the catalog name explicitly. Only worked if ",(0,n.jsx)(r.code,{children:"catalog-config-provider"})," is ",(0,n.jsx)(r.code,{children:"dynamic-config-provider"}),"."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"1.0.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.catalog-cache-eviction-interval-ms"})}),(0,n.jsx)(r.td,{children:"Catalog cache eviction interval."}),(0,n.jsx)(r.td,{children:"3600000"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]})]})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:"gravitino.iceberg-rest.catalog-cache-eviction-interval-ms = 300000\ngravitino.iceberg-rest.catalog-config-provider = dynamic-config-provider\ngravitino.iceberg-rest.gravitino-uri = http://127.0.0.1:8090\ngravitino.iceberg-rest.gravitino-metalake = test\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Suppose there are two Iceberg catalogs ",(0,n.jsx)(r.code,{children:"hive_catalog"})," and ",(0,n.jsx)(r.code,{children:"jdbc_catalog"})," in Gravitino server, ",(0,n.jsx)(r.code,{children:"dynamic-config-provider"})," will poll the catalog properties internally and register ",(0,n.jsx)(r.code,{children:"hive_catalog"})," and ",(0,n.jsx)(r.code,{children:"jdbc_catalog"})," in Iceberg REST server side. Dynamic config provider will get all catalog properties, for the properties that start with ",(0,n.jsx)(r.code,{children:"gravitino.bypass."})," prefix, it will remove the prefix and use the rest part as the catalog property key."]}),"\n",(0,n.jsx)(r.h4,{id:"how-to-access-the-specific-catalog",children:"How to access the specific catalog"}),"\n",(0,n.jsxs)(r.p,{children:["You can access different catalogs by setting the ",(0,n.jsx)(r.code,{children:"warehouse"})," to the specific catalog name in the Iceberg REST client configuration. The default catalog will be used if you do not specify a ",(0,n.jsx)(r.code,{children:"warehouse"}),". For instance, suppose there are three catalog backends: default catalog, ",(0,n.jsx)(r.code,{children:"hive_catalog"})," and ",(0,n.jsx)(r.code,{children:"jdbc_catalog"}),", consider the case of SparkSQL:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:"./bin/spark-sql -v \\\n...\n--conf spark.sql.catalog.default_rest_catalog.type=rest  \\\n--conf spark.sql.catalog.default_rest_catalog.uri=http://127.0.0.1:9001/iceberg/ \\\n...\n--conf spark.sql.catalog.hive_backend_rest_catalog.type=rest  \\\n--conf spark.sql.catalog.hive_backend_rest_catalog.uri=http://127.0.0.1:9001/iceberg/ \\\n--conf spark.sql.catalog.hive_backend_rest_catalog.warehouse=hive_backend \\\n...\n--conf spark.sql.catalog.jdbc_backend_rest_catalog.type=rest  \\\n--conf spark.sql.catalog.jdbc_backend_rest_catalog.uri=http://127.0.0.1:9001/iceberg/ \\\n--conf spark.sql.catalog.jdbc_backend_rest_catalog.warehouse=jdbc_backend \\\n...\n"})}),"\n",(0,n.jsxs)(r.p,{children:["In the Spark SQL side, you could use ",(0,n.jsx)(r.code,{children:"default_rest_catalog"})," to access the default catalog backend, and use ",(0,n.jsx)(r.code,{children:"hive_backend_rest_catalog"})," and ",(0,n.jsx)(r.code,{children:"jdbc_backend_rest_catalog"})," to access the ",(0,n.jsx)(r.code,{children:"hive_backend"})," and ",(0,n.jsx)(r.code,{children:"jdbc_backend"})," catalog backend respectively."]}),"\n",(0,n.jsx)(r.h3,{id:"security",children:"Security"}),"\n",(0,n.jsx)(r.h4,{id:"oauth2",children:"OAuth2"}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"./security/how-to-authenticate#server-configuration",children:"OAuth2 Configuration"})," for how to enable OAuth2."]}),"\n",(0,n.jsx)(r.p,{children:"When enabling OAuth2 and leveraging a dynamic configuration provider to retrieve catalog information from the Gravitino server, please use the following configuration parameters to establish OAuth2 authentication for secure communication with the Gravitino server:"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.gravitino-auth-type"})}),(0,n.jsxs)(r.td,{children:["The auth type to communicate with Gravitino server, supports ",(0,n.jsx)(r.code,{children:"simple"})," and ",(0,n.jsx)(r.code,{children:"oauth2"}),"."]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"simple"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"1.0.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.gravitino-simple.user-name"})}),(0,n.jsxs)(r.td,{children:["The username when using ",(0,n.jsx)(r.code,{children:"simple"})," auth type."]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"iceberg-rest-server"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"1.0.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.gravitino-oauth2.server-uri"})}),(0,n.jsx)(r.td,{children:"The OAuth2 server uri address."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsxs)(r.td,{children:["Yes, for ",(0,n.jsx)(r.code,{children:"oauth2"})]}),(0,n.jsx)(r.td,{children:"1.0.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.gravitino-oauth2.credential"})}),(0,n.jsx)(r.td,{children:"The credential to request the OAuth2 token."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsxs)(r.td,{children:["Yes, for ",(0,n.jsx)(r.code,{children:"oauth2"})]}),(0,n.jsx)(r.td,{children:"1.0.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.gravitino-oauth2.token-path"})}),(0,n.jsx)(r.td,{children:"The path for token of the default OAuth server."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsxs)(r.td,{children:["Yes, for ",(0,n.jsx)(r.code,{children:"oauth2"})]}),(0,n.jsx)(r.td,{children:"1.0.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.gravitino-oauth2.scope"})}),(0,n.jsx)(r.td,{children:"The scope to request the OAuth2 token."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsxs)(r.td,{children:["Yes, for ",(0,n.jsx)(r.code,{children:"oauth2"})]}),(0,n.jsx)(r.td,{children:"1.0.0"})]})]})]}),"\n",(0,n.jsx)(r.p,{children:"Here is an example of how to enable OAuth2 for Gravitino Iceberg REST server:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:"gravitino.authenticators = oauth\ngravitino.authenticator.oauth.serviceAudience = test\ngravitino.authenticator.oauth.defaultSignKey = xx\ngravitino.authenticator.oauth.tokenPath = oauth2/token\ngravitino.authenticator.oauth.serverUri = http://localhost:8177\n"})}),"\n",(0,n.jsxs)(r.p,{children:["You should add extra configurations if using ",(0,n.jsx)(r.code,{children:"dynamic-config-provider"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:"gravitino.iceberg-rest.catalog-config-provider = dynamic-config-provider\ngravitino.iceberg-rest.gravitino-metalake = test\ngravitino.iceberg-rest.gravitino-uri = http://127.0.0.1:8090\ngravitino.iceberg-rest.gravitino-auth-type = oauth2\ngravitino.iceberg-rest.gravitino-oauth2.server-uri = http://localhost:8177\ngravitino.iceberg-rest.gravitino-oauth2.credential = test:test\ngravitino.iceberg-rest.gravitino-oauth2.token-path = oauth2/token\ngravitino.iceberg-rest.gravitino-oauth2.scope = test\n"})}),"\n",(0,n.jsx)(r.p,{children:"Please refer the following configuration If you are using Spark to access Iceberg REST catalog with OAuth2 enabled:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:"./bin/spark-sql -v \\\n--conf spark.jars=/Users/fanng/deploy/demo/jars/iceberg-spark-runtime-3.5_2.12-1.10.0.jar \\\n--conf spark.sql.extensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions \\\n--conf spark.sql.catalog.rest=org.apache.iceberg.spark.SparkCatalog \\\n--conf spark.sql.catalog.rest.rest.auth.type=oauth2 \\\n--conf spark.sql.catalog.rest.type=rest  \\\n--conf spark.sql.catalog.rest.uri=http://127.0.0.1:9001/iceberg/ \\\n--conf spark.sql.catalog.rest.prefix=${catalog_name} \\\n--conf spark.sql.catalog.rest.credential=test:test \\\n--conf spark.sql.catalog.rest.scope=test \\\n--conf spark.sql.catalog.rest.oauth2-server-uri=http://localhost:8177/oauth2/token\n"})}),"\n",(0,n.jsx)(r.h4,{id:"https",children:"HTTPS"}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"./security/how-to-use-https/#apache-iceberg-rest-services-configuration",children:"HTTPS Configuration"})," for how to enable HTTPS for Gravitino Iceberg REST server."]}),"\n",(0,n.jsx)(r.h4,{id:"backend-authentication",children:"Backend authentication"}),"\n",(0,n.jsxs)(r.p,{children:["For JDBC backend, you can use the ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-user"})," and ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-password"})," to authenticate the JDBC connection. For Hive backend, you can use the ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.type"})," to specify the authentication type, and use the ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.kerberos.principal"})," and ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.kerberos.keytab-uri"})," to authenticate the Kerberos connection.\nThe detailed configuration items are as follows:"]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.type"})}),(0,n.jsxs)(r.td,{children:["The type of authentication for Iceberg rest catalog backend. This configuration only applicable for for Hive backend, and only supports ",(0,n.jsx)(r.code,{children:"Kerberos"}),", ",(0,n.jsx)(r.code,{children:"simple"})," currently. As for JDBC backend, only username/password authentication was supported now."]}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"simple"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.impersonation-enable"})}),(0,n.jsx)(r.td,{children:"Whether to enable impersonation for the Iceberg catalog"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"false"})}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.hive.metastore.sasl.enabled"})}),(0,n.jsx)(r.td,{children:"Whether to enable SASL authentication protocol when connect to Kerberos Hive metastore."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"false"})}),(0,n.jsxs)(r.td,{children:["No, This value should be true in most case(Some will use SSL protocol, but it rather rare) if the value of ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.type"})," is Kerberos."]}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.kerberos.principal"})}),(0,n.jsx)(r.td,{children:"The principal of the Kerberos authentication"}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsxs)(r.td,{children:["required if the value of ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.type"})," is Kerberos."]}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.kerberos.keytab-uri"})}),(0,n.jsx)(r.td,{children:"The URI of The keytab for the Kerberos authentication."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsxs)(r.td,{children:["required if the value of ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.type"})," is Kerberos."]}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.kerberos.check-interval-sec"})}),(0,n.jsx)(r.td,{children:"The check interval of Kerberos credential for Iceberg catalog."}),(0,n.jsx)(r.td,{children:"60"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.authentication.kerberos.keytab-fetch-timeout-sec"})}),(0,n.jsxs)(r.td,{children:["The fetch timeout of retrieving Kerberos keytab from ",(0,n.jsx)(r.code,{children:"authentication.kerberos.keytab-uri"}),"."]}),(0,n.jsx)(r.td,{children:"60"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"credential-vending",children:"Credential vending"}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/security/credential-vending",children:"Credential vending"})," for more details."]}),"\n",(0,n.jsx)(r.h3,{id:"access-control",children:"Access control"}),"\n",(0,n.jsx)(r.h4,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,n.jsx)(r.p,{children:"To use access control with the Iceberg REST service:"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"The Iceberg REST service must be running as an auxiliary service within the Gravitino server (standalone mode is not supported for access control)"}),"\n",(0,n.jsxs)(r.li,{children:["Enable authorization in the Gravitino server by setting ",(0,n.jsx)(r.code,{children:"gravitino.authorization.enable = true"})]}),"\n",(0,n.jsxs)(r.li,{children:["Use the ",(0,n.jsx)(r.a,{href:"#dynamic-catalog-configuration-provider",children:"dynamic configuration provider"})," to retrieve catalog configurations from Gravitino"]}),"\n"]}),"\n",(0,n.jsx)(r.admonition,{type:"note",children:(0,n.jsx)(r.p,{children:"Access control for the Iceberg REST Catalog (IRC) is only supported when running as an auxiliary service embedded in the Gravitino server. Standalone Iceberg REST server deployments do not support access control features."})}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/security/access-control",children:"Access Control"})," for details on how to configure authorization, create roles, and grant privileges in Gravitino."]}),"\n",(0,n.jsx)(r.h4,{id:"how-access-control-works",children:"How access control works"}),"\n",(0,n.jsx)(r.p,{children:"When access control is enabled:"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"Clients authenticate with the Iceberg REST service (Now we support Basic auth and OAuth2)"}),"\n",(0,n.jsx)(r.li,{children:"The Iceberg REST service sends the authenticated user identity, target metadata object, and requested operation to the Gravitino server for authorization verification"}),"\n",(0,n.jsx)(r.li,{children:"Gravitino verifies the user has the necessary privileges to perform the operation on the specified metadata object"}),"\n",(0,n.jsx)(r.li,{children:"Upon successful authorization, the Iceberg REST service executes the operation; otherwise, it returns an authorization error"}),"\n"]}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/security/access-control",children:"Access Control"})," for the complete list of privileges and how to grant them."]}),"\n",(0,n.jsx)(r.h3,{id:"storage",children:"Storage"}),"\n",(0,n.jsx)(r.h4,{id:"s3-configuration",children:"S3 configuration"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.io-impl"})}),(0,n.jsxs)(r.td,{children:["The IO implementation for ",(0,n.jsx)(r.code,{children:"FileIO"})," in Iceberg, use ",(0,n.jsx)(r.code,{children:"org.apache.iceberg.aws.s3.S3FileIO"})," for S3."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.6.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-endpoint"})}),(0,n.jsx)(r.td,{children:"An alternative endpoint of the S3 service, This could be used for S3FileIO with any s3-compatible object storage service that has a different endpoint, or access a private S3 endpoint in a virtual private cloud."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.6.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-region"})}),(0,n.jsxs)(r.td,{children:["The region of the S3 service, like ",(0,n.jsx)(r.code,{children:"us-west-2"}),"."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.6.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-path-style-access"})}),(0,n.jsx)(r.td,{children:"Whether to use path style access for S3."}),(0,n.jsx)(r.td,{children:"false"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.9.0-incubating"})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["For other Iceberg s3 properties not managed by Gravitino like ",(0,n.jsx)(r.code,{children:"s3.sse.type"}),", you could config it directly by ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3.sse.type"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/security/credential-vending#s3-credentials",children:"S3 credentials"})," for credential related configurations."]}),"\n",(0,n.jsx)(r.admonition,{type:"info",children:(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["For the JDBC catalog backend, set the ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.warehouse"})," parameter to ",(0,n.jsx)(r.code,{children:"s3://{bucket_name}/${prefix_name}"}),"."]}),"\n",(0,n.jsxs)(r.li,{children:["For the Hive catalog backend, set ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.warehouse"})," to ",(0,n.jsx)(r.code,{children:"s3a://{bucket_name}/${prefix_name}"}),"."]}),"\n",(0,n.jsxs)(r.li,{children:["Additionally, download the ",(0,n.jsx)(r.a,{href:"https://mvnrepository.com/artifact/org.apache.gravitino/gravitino-iceberg-aws-bundle",children:"Gravitino Iceberg AWS bundle"})," and place it in the classpath of Iceberg REST server."]}),"\n"]})}),"\n",(0,n.jsx)(r.h4,{id:"oss-configuration",children:"OSS configuration"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.io-impl"})}),(0,n.jsxs)(r.td,{children:["The IO implementation for ",(0,n.jsx)(r.code,{children:"FileIO"})," in Iceberg, use ",(0,n.jsx)(r.code,{children:"org.apache.iceberg.aliyun.oss.OSSFileIO"})," for OSS."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.6.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.oss-endpoint"})}),(0,n.jsx)(r.td,{children:"The endpoint of Aliyun OSS service."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.oss-region"})}),(0,n.jsxs)(r.td,{children:["The region of the OSS service, like ",(0,n.jsx)(r.code,{children:"oss-cn-hangzhou"}),", only used when ",(0,n.jsx)(r.code,{children:"credential-providers"})," is ",(0,n.jsx)(r.code,{children:"oss-token"}),"."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["For other Iceberg OSS properties not managed by Gravitino like ",(0,n.jsx)(r.code,{children:"client.security-token"}),", you could config it directly by ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.client.security-token"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/security/credential-vending#oss-credentials",children:"OSS credentials"})," for credential related configurations."]}),"\n",(0,n.jsxs)(r.p,{children:["Additionally, please download the ",(0,n.jsx)(r.a,{href:"https://mvnrepository.com/artifact/org.apache.gravitino/gravitino-iceberg-aliyun-bundle",children:"Gravitino Iceberg Aliyun bundle jar"})," and place it in the classpath of Iceberg REST server, you can refer to ",(0,n.jsx)(r.a,{href:"#server-management",children:"server management"})," for classpath details."]}),"\n",(0,n.jsx)(r.admonition,{type:"info",children:(0,n.jsxs)(r.p,{children:["Please set the ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.warehouse"})," parameter to ",(0,n.jsx)(r.code,{children:"oss://{bucket_name}/${prefix_name}"}),"."]})}),"\n",(0,n.jsx)(r.h4,{id:"gcs",children:"GCS"}),"\n",(0,n.jsx)(r.p,{children:"Supports using static GCS credential file or generating GCS token to access GCS data."}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.io-impl"})}),(0,n.jsxs)(r.td,{children:["The io implementation for ",(0,n.jsx)(r.code,{children:"FileIO"})," in Iceberg, use ",(0,n.jsx)(r.code,{children:"org.apache.iceberg.gcp.gcs.GCSFileIO"})," for GCS."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.6.0-incubating"})]})})]}),"\n",(0,n.jsxs)(r.p,{children:["For other Iceberg GCS properties not managed by Gravitino like ",(0,n.jsx)(r.code,{children:"gcs.project-id"}),", you could config it directly by ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.gcs.project-id"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/security/credential-vending#gcs-credentials",children:"GCS credentials"})," for credential related configurations."]}),"\n",(0,n.jsx)(r.admonition,{type:"note",children:(0,n.jsxs)(r.p,{children:["Please ensure that the credential file can be accessed by the Gravitino server. For example, if the server is running on a GCE machine, or you can set the environment variable as ",(0,n.jsx)(r.code,{children:"export GOOGLE_APPLICATION_CREDENTIALS=/xx/application_default_credentials.json"}),", even when the ",(0,n.jsx)(r.code,{children:"gcs-service-account-file"})," has already been configured."]})}),"\n",(0,n.jsx)(r.admonition,{type:"info",children:(0,n.jsxs)(r.p,{children:["Please set ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.warehouse"})," to ",(0,n.jsx)(r.code,{children:"gs://{bucket_name}/${prefix_name}"}),", and download ",(0,n.jsx)(r.a,{href:"https://mvnrepository.com/artifact/org.apache.gravitino/gravitino-iceberg-gcp-bundle",children:"Gravitino Iceberg gcp bundle"})," and place it to the classpath of Gravitino Iceberg REST server, ",(0,n.jsx)(r.code,{children:"iceberg-rest-server/libs"})," for the auxiliary server, ",(0,n.jsx)(r.code,{children:"libs"})," for the standalone server."]})}),"\n",(0,n.jsx)(r.h4,{id:"adls",children:"ADLS"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.io-impl"})}),(0,n.jsxs)(r.td,{children:["The IO implementation for ",(0,n.jsx)(r.code,{children:"FileIO"})," in Iceberg, use ",(0,n.jsx)(r.code,{children:"org.apache.iceberg.azure.adlsv2.ADLSFileIO"})," for ADLS."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]})})]}),"\n",(0,n.jsxs)(r.p,{children:["For other Iceberg ADLS properties not managed by Gravitino like ",(0,n.jsx)(r.code,{children:"adls.read.block-size-bytes"}),", you could config it directly by ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.adls.read.block-size-bytes"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/security/credential-vending#adls-credentials",children:"ADLS credentials"})," for credential related configurations."]}),"\n",(0,n.jsx)(r.admonition,{type:"info",children:(0,n.jsxs)(r.p,{children:["Please set ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.warehouse"})," to ",(0,n.jsx)(r.code,{children:"abfs[s]://{container-name}@{storage-account-name}.dfs.core.windows.net/{path}"}),", and download the ",(0,n.jsx)(r.a,{href:"https://mvnrepository.com/artifact/org.apache.gravitino/gravitino-iceberg-azure-bundle",children:"Gravitino Iceberg Azure bundle"})," and place it in the classpath of Iceberg REST server."]})}),"\n",(0,n.jsx)(r.h4,{id:"hdfs-configuration",children:"HDFS configuration"}),"\n",(0,n.jsxs)(r.p,{children:["You should place HDFS configuration file to the classpath of the Iceberg REST server, ",(0,n.jsx)(r.code,{children:"iceberg-rest-server/conf"})," for Gravitino server package, ",(0,n.jsx)(r.code,{children:"conf"})," for standalone Gravitino Iceberg REST server package. When writing to HDFS, the Gravitino Iceberg REST catalog service can only operate as the specified HDFS user and doesn't support proxying to other HDFS users. See ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/gravitino-server-config#how-to-access-apache-hadoop",children:"How to access Apache Hadoop"})," for more details."]}),"\n",(0,n.jsx)(r.admonition,{type:"info",children:(0,n.jsx)(r.p,{children:"Builds with Hadoop 2.10.x. There may be compatibility issues when accessing Hadoop 3.x clusters."})}),"\n",(0,n.jsx)(r.h4,{id:"other-storages",children:"Other storages"}),"\n",(0,n.jsx)(r.p,{children:"For other storages that are not managed by Gravitino directly, you can manage them through custom catalog properties."}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.io-impl"})}),(0,n.jsxs)(r.td,{children:["The IO implementation for ",(0,n.jsx)(r.code,{children:"FileIO"})," in Iceberg, please use the full qualified classname."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.6.0-incubating"})]})})]}),"\n",(0,n.jsxs)(r.p,{children:["To pass custom properties such as ",(0,n.jsx)(r.code,{children:"security-token"})," to your custom ",(0,n.jsx)(r.code,{children:"FileIO"}),", you can directly configure it by ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.security-token"}),". ",(0,n.jsx)(r.code,{children:"security-token"})," will be included in the properties when the initialize method of ",(0,n.jsx)(r.code,{children:"FileIO"})," is invoked."]}),"\n",(0,n.jsx)(r.admonition,{type:"info",children:(0,n.jsxs)(r.p,{children:["Please set the ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.warehouse"})," parameter to ",(0,n.jsx)(r.code,{children:"{storage_prefix}://{bucket_name}/${prefix_name}"}),". Additionally, download corresponding jars in the classpath of Iceberg REST server, ",(0,n.jsx)(r.code,{children:"iceberg-rest-server/libs"})," for the auxiliary server, ",(0,n.jsx)(r.code,{children:"libs"})," for the standalone server."]})}),"\n",(0,n.jsx)(r.h3,{id:"view-support",children:"View support"}),"\n",(0,n.jsxs)(r.p,{children:["You could access the view interface if using JDBC backend and enable ",(0,n.jsx)(r.code,{children:"jdbc.schema-version"})," property."]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc.schema-version"})}),(0,n.jsxs)(r.td,{children:["The schema version of JDBC catalog backend, setting to ",(0,n.jsx)(r.code,{children:"V1"})," if supporting view operations."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"NO"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]})})]}),"\n",(0,n.jsx)(r.h3,{id:"other-apache-iceberg-catalog-properties",children:"Other Apache Iceberg catalog properties"}),"\n",(0,n.jsxs)(r.p,{children:["You can add other properties defined in ",(0,n.jsx)(r.a,{href:"https://iceberg.apache.org/docs/1.10.0/configuration/#catalog-properties",children:"Iceberg catalog properties"}),".\nThe ",(0,n.jsx)(r.code,{children:"clients"})," property for example:"]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.clients"})}),(0,n.jsx)(r.td,{children:"The client pool size of the catalog."}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"2"})}),(0,n.jsx)(r.td,{children:"No"})]})})]}),"\n",(0,n.jsx)(r.admonition,{type:"info",children:(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"catalog-impl"})," has no effect."]})}),"\n",(0,n.jsx)(r.h3,{id:"event-listener",children:"Event listener"}),"\n",(0,n.jsxs)(r.p,{children:["Gravitino generates pre-event and post-event for table operations and provide a pluggable event listener to allow you to inject custom logic. For more details, please refer to ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/gravitino-server-config#event-listener-configuration",children:"Event listener configuration"}),"."]}),"\n",(0,n.jsx)(r.h3,{id:"audit-log",children:"Audit log"}),"\n",(0,n.jsxs)(r.p,{children:["Gravitino provides a pluggable audit log mechanism, please refer to ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/gravitino-server-config#audit-log-configuration",children:"Audit log configuration"}),"."]}),"\n",(0,n.jsx)(r.h3,{id:"apache-iceberg-metrics-store-configuration",children:"Apache Iceberg metrics store configuration"}),"\n",(0,n.jsxs)(r.p,{children:["Gravitino provides a pluggable metrics store interface to store and delete Iceberg metrics. You can develop a class that implements ",(0,n.jsx)(r.code,{children:"org.apache.gravitino.iceberg.service.metrics.IcebergMetricsStore"})," and add the corresponding jar file to the Iceberg REST service classpath directory."]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.metricsStore"})}),(0,n.jsx)(r.td,{children:"The Iceberg metrics storage class name."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.4.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.metricsStoreRetainDays"})}),(0,n.jsx)(r.td,{children:"The days to retain Iceberg metrics in store, the value not greater than 0 means retain forever."}),(0,n.jsx)(r.td,{children:"-1"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.4.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.metricsQueueCapacity"})}),(0,n.jsx)(r.td,{children:"The size of queue to store metrics temporally before storing to the persistent storage. Metrics will be dropped when queue is full."}),(0,n.jsx)(r.td,{children:"1000"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.4.0"})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["If you want to use jdbc as metrics store, you can set the ",(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.metricsStore"})," to ",(0,n.jsx)(r.code,{children:"jdbc"}),", and set the following configurations to connect to the database.\nYou should initialize the database using the sql scripts in the directory ",(0,n.jsx)(r.code,{children:"scripts"}),".\nYou must download the corresponding JDBC driver to the ",(0,n.jsx)(r.code,{children:"iceberg-rest-server/libs"})," directory."]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-metrics.url"})}),(0,n.jsxs)(r.td,{children:["The JDBC connection address, such as ",(0,n.jsx)(r.code,{children:"jdbc:postgresql://127.0.0.1:5432/database"})," for Postgres, or ",(0,n.jsx)(r.code,{children:"jdbc:mysql://127.0.0.1:3306/database"})," for mysql."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"1.1.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-metrics.jdbc-user"})}),(0,n.jsx)(r.td,{children:"The username of the JDBC connection."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"1.1.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-metrics.jdbc-password"})}),(0,n.jsx)(r.td,{children:"The password of the JDBC connection."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"1.1.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-metrics.jdbc-driver"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"com.mysql.jdbc.Driver"})," or ",(0,n.jsx)(r.code,{children:"com.mysql.cj.jdbc.Driver"})," for MySQL, ",(0,n.jsx)(r.code,{children:"org.postgresql.Driver"})," for PostgreSQL."]}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"Yes"}),(0,n.jsx)(r.td,{children:"1.1.0"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"iceberg-table-metadata-cache-configuration",children:"Iceberg table metadata cache configuration"}),"\n",(0,n.jsx)(r.p,{children:"Gravitino features a pluggable cache system for updating or retrieving table metadata in the cache. It validates the location of table metadata against the catalog backend to ensure the correctness of cached data."}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.table-metadata-cache-impl"})}),(0,n.jsx)(r.td,{children:"The implement of the cache."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"1.1.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.table-metadata-cache-capacity"})}),(0,n.jsx)(r.td,{children:"The capacity of table metadata cache."}),(0,n.jsx)(r.td,{children:"200"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"1.1.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.table-metadata-cache-expire-minutes"})}),(0,n.jsx)(r.td,{children:"The expire minutes of table metadata cache."}),(0,n.jsx)(r.td,{children:"60"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"1.1.0"})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["Gravitino provides the build-in ",(0,n.jsx)(r.code,{children:"org.apache.gravitino.iceberg.common.cache.LocalTableMetadataCache"})," to store the cached data in the memory. You could also implement your custom table metadata cache by implementing the ",(0,n.jsx)(r.code,{children:"org.apache.gravitino.iceberg.common.cache.TableMetadataCache"})," interface."]}),"\n",(0,n.jsx)(r.h3,{id:"misc-configurations",children:"Misc configurations"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default value"}),(0,n.jsx)(r.th,{children:"Required"}),(0,n.jsx)(r.th,{children:"Since Version"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.extension-packages"})}),(0,n.jsx)(r.td,{children:"Comma-separated list of Iceberg REST API packages to expand."}),(0,n.jsx)(r.td,{children:"(none)"}),(0,n.jsx)(r.td,{children:"No"}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]})})]}),"\n",(0,n.jsx)(r.h3,{id:"memory-settings",children:"Memory settings"}),"\n",(0,n.jsxs)(r.p,{children:["The Iceberg REST server uses ",(0,n.jsx)(r.code,{children:"GRAVITINO_MEM"})," for JVM heap/metaspace flags. Default: ",(0,n.jsx)(r.code,{children:"-Xms1024m -Xmx1024m -XX:MaxMetaspaceSize=512m"}),". Launch scripts append ",(0,n.jsx)(r.code,{children:"GRAVITINO_MEM"})," to ",(0,n.jsx)(r.code,{children:"JAVA_OPTS"}),"; set it to adjust heap/metaspace sizes.\nExample tuning:"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Development: ",(0,n.jsx)(r.code,{children:'GRAVITINO_MEM="-Xms1g -Xmx1g -XX:MaxMetaspaceSize=512m"'})]}),"\n",(0,n.jsxs)(r.li,{children:["Medium workloads: ",(0,n.jsx)(r.code,{children:'GRAVITINO_MEM="-Xms4g -Xmx4g -XX:MaxMetaspaceSize=1g"'})]}),"\n",(0,n.jsx)(r.li,{children:"Higher concurrency or catalog counts: increase heap and metaspace accordingly."}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"starting-the-iceberg-rest-server",children:"Starting the Iceberg REST server"}),"\n",(0,n.jsx)(r.p,{children:"To start as an auxiliary service with Gravitino server:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:"./bin/gravitino.sh start \n"})}),"\n",(0,n.jsx)(r.p,{children:"To start a standalone Gravitino Iceberg REST catalog server:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:"./bin/gravitino-iceberg-rest-server.sh start\n"})}),"\n",(0,n.jsx)(r.p,{children:"To verify whether the service has started:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:"curl  http://127.0.0.1:9001/iceberg/v1/config\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Normally you will see the output like ",(0,n.jsx)(r.code,{children:'{"defaults":{},"overrides":{}, "endpoints":["GET /v1/{prefix}/namespaces", ...]}%'}),"."]}),"\n",(0,n.jsx)(r.h2,{id:"exploring-the-apache-gravitino-iceberg-rest-catalog-service-with-apache-spark",children:"Exploring the Apache Gravitino Iceberg REST catalog service with Apache Spark"}),"\n",(0,n.jsx)(r.h3,{id:"deploying-apache-spark-with-apache-iceberg-support",children:"Deploying Apache Spark with Apache Iceberg support"}),"\n",(0,n.jsxs)(r.p,{children:["Follow the ",(0,n.jsx)(r.a,{href:"https://iceberg.apache.org/docs/1.10.0/spark-getting-started/",children:"Spark Iceberg start guide"})," to set up Apache Spark's and Apache Iceberg's environment."]}),"\n",(0,n.jsx)(r.h3,{id:"starting-the-apache-spark-client-with-the-apache-iceberg-rest-catalog",children:"Starting the Apache Spark client with the Apache Iceberg REST catalog"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Configuration item"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"spark.sql.catalog.${catalog-name}.type"})}),(0,n.jsxs)(r.td,{children:["The Spark catalog type; should set to ",(0,n.jsx)(r.code,{children:"rest"}),"."]})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"spark.sql.catalog.${catalog-name}.uri"})}),(0,n.jsxs)(r.td,{children:["Spark Iceberg REST catalog URI, such as ",(0,n.jsx)(r.code,{children:"http://127.0.0.1:9001/iceberg/"}),"."]})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["For example, we can configure Spark catalog options to use Gravitino Iceberg REST catalog with the catalog name ",(0,n.jsx)(r.code,{children:"rest"}),"."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:"./bin/spark-sql -v \\\n--packages org.apache.iceberg:iceberg-spark-runtime-3.4_2.12:1.3.1 \\\n--conf spark.sql.extensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions \\\n--conf spark.sql.catalog.rest=org.apache.iceberg.spark.SparkCatalog  \\\n--conf spark.sql.catalog.rest.type=rest  \\\n--conf spark.sql.catalog.rest.uri=http://127.0.0.1:9001/iceberg/\n"})}),"\n",(0,n.jsxs)(r.p,{children:["You may need to adjust the Iceberg Spark runtime jar file name according to the real version number in your environment. If you want to access the data stored in cloud, you need to download corresponding jars (please refer to the cloud storage part) and place it in the classpath of Spark. If you want to enable credential vending, please set ",(0,n.jsx)(r.code,{children:"credential-providers"})," to a proper value in the server side, set ",(0,n.jsx)(r.code,{children:"spark.sql.catalog.rest.header.X-Iceberg-Access-Delegation"})," = ",(0,n.jsx)(r.code,{children:"vended-credentials"})," in the client side."]}),"\n",(0,n.jsxs)(r.p,{children:["For other storages not managed by Gravitino, the properties wouldn't transfer from the server to client automatically, if you want to pass custom properties to initialize ",(0,n.jsx)(r.code,{children:"FileIO"}),", you could add it by ",(0,n.jsx)(r.code,{children:"spark.sql.catalog.${iceberg_catalog_name}.${configuration_key}"})," = ",(0,n.jsx)(r.code,{children:"{property_value}"}),"."]}),"\n",(0,n.jsx)(r.h3,{id:"exploring-apache-iceberg-with-apache-spark-sql",children:"Exploring Apache Iceberg with Apache Spark SQL"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sql",children:"// First change to use the `rest` catalog\nUSE rest;\nCREATE DATABASE IF NOT EXISTS dml;\nCREATE TABLE dml.test (id bigint COMMENT 'unique id') using iceberg;\nDESCRIBE TABLE EXTENDED dml.test;\nINSERT INTO dml.test VALUES (1), (2);\nSELECT * FROM dml.test;\n"})}),"\n",(0,n.jsx)(r.h2,{id:"exploring-the-apache-gravitino-iceberg-rest-catalog-service-with-trino",children:"Exploring the Apache Gravitino Iceberg REST catalog service with Trino"}),"\n",(0,n.jsx)(r.h3,{id:"deploying-trino-with-apache-iceberg-support",children:"Deploying Trino with Apache Iceberg support"}),"\n",(0,n.jsxs)(r.p,{children:["To configure the Iceberg connector, create a catalog properties file like ",(0,n.jsx)(r.code,{children:"etc/catalog/rest.properties"})," that references the Iceberg connector."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"connector.name=iceberg\niceberg.catalog.type=rest\niceberg.rest-catalog.uri=http://localhost:9001/iceberg/\nfs.hadoop.enabled=true\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"https://trino.io/docs/current/connector/iceberg.html",children:"Trino Iceberg document"})," for more details."]}),"\n",(0,n.jsx)(r.h3,{id:"exploring-apache-iceberg-with-trino-sql",children:"Exploring Apache Iceberg with Trino SQL"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sql",children:"USE rest.dml;\nDELETE FROM rest.dml.test WHERE id = 2;\nSELECT * FROM test;\n"})}),"\n",(0,n.jsx)(r.h2,{id:"exploring-the-apache-gravitino-iceberg-rest-catalog-service-with-apache-doris",children:"Exploring the Apache Gravitino Iceberg REST catalog service with Apache Doris"}),"\n",(0,n.jsx)(r.h3,{id:"creating-iceberg-catalog-in-apache-doris",children:"Creating Iceberg catalog in Apache Doris"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:'CREATE CATALOG iceberg PROPERTIES (\n    "uri" = "http://localhost:9001/iceberg/",\n    "type" = "iceberg",\n    "iceberg.catalog.type" = "rest",\n    "s3.endpoint" = "http://s3.ap-southeast-2.amazonaws.com",\n    "s3.region" = "ap-southeast-2",\n    "s3.access_key" = "xxx",\n    "s3.secret_key" = "xxx"\n);\n'})}),"\n",(0,n.jsx)(r.h3,{id:"exploring-apache-iceberg-with-apache-doris-sql",children:"Exploring Apache Iceberg with Apache Doris SQL"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sql",children:"SWITCH iceberg;\nCREATE DATABASE db;\nUSE db;\nCREATE TABLE t(a int);\nINSERT INTO t values(1);\nSELECT * FROM t;\n"})}),"\n",(0,n.jsx)(r.h2,{id:"exploring-the-apache-gravitino-iceberg-rest-catalog-service-with-starrocks",children:"Exploring the Apache Gravitino Iceberg REST catalog service with StarRocks"}),"\n",(0,n.jsx)(r.h3,{id:"creating-iceberg-catalog-in-starrocks",children:"Creating Iceberg catalog in StarRocks"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:'CREATE EXTERNAL CATALOG \'iceberg\'\nCOMMENT "Gravitino Iceberg REST catalog on MinIO"\nPROPERTIES\n(\n  "type"="iceberg",\n  "iceberg.catalog.type"="rest",\n  "iceberg.catalog.uri"="http://iceberg-rest:9001/iceberg",\n  "aws.s3.access_key"="admin",\n  "aws.s3.secret_key"="password",\n  "aws.s3.endpoint"="http://minio:9000",\n  "aws.s3.enable_path_style_access"="true",\n  "client.factory"="com.starrocks.connector.iceberg.IcebergAwsClientFactory"\n);\n'})}),"\n",(0,n.jsxs)(r.p,{children:["Please note that, you should set ",(0,n.jsx)(r.code,{children:"client.factory"})," explicitly."]}),"\n",(0,n.jsx)(r.h3,{id:"exploring-apache-iceberg-with-starrocks-sql",children:"Exploring Apache Iceberg with StarRocks SQL"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sql",children:"SET CATALOG iceberg;\nCREATE DATABASE db;\nUSE db;\nCREATE TABLE t(a int);\nINSERT INTO t values(1);\nSELECT * FROM t;\n"})}),"\n",(0,n.jsx)(r.h3,{id:"exploring-apache-iceberg-with-pyiceberg",children:"Exploring Apache Iceberg with PyIceberg"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-python",children:'from pyiceberg.catalog import load_catalog\n\ncatalog = load_catalog(\n    "my_rest_catalog", \n    **{\n        "type": "rest",\n        "uri": "http://localhost:9001/iceberg",\n        "header.X-Iceberg-Access-Delegation":"vended-credentials",\n        "auth": {"type": "noop"},\n    }\n)\n\ntable_identifier = "db.table"\ntable = catalog.load_table(table_identifier)\nprint(table.scan().to_arrow())\n'})}),"\n",(0,n.jsx)(r.h2,{id:"docker-instructions",children:"Docker instructions"}),"\n",(0,n.jsx)(r.p,{children:"You could run Gravitino Iceberg REST server through docker container:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:"docker run -d -p 9001:9001 apache/gravitino-iceberg-rest:latest\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Gravitino Iceberg REST server in docker image could access local storage by default, you could set the following environment variables if the storage is cloud/remote storage like S3, please refer to ",(0,n.jsx)(r.a,{href:"#storage",children:"storage section"})," for more details."]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Environment variables"}),(0,n.jsx)(r.th,{children:"Configuration items"}),(0,n.jsx)(r.th,{children:"Since version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_IO_IMPL"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.io-impl"})}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_URI"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.uri"})}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_CATALOG_BACKEND"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.catalog-backend"})}),(0,n.jsx)(r.td,{children:"1.0.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_JDBC_DRIVER"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-driver"})}),(0,n.jsx)(r.td,{children:"0.9.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_JDBC_USER"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-user"})}),(0,n.jsx)(r.td,{children:"0.9.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_JDBC_PASSWORD"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.jdbc-password"})}),(0,n.jsx)(r.td,{children:"0.9.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_WAREHOUSE"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.warehouse"})}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_CREDENTIAL_PROVIDERS"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.credential-providers"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_GCS_SERVICE_ACCOUNT_FILE"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.gcs-service-account-file"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_S3_ACCESS_KEY"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-access-key-id"})}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_S3_SECRET_KEY"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-secret-access-key"})}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_S3_ENDPOINT"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-endpoint"})}),(0,n.jsx)(r.td,{children:"0.9.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_S3_REGION"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-region"})}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_S3_ROLE_ARN"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-role-arn"})}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_S3_EXTERNAL_ID"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-external-id"})}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_S3_TOKEN_SERVICE_ENDPOINT"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-token-service-endpoint"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_S3_PATH_STYLE_ACCESS"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.s3-path-style-access"})}),(0,n.jsx)(r.td,{children:"1.0.0"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_AZURE_STORAGE_ACCOUNT_NAME"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.azure-storage-account-name"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_AZURE_STORAGE_ACCOUNT_KEY"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.azure-storage-account-key"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_AZURE_TENANT_ID"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.azure-tenant-id"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_AZURE_CLIENT_ID"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.azure-client-id"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_AZURE_CLIENT_SECRET"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.azure-client-secret"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_OSS_ACCESS_KEY"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.oss-access-key-id"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_OSS_SECRET_KEY"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.oss-secret-access-key"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_OSS_ENDPOINT"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.oss-endpoint"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_OSS_REGION"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.oss-region"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_OSS_ROLE_ARN"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.oss-role-arn"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_OSS_EXTERNAL_ID"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.oss-external-id"})}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_ICEBERG_REST_HTTP_PORT"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"gravitino.iceberg-rest.httpPort"})}),(0,n.jsx)(r.td,{children:"1.1.0"})]})]})]}),"\n",(0,n.jsx)(r.p,{children:"The below environment is deprecated, please use the corresponding configuration items instead."}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Deprecated Environment variables"}),(0,n.jsx)(r.th,{children:"New environment variables"}),(0,n.jsx)(r.th,{children:"Since version"}),(0,n.jsx)(r.th,{children:"Deprecated version"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_CREDENTIAL_PROVIDER_TYPE"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_CREDENTIAL_PROVIDERS"})}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_GCS_CREDENTIAL_FILE_PATH"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"GRAVITINO_GCS_SERVICE_ACCOUNT_FILE"})}),(0,n.jsx)(r.td,{children:"0.7.0-incubating"}),(0,n.jsx)(r.td,{children:"0.8.0-incubating"})]})]})]}),"\n",(0,n.jsx)(r.p,{children:"Or build it manually to add custom configuration or logics:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:"sh ./dev/docker/build-docker.sh --platform linux/arm64 --type iceberg-rest-server --image apache/gravitino-iceberg-rest --tag $tag\n"})}),"\n",(0,n.jsxs)(r.p,{children:["You could try Spark with Gravitino REST catalog service in our ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/how-to-use-the-playground#using-apache-iceberg-rest-service",children:"playground"}),"."]}),"\n",(0,n.jsx)(r.h2,{id:"quick-start-enable-access-control-for-iceberg-rest-server",children:"Quick Start: Enable Access Control for Iceberg REST Server"}),"\n",(0,n.jsx)(r.p,{children:"To enable access control for the Iceberg REST server using Gravitino's dynamic configuration provider, follow these steps:"}),"\n",(0,n.jsx)(r.h3,{id:"1-enable-authorization-and-dynamic-config-provider",children:"1. Enable Authorization and Dynamic Config Provider"}),"\n",(0,n.jsxs)(r.p,{children:["Add the following to your Gravitino server configuration file (",(0,n.jsx)(r.code,{children:"gravitino.conf"}),").\nNote that access control is only supported when running the Iceberg REST server as an auxiliary service within the Gravitino server:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-properties",children:"gravitino.authorization.enable = true\ngravitino.authorization.serviceAdmins = adminUser\n\ngravitino.iceberg-rest.catalog-config-provider = dynamic-config-provider\ngravitino.iceberg-rest.gravitino-uri = http://127.0.0.1:8090\ngravitino.iceberg-rest.gravitino-metalake = test\n"})}),"\n",(0,n.jsx)(r.p,{children:"Restart the Iceberg REST server after updating the configuration."}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"2-create-a-metalake",children:"2. Create a Metalake"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:'curl -X POST -H "Accept: application/vnd.gravitino.v1+json" \\\n-H "Content-Type: application/json" -d \'{\n  "name": "test"\n}\' http://localhost:8090/api/metalakes\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"3-create-a-catalog",children:"3. Create a Catalog"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:'curl -X POST -H "Accept: application/vnd.gravitino.v1+json" \\\n-H "Content-Type: application/json" -d \'{\n  "name": "catalog1",\n  "type": "ICEBERG",\n  "comment": "Iceberg catalog",\n  "properties": {}\n}\' http://localhost:8090/api/metalakes/test/catalogs\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"4-create-a-role-and-grant-privileges",children:"4. Create a Role and Grant Privileges"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:'curl -X POST -H "Accept: application/vnd.gravitino.v1+json" \\\n-H "Content-Type: application/json" -d \'{\n   "name": "role1",\n   "properties": {},\n   "securableObjects": [\n      {\n         "fullName": "catalog1",\n         "type": "CATALOG",\n         "privileges": [\n            {\n               "name": "USE_CATALOG",\n               "condition": "ALLOW"\n            },\n            {\n               "name": "USE_SCHEMA",\n               "condition": "ALLOW"\n            },\n            {\n               "name": "SELECT_TABLE",\n               "condition": "ALLOW"\n            }\n         ]\n      }\n   ]\n}\' http://localhost:8090/api/metalakes/test/roles\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h4,{id:"verify-access-is-denied-without-privileges",children:"Verify Access is Denied Without Privileges"}),"\n",(0,n.jsxs)(r.p,{children:["Before granting any privileges, verify that the user cannot access the catalog. Try to list tables as ",(0,n.jsx)(r.code,{children:"user1"})," (replace with your actual authentication method):"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:'curl -u user1:password -H "Accept: application/vnd.gravitino.v1+json" \\\n  http://localhost:9001/iceberg/v1/catalog1/namespaces/default/tables\n'})}),"\n",(0,n.jsx)(r.p,{children:"This should return an error indicating insufficient privileges (such as HTTP 403 Forbidden)."}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h4,{id:"grant-role-to-user",children:"Grant Role to User"}),"\n",(0,n.jsx)(r.p,{children:"Now grant the role with privileges to the user:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:'curl -X PUT -H "Accept: application/vnd.gravitino.v1+json" \\\n-H "Content-Type: application/json" -d \'{\n    "roleNames": ["role1"]\n}\' http://localhost:8090/api/metalakes/test/permissions/users/user1/grant\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h4,{id:"verify-access-is-granted-with-privileges",children:"Verify Access is Granted With Privileges"}),"\n",(0,n.jsxs)(r.p,{children:["After granting the role with privileges, repeat the request as ",(0,n.jsx)(r.code,{children:"user1"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:'curl -u user1:password -H "Accept: application/vnd.gravitino.v1+json" \\\n  http://localhost:9001/iceberg/v1/catalog1/namespaces/default/tables\n'})}),"\n",(0,n.jsx)(r.p,{children:"This time, the request should succeed and return the list of tables."}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Summary:"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Enable authorization and set configuration provider to ",(0,n.jsx)(r.code,{children:"dynamic-config-provider"})]}),"\n",(0,n.jsx)(r.li,{children:"Create metalake"}),"\n",(0,n.jsx)(r.li,{children:"Create catalog"}),"\n",(0,n.jsx)(r.li,{children:"Create role and grant privileges"}),"\n",(0,n.jsx)(r.li,{children:"Assign role to user"}),"\n"]}),"\n",(0,n.jsxs)(r.p,{children:["For more details, see the ",(0,n.jsx)(r.a,{href:"/docs/1.1.0/security/access-control",children:"Access Control documentation"}),"."]}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Note:"})," IRC (Iceberg REST Catalog) authorization is not supported for standalone Iceberg REST server deployments.\nAccess control features described here require the Iceberg REST server to be run as an auxiliary service within the Gravitino server,\nusing the dynamic configuration provider. Standalone deployments do not support IRC-based authorization."]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}}}]);