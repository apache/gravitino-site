"use strict";(self.webpackChunkapache_website_template=self.webpackChunkapache_website_template||[]).push([[43103],{46452:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/authorization-pushdown-4ed3aad2fcf51c080732e0eb55586380.png"},82880:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>s});var r=i(79474);const t={},a=r.createContext(t);function o(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(a.Provider,{value:n},e.children)}},88201:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>h,contentTitle:()=>o,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var r=i(13274),t=i(82880);const a={title:"Authorization Push-down",slug:"/security/authorization-push-down",keyword:"security",license:"This software is licensed under the Apache License version 2."},o=void 0,s={id:"security/authorization-pushdown",title:"Authorization Push-down",description:"Authorization Push-down",source:"@site/versioned_docs/version-0.8.0-incubating/security/authorization-pushdown.md",sourceDirName:"security",slug:"/security/authorization-push-down",permalink:"/docs/0.8.0-incubating/security/authorization-push-down",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/gravitino-site/tree/main/docs/security/authorization-pushdown.md",tags:[],version:"0.8.0-incubating",frontMatter:{title:"Authorization Push-down",slug:"/security/authorization-push-down",keyword:"security",license:"This software is licensed under the Apache License version 2."},sidebar:"docs",previous:{title:"Access Control",permalink:"/docs/0.8.0-incubating/security/access-control"},next:{title:"How to authenticate",permalink:"/docs/0.8.0-incubating/security/how-to-authenticate"}},h={},d=[{value:"Authorization Push-down",id:"authorization-push-down",level:2},{value:"Ranger Hadoop SQL Plugin",id:"ranger-hadoop-sql-plugin",level:3},{value:"Example of using the Ranger Hadoop SQL Plugin",id:"example-of-using-the-ranger-hadoop-sql-plugin",level:4},{value:"chain authorization plugin",id:"chain-authorization-plugin",level:3},{value:"Example of using the chain authorization Plugin",id:"example-of-using-the-chain-authorization-plugin",level:4}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"authorization-push-down",children:"Authorization Push-down"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"authorization push down",src:i(46452).A+"",width:"2016",height:"1790"})}),"\n",(0,r.jsx)(n.p,{children:"Gravitino offers a set of authorization frameworks that integrate with various underlying data source permission systems, such as MySQL's native permission management and Apache Ranger for big data. These frameworks align with Gravitino's own authorization model and methodology.\nGravitino manages different data sources through Catalogs, and when a user performs an authorization operation on data within a Catalog, Gravitino invokes the Authorization Plugin module for that Catalog.\nThis module translates Gravitino's authorization model into the permission rules of the underlying data source. The permissions are then enforced by the underlying permission system via the respective client, such as JDBC or the Apache Ranger client."}),"\n",(0,r.jsx)(n.h3,{id:"ranger-hadoop-sql-plugin",children:"Ranger Hadoop SQL Plugin"}),"\n",(0,r.jsx)(n.p,{children:"In order to use the Ranger Hadoop SQL Plugin, you need to configure the following properties:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property Name"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Default Value"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Since Version"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization-provider"})}),(0,r.jsxs)(n.td,{children:["Providers to use to implement authorization plugin such as ",(0,r.jsx)(n.code,{children:"ranger"}),"."]}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"0.6.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.ranger.admin.url"})}),(0,r.jsx)(n.td,{children:"The Apache Ranger web URIs."}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"0.6.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.ranger.service.type"})}),(0,r.jsxs)(n.td,{children:["The Apache Ranger service type, Currently only supports ",(0,r.jsx)(n.code,{children:"HadoopSQL"})," or ",(0,r.jsx)(n.code,{children:"HDFS"})]}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"0.8.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.ranger.auth.type"})}),(0,r.jsxs)(n.td,{children:["The Apache Ranger authentication type ",(0,r.jsx)(n.code,{children:"simple"})," or ",(0,r.jsx)(n.code,{children:"kerberos"}),"."]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"simple"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"0.6.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.ranger.username"})}),(0,r.jsx)(n.td,{children:"The Apache Ranger admin web login username (auth type=simple), or kerberos principal(auth type=kerberos), Need have Ranger administrator permission."}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"0.6.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.ranger.password"})}),(0,r.jsx)(n.td,{children:"The Apache Ranger admin web login user password (auth type=simple), or path of the keytab file(auth type=kerberos)"}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"0.6.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.ranger.service.name"})}),(0,r.jsx)(n.td,{children:"The Apache Ranger service name."}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"0.6.0-incubating"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsx)(n.p,{children:"The Gravitino Ranger authorization plugin only supports the Apache Ranger HadoopSQL Plugin and Apache Ranger HDFS Plugin."})}),"\n",(0,r.jsxs)(n.p,{children:["Once you have used the correct configuration, you can perform authorization operations by calling Gravitino ",(0,r.jsx)(n.a,{href:"https://gravitino.apache.org/docs/latest/api/rest/grant-roles-to-a-user",children:"authorization RESTful API"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Gravitino will initially create three roles in Apache Ranger:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"GRAVITINO_METALAKE_OWNER_ROLE: Includes users and user groups designated as metalake owners, corresponding to the owner's privileges in Ranger policies."}),"\n",(0,r.jsx)(n.li,{children:"GRAVITINO_CATALOG_OWNER_ROLE: Includes users and user groups designated as catalog owners, corresponding to the owner's privileges in Ranger policies."}),"\n",(0,r.jsx)(n.li,{children:"GRAVITINO_OWNER_ROLE: Used to label Ranger policy items related to schema and table owner privileges. It does not include any users or user groups."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"example-of-using-the-ranger-hadoop-sql-plugin",children:"Example of using the Ranger Hadoop SQL Plugin"}),"\n",(0,r.jsxs)(n.p,{children:["Suppose you have an Apache Hive service in your datacenter and have created a ",(0,r.jsx)(n.code,{children:"hiveRepo"})," in Apache Ranger to manage its permissions.\nThe Ranger service is accessible at ",(0,r.jsx)(n.code,{children:"172.0.0.100:6080"}),", with the username ",(0,r.jsx)(n.code,{children:"Jack"})," and the password ",(0,r.jsx)(n.code,{children:"PWD123"}),".\nTo add this Hive service to Gravitino using the Hive catalog, you'll need to configure the following parameters."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"authorization-provider=ranger\nauthorization.ranger.admin.url=172.0.0.100:6080\nauthorization.ranger.auth.type=simple\nauthorization.ranger.username=Jack\nauthorization.ranger.password=PWD123\nauthorization.ranger.service.type=HadoopSQL\nauthorization.ranger.service.name=hiveRepo\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsx)(n.p,{children:"Gravitino 0.8.0 only supports the authorization Apache Ranger Hive service , Apache Iceberg service and Apache Paimon Service.\nSpark can use Kyuubi authorization plugin to access Gravitino's catalog. But the plugin can't support to update or delete data for Paimon catalog.\nMore data source authorization is under development."})}),"\n",(0,r.jsx)(n.h3,{id:"chain-authorization-plugin",children:"chain authorization plugin"}),"\n",(0,r.jsxs)(n.p,{children:["Gravitino supports chaining multiple authorization plugins to secure one catalog.\nThe authorization plugin chain is defined in the ",(0,r.jsx)(n.code,{children:"authorization.chain.plugins"})," property, with the plugin names separated by commas.\nWhen a user performs an authorization operation on data within a catalog, the chained plugin will apply the authorization rules for every plugin defined in the chain."]}),"\n",(0,r.jsx)(n.p,{children:"In order to use the chained authorization plugin, you need to configure the following properties:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property Name"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Default Value"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Since Version"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization-provider"})}),(0,r.jsxs)(n.td,{children:["Providers to use to implement authorization plugin such as ",(0,r.jsx)(n.code,{children:"chain"})]}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"0.8.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.chain.plugins"})}),(0,r.jsxs)(n.td,{children:["The comma-separated list of plugin names, like ",(0,r.jsx)(n.code,{children:"${plugin-name1},${plugin-name2},..."})]}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"Yes if you use chain plugin"}),(0,r.jsx)(n.td,{children:"0.8.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.chain.${plugin-name}.ranger.admin.url"})}),(0,r.jsxs)(n.td,{children:["The Ranger authorization plugin properties of the ",(0,r.jsx)(n.code,{children:"${plugin-name}"})]}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"Yes if you use chain plugin"}),(0,r.jsx)(n.td,{children:"0.8.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.chain.${plugin-name}.ranger.service.type"})}),(0,r.jsxs)(n.td,{children:["The Ranger authorization plugin properties of the ",(0,r.jsx)(n.code,{children:"${plugin-name}"})]}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"Yes if you use chain plugin"}),(0,r.jsx)(n.td,{children:"0.8.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.chain.${plugin-name}.ranger.service.name"})}),(0,r.jsxs)(n.td,{children:["The Ranger authorization plugin properties of the ",(0,r.jsx)(n.code,{children:"${plugin-name}"})]}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"Yes if you use chain plugin"}),(0,r.jsx)(n.td,{children:"0.8.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.chain.${plugin-name}.ranger.username"})}),(0,r.jsxs)(n.td,{children:["The Ranger authorization plugin properties of the ",(0,r.jsx)(n.code,{children:"${plugin-name}"})]}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"Yes if you use chain plugin"}),(0,r.jsx)(n.td,{children:"0.8.0-incubating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"authorization.chain.${plugin-name}.ranger.password"})}),(0,r.jsxs)(n.td,{children:["The Ranger authorization plugin properties of the ",(0,r.jsx)(n.code,{children:"${plugin-name}"})]}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"Yes if you use chain plugin"}),(0,r.jsx)(n.td,{children:"0.8.0-incubating"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.p,{children:["The Gravitino chain authorization plugin only supports the Apache Ranger HadoopSQL Plugin and Apache Ranger HDFS Plugin.\nThe properties of every chained authorization plugin should use ",(0,r.jsx)(n.code,{children:"authorization.chain.${plugin-name}"})," as the prefix."]})}),"\n",(0,r.jsx)(n.h4,{id:"example-of-using-the-chain-authorization-plugin",children:"Example of using the chain authorization Plugin"}),"\n",(0,r.jsxs)(n.p,{children:["Suppose you have an Apache Hive service in your datacenter and have created a ",(0,r.jsx)(n.code,{children:"hiveRepo"})," in Apache Ranger to manage its permissions.\nThe Apache Hive service will use HDFS to store its data. You have created a ",(0,r.jsx)(n.code,{children:"hdfsRepo"})," in Apache Ranger to manage HDFS's permissions."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"authorization-provider=chain\nauthorization.chain.plugins=hive,hdfs\nauthorization.chain.hive.ranger.admin.url=http://ranger-service:6080\nauthorization.chain.hive.ranger.service.type=HadoopSQL\nauthorization.chain.hive.ranger.service.name=hiveRepo\nauthorization.chain.hive.ranger.auth.type=simple\nauthorization.chain.hive.ranger.username=Jack\nauthorization.chain.hive.ranger.password=PWD123\nauthorization.chain.hdfs.ranger.admin.url=http://ranger-service:6080\nauthorization.chain.hdfs.ranger.service.type=HDFS\nauthorization.chain.hdfs.ranger.service.name=hdfsRepo\nauthorization.chain.hdfs.ranger.auth.type=simple\nauthorization.chain.hdfs.ranger.username=Jack\nauthorization.chain.hdfs.ranger.password=PWD123\n"})})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);