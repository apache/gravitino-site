"use strict";(self.webpackChunkapache_website_template=self.webpackChunkapache_website_template||[]).push([[84451],{43777:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/add-platform-sdk-6b67eb85abd29d67d09fb3a1b5bff53e.png"},59449:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var t=i(13274),s=i(21943);const a={title:"How to use Apache Gravitino Python client",slug:"/how-to-use-gravitino-python-client",date:new Date("2024-05-09T00:00:00.000Z"),keyword:"Gravitino Python client",license:"This software is licensed under the Apache License version 2."},o="Apache Gravitino Python client",l={id:"how-to-use-python-client",title:"How to use Apache Gravitino Python client",description:"Apache Gravitino is a high-performance, geo-distributed, and federated metadata lake.",source:"@site/versioned_docs/version-1.0.0/how-to-use-python-client.md",sourceDirName:".",slug:"/how-to-use-gravitino-python-client",permalink:"/docs/1.0.0/how-to-use-gravitino-python-client",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/gravitino-site/tree/main/docs/how-to-use-python-client.md",tags:[],version:"1.0.0",frontMatter:{title:"How to use Apache Gravitino Python client",slug:"/how-to-use-gravitino-python-client",date:"2024-05-09T00:00:00.000Z",keyword:"Gravitino Python client",license:"This software is licensed under the Apache License version 2."},sidebar:"docs",previous:{title:"Manage statistics in Gravitino",permalink:"/docs/1.0.0/manage-statistics-in-gravitino"},next:{title:"Use Apache Gravitino client",permalink:"/docs/1.0.0/how-to-use-gravitino-client"}},r={},c=[{value:"Use Guidance",id:"use-guidance",level:2},{value:"Apache Gravitino Python client API",id:"apache-gravitino-python-client-api",level:3},{value:"Apache Gravitino Fileset Example",id:"apache-gravitino-fileset-example",level:3},{value:"How to develop Apache Gravitino Python Client",id:"how-to-develop-apache-gravitino-python-client",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Build and testing",id:"build-and-testing",level:3},{value:"IDE specific settings",id:"ide-specific-settings",level:3},{value:"JetBrains IntelliJ IDEA",id:"jetbrains-intellij-idea",level:4},{value:"Note about running integration tests of Gravitino Python client in IntelliJ IDEA.",id:"note-about-running-integration-tests-of-gravitino-python-client-in-intellij-idea",level:5},{value:"Resources",id:"resources",level:2},{value:"License",id:"license",level:2}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"apache-gravitino-python-client",children:"Apache Gravitino Python client"}),"\n",(0,t.jsx)(n.p,{children:"Apache Gravitino is a high-performance, geo-distributed, and federated metadata lake.\nIt manages the metadata directly in different sources, types, and regions, also provides users\nthe unified metadata access for data and AI assets."}),"\n",(0,t.jsx)(n.p,{children:"Gravitino Python client helps data scientists easily manage metadata using Python language."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"gravitino-python-client-introduction",src:i(94666).A+"",width:"1762",height:"978"})}),"\n",(0,t.jsx)(n.h2,{id:"use-guidance",children:"Use Guidance"}),"\n",(0,t.jsx)(n.p,{children:"You can use Gravitino Python client library with Spark, PyTorch, Tensorflow, Ray and Python environment."}),"\n",(0,t.jsxs)(n.p,{children:["First of all, You must have a Gravitino server set up and run, You can refer document of\n",(0,t.jsx)(n.a,{href:"/docs/1.0.0/how-to-install",children:"How to install Gravitino"})," to build Gravitino server from source code and\ninstall it in your local."]}),"\n",(0,t.jsx)(n.h3,{id:"apache-gravitino-python-client-api",children:"Apache Gravitino Python client API"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install apache-gravitino\n"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/1.0.0/manage-metalake-using-gravitino?language=python",children:"Manage metalake using Gravitino Python API"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/1.0.0/manage-fileset-metadata-using-gravitino?language=python",children:"Manage fileset metadata using Gravitino Python API"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"apache-gravitino-fileset-example",children:"Apache Gravitino Fileset Example"}),"\n",(0,t.jsxs)(n.p,{children:["We offer a playground environment to help you quickly understand how to use Gravitino Python\nclient to manage non-tabular data on HDFS via Fileset in Gravitino. You can refer to the\ndocument ",(0,t.jsx)(n.a,{href:"/docs/1.0.0/how-to-use-the-playground",children:"How to use the playground"}),"\nto launch a Gravitino server, HDFS and Jupyter notebook environment in you local Docker environment."]}),"\n",(0,t.jsxs)(n.p,{children:["Waiting for the playground Docker environment to start, you can directly open\n",(0,t.jsx)(n.code,{children:"http://localhost:18888/lab/tree/gravitino-fileset-example.ipynb"})," in the browser and run the example."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"https://github.com/apache/gravitino-playground/blob/main/init/jupyter/gravitino-fileset-example.ipynb",children:"gravitino-fileset-example"}),"\ncontains the following code snippets:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Install HDFS Python client."}),"\n",(0,t.jsx)(n.li,{children:"Create a HDFS client to connect HDFS and to do some test operations."}),"\n",(0,t.jsx)(n.li,{children:"Install Gravitino Python client."}),"\n",(0,t.jsx)(n.li,{children:"Initialize Gravitino admin client and create a Gravitino metalake."}),"\n",(0,t.jsx)(n.li,{children:"Initialize Gravitino client and list metalakes."}),"\n",(0,t.jsxs)(n.li,{children:["Create a Gravitino ",(0,t.jsx)(n.code,{children:"Catalog"})," and special ",(0,t.jsx)(n.code,{children:"type"})," is ",(0,t.jsx)(n.code,{children:"Catalog.Type.FILESET"})," and ",(0,t.jsx)(n.code,{children:"provider"})," is\n",(0,t.jsx)(n.a,{href:"/docs/1.0.0/fileset-catalog",children:"fileset"})]}),"\n",(0,t.jsxs)(n.li,{children:["Create a Gravitino ",(0,t.jsx)(n.code,{children:"Schema"})," with the ",(0,t.jsx)(n.code,{children:"location"})," pointed to a HDFS path, and use ",(0,t.jsx)(n.code,{children:"hdfs client"})," to\ncheck if the schema location is successfully created in HDFS."]}),"\n",(0,t.jsxs)(n.li,{children:["Create a ",(0,t.jsx)(n.code,{children:"Fileset"})," with ",(0,t.jsx)(n.code,{children:"type"})," is ",(0,t.jsx)(n.a,{href:"/docs/1.0.0/manage-fileset-metadata-using-gravitino#fileset-operations",children:"Fileset.Type.MANAGED"}),",\nuse ",(0,t.jsx)(n.code,{children:"hdfs client"})," to check if the fileset location was successfully created in HDFS."]}),"\n",(0,t.jsxs)(n.li,{children:["Drop this ",(0,t.jsx)(n.code,{children:"Fileset.Type.MANAGED"})," type fileset and check if the fileset location was\nsuccessfully deleted in HDFS."]}),"\n",(0,t.jsxs)(n.li,{children:["Create a ",(0,t.jsx)(n.code,{children:"Fileset"})," with ",(0,t.jsx)(n.code,{children:"type"})," is ",(0,t.jsx)(n.a,{href:"/docs/1.0.0/manage-fileset-metadata-using-gravitino#fileset-operations",children:"Fileset.Type.EXTERNAL"}),"\nand ",(0,t.jsx)(n.code,{children:"location"})," pointed to exist HDFS path"]}),"\n",(0,t.jsxs)(n.li,{children:["Drop this ",(0,t.jsx)(n.code,{children:"Fileset.Type.EXTERNAL"})," type fileset and check if the fileset location was\nnot deleted in HDFS."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-to-develop-apache-gravitino-python-client",children:"How to develop Apache Gravitino Python Client"}),"\n",(0,t.jsx)(n.p,{children:"You can ues any IDE to develop Gravitino Python Client. Directly open the client-python module project in the IDE."}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Python 3.9+"}),"\n",(0,t.jsxs)(n.li,{children:["Refer to ",(0,t.jsx)(n.a,{href:"/docs/1.0.0/how-to-build#prerequisites",children:"How to build Gravitino"})," to have necessary build\nenvironment ready for building."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"build-and-testing",children:"Build and testing"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Clone the Gravitino project."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"git clone git@github.com:apache/gravitino.git\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Build the Gravitino Python client module"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# Default Python version is 3.9\n./gradlew :clients:client-python:build\n# If you want to build Python client with specific Python version,\n# add `-PpythonVersion` with version number:\n./gradlew :clients:client-python:build -PpythonVersion=3.10\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run unit tests"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./gradlew :clients:client-python:test -PskipITs\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run integration tests"}),"\n",(0,t.jsxs)(n.p,{children:["Because Python client connects to Gravitino Server to run integration tests,\nSo it runs ",(0,t.jsx)(n.code,{children:"./gradlew compileDistribution -x test"})," command automatically to compile the\nGravitino project in the ",(0,t.jsx)(n.code,{children:"distribution"})," directory. When you run integration tests via Gradle\ncommand or IDE, Gravitino integration test framework (",(0,t.jsx)(n.code,{children:"integration_test_env.py"}),")\nwill start and stop Gravitino server automatically."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./gradlew :clients:client-python:test\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Distribute the Gravitino Python client module"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./gradlew :clients:client-python:distribution\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Deploy the Gravitino Python client to ",(0,t.jsx)(n.a,{href:"https://pypi.org/project/apache-gravitino/",children:"https://pypi.org/project/apache-gravitino/"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./gradlew :clients:client-python:deploy\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ide-specific-settings",children:"IDE specific settings"}),"\n",(0,t.jsx)(n.h4,{id:"jetbrains-intellij-idea",children:"JetBrains IntelliJ IDEA"}),"\n",(0,t.jsx)(n.p,{children:"We use Conda Environment to manage Python Environment, to configure Python\nSDK, you need to:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Make sure you installed ",(0,t.jsx)(n.a,{href:"https://plugins.jetbrains.com/plugin/631-python",children:"Python Plugin"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Make sure you followed the step to build python module in ",(0,t.jsx)(n.a,{href:"#build-and-testing",children:"Build and testing"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Make sure you are at the root directory of Gravitino Git repository."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Find conda executable by executing this command"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"find $(pwd)/.gradle/python/*/Miniforge3/bin/conda\n\n# example output\n/Users/YOUR_USER_NAME/gravitino/.gradle/python/MacOSX/Miniforge3/bin/conda\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Find Python Interpreter with this command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"find $(pwd)/.gradle/python/*/Miniforge3/envs/*/bin/python\n\n# example output\n/Users/YOUR_USER_NAME/gravitino/.gradle/python/MacOSX/Miniforge3/envs/python-3.9/bin/python\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Follow steps in ",(0,t.jsx)(n.a,{href:"https://www.jetbrains.com/help/idea/configuring-python-sdk.html#gdizlj_44",children:"Create a conda environment"}),",\nand at step 5, choose ",(0,t.jsx)(n.a,{href:"https://www.jetbrains.com/help/idea/configuring-python-sdk.html#existing-conda-environment",children:"Existing conda environment"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Fill in the output from step 4 into ",(0,t.jsx)(n.em,{children:"Conda executable"})," field, step 5 into ",(0,t.jsx)(n.em,{children:"Interpreter"})," field.\n",(0,t.jsx)(n.img,{alt:"Configure conda_env",src:i(75641).A+"",width:"1725",height:"568"}),"\nAnd you will see a new Python SDK is added, and it has several packages installed.\n",(0,t.jsx)(n.img,{alt:"Add Platform SDK",src:i(43777).A+"",width:"1377",height:"866"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set ",(0,t.jsx)(n.code,{children:"clients/client-python"})," module sdk to the one we set in previous step.\n",(0,t.jsx)(n.img,{alt:"Configure python module sdk",src:i(84362).A+"",width:"1326",height:"846"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Done! Now, open any python files and start developing Gravitino Python Client."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"note-about-running-integration-tests-of-gravitino-python-client-in-intellij-idea",children:"Note about running integration tests of Gravitino Python client in IntelliJ IDEA."}),"\n",(0,t.jsxs)(n.p,{children:["Since integration tests require Gravitino Java distribution, so you can not run tests with IntelliJ\n",(0,t.jsx)(n.a,{href:"https://www.jetbrains.com/help/idea/performing-tests.html",children:"Run tests button"}),",\nPlease execute this gradle task with ",(0,t.jsx)(n.a,{href:"https://plugins.jetbrains.com/docs/intellij/tools-intellij-platform-gradle-plugin.html",children:"Gradle Plugin"}),"\nor in command line to run integration tests."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./gradlew clients:client-python:integrationTest\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or, you would see errors like:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"...\nERROR:tests.integration.integration_test_env:Gravitino Python client integration test must configure `GRAVITINO_HOME`\n\nProcess finished with exit code 0\n"})}),"\n",(0,t.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Official website ",(0,t.jsx)(n.a,{href:"https://gravitino.apache.org/",children:"https://gravitino.apache.org/"})]}),"\n",(0,t.jsxs)(n.li,{children:["Project home on GitHub: ",(0,t.jsx)(n.a,{href:"https://github.com/apache/gravitino/",children:"https://github.com/apache/gravitino/"})]}),"\n",(0,t.jsxs)(n.li,{children:["Playground with Docker: ",(0,t.jsx)(n.a,{href:"https://github.com/apache/gravitino-playground",children:"https://github.com/apache/gravitino-playground"})]}),"\n",(0,t.jsxs)(n.li,{children:["User documentation: ",(0,t.jsx)(n.a,{href:"https://gravitino.apache.org/docs/",children:"https://gravitino.apache.org/docs/"})]}),"\n",(0,t.jsxs)(n.li,{children:["Slack Community: ",(0,t.jsx)(n.a,{href:"https://the-asf.slack.com/archives/C078RESTT19",children:"https://the-asf.slack.com#gravitino"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,t.jsxs)(n.p,{children:["Gravitino is under the Apache License Version 2.0, See the ",(0,t.jsx)(n.a,{href:"https://github.com/apache/gravitino/blob/main/LICENSE",children:"LICENSE"})," for the details."]})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},75641:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/configure-conda-env-f4f3e5e8847440c8601c5777e2c8369c.png"},84362:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/configure-python-module-sdk-cd9c473a15c52492f78c775bf2fb8572.png"},94666:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/gravitino-python-client-introduction-f860054885996b14515df4c8ccb6ef64.png"}}]);