"use strict";(globalThis.webpackChunkapache_website_template=globalThis.webpackChunkapache_website_template||[]).push([[6084],{42395(e,n,a){a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>j,frontMatter:()=>c,metadata:()=>d,toc:()=>h});var t=a(13274),s=a(76245),r=a(88941),i=a(92343);const c={title:"Lance REST service",slug:"/lance-rest-service",keywords:["Lance REST","Lance datasets","REST API"],license:"This software is licensed under the Apache License version 2."},l=void 0,d={id:"lance-rest-service",title:"Lance REST service",description:"Overview",source:"@site/versioned_docs/version-1.1.0/lance-rest-service.md",sourceDirName:".",slug:"/lance-rest-service",permalink:"/docs/1.1.0/lance-rest-service",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/gravitino-site/tree/main/docs/lance-rest-service.md",tags:[],version:"1.1.0",frontMatter:{title:"Lance REST service",slug:"/lance-rest-service",keywords:["Lance REST","Lance datasets","REST API"],license:"This software is licensed under the Apache License version 2."},sidebar:"docs",previous:{title:"Iceberg REST catalog service",permalink:"/docs/1.1.0/iceberg-rest-service"},next:{title:"Gravitino MCP server",permalink:"/docs/1.1.0/gravitino-mcp-server"}},o={},h=[{value:"Overview",id:"overview",level:2},{value:"What is Lance?",id:"what-is-lance",level:3},{value:"Architecture",id:"architecture",level:3},{value:"Supported Operations",id:"supported-operations",level:2},{value:"Operation Details",id:"operation-details",level:3},{value:"Namespace Operations",id:"namespace-operations",level:4},{value:"Table Operations",id:"table-operations",level:4},{value:"Deployment",id:"deployment",level:2},{value:"Running with Gravitino Server",id:"running-with-gravitino-server",level:3},{value:"Running Standalone",id:"running-standalone",level:3},{value:"Running with Docker",id:"running-with-docker",level:3},{value:"Usage Guidelines",id:"usage-guidelines",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Namespace Hierarchy",id:"namespace-hierarchy",level:3},{value:"Delimiter Convention",id:"delimiter-convention",level:3},{value:"Examples",id:"examples",level:2}];function x(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The Lance REST service provides a RESTful interface for managing Lance datasets through HTTP endpoints. Introduced in Gravitino version 1.1.0, this service enables seamless interaction with Lance datasets for data operations and metadata management."}),"\n",(0,t.jsxs)(n.p,{children:["The service implements the ",(0,t.jsx)(n.a,{href:"https://docs.lancedb.com/api-reference/introduction",children:"Lance REST API specification"}),". For detailed specification documentation, see the ",(0,t.jsx)(n.a,{href:"https://lance.org/format/namespace/rest/catalog-spec/",children:"official Lance REST documentation"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"what-is-lance",children:"What is Lance?"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://lance.org/format/",children:"Lance"})," is a modern columnar data format designed for AI/ML workloads. It provides:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"High-performance vector search"}),": Native support for similarity search on high-dimensional embeddings"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Columnar storage"}),": Optimized for analytical queries and machine learning pipelines"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Fast random access"}),": Efficient row-level operations unlike traditional columnar formats"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Version control"}),": Built-in dataset versioning and time-travel capabilities"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Incremental updates"}),": Append and update data without full rewrites"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,t.jsx)(n.p,{children:"The Lance REST service acts as a bridge between Lance datasets and applications:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Applications   \u2502\n\u2502  (Python/Java)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502 HTTP/REST\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Lance REST     \u2502\n\u2502    Service       \u2502 \n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502 \n         \u25bc Gravitino Client API\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Gravitino Server \u2502 \n\u2502(Metadata Backend)\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502 File System Operations\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Lance Datasets  \u2502 \n\u2502 (S3/GCS/Local)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key Features:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Full compliance with Lance REST API specification"}),"\n",(0,t.jsx)(n.li,{children:"Can run standalone or integrated with Gravitino server"}),"\n",(0,t.jsx)(n.li,{children:"Support for namespace and table management"}),"\n",(0,t.jsx)(n.li,{children:"Index creation and management capabilities (Index operations are not supported in version 1.1.0)"}),"\n",(0,t.jsx)(n.li,{children:"Metadata stored in Gravitino for unified governance"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"supported-operations",children:"Supported Operations"}),"\n",(0,t.jsx)(n.p,{children:"The Lance REST service provides comprehensive support for namespace management, table management, and index operations. The table below lists all supported operations:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Operation"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"HTTP Method"}),(0,t.jsx)(n.th,{children:"Endpoint Pattern"}),(0,t.jsx)(n.th,{children:"Since Version"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CreateNamespace"}),(0,t.jsx)(n.td,{children:"Create a new Lance namespace"}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/namespace/{id}/create"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ListNamespaces"}),(0,t.jsx)(n.td,{children:"List all namespaces under a parent namespace"}),(0,t.jsx)(n.td,{children:"GET"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/namespace/{parent}/list"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DescribeNamespace"}),(0,t.jsx)(n.td,{children:"Retrieve detailed information about a specific namespace"}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/namespace/{id}/describe"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DropNamespace"}),(0,t.jsx)(n.td,{children:"Delete a namespace"}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/namespace/{id}/drop"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"NamespaceExists"}),(0,t.jsx)(n.td,{children:"Check whether a namespace exists"}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/namespace/{id}/exists"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ListTables"}),(0,t.jsx)(n.td,{children:"List all tables in a namespace"}),(0,t.jsx)(n.td,{children:"GET"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/namespace/{id}/table/list"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CreateTable"}),(0,t.jsx)(n.td,{children:"Create a new table in a namespace"}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/table/{id}/create"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DropTable"}),(0,t.jsx)(n.td,{children:"Delete a table including both metadata and data"}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/table/{id}/drop"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"TableExists"}),(0,t.jsx)(n.td,{children:"Check whether a table exists"}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/table/{id}/exists"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"RegisterTable"}),(0,t.jsx)(n.td,{children:"Register an existing Lance table to a namespace"}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/table/{id}/register"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DeregisterTable"}),(0,t.jsx)(n.td,{children:"Unregister a table from a namespace (metadata only, data remains)"}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/lance/v1/table/{id}/deregister"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["More details, please refer to the ",(0,t.jsx)(n.a,{href:"https://lance.org/format/namespace/rest/catalog-spec/",children:"Lance REST API specification"})]}),"\n",(0,t.jsx)(n.h3,{id:"operation-details",children:"Operation Details"}),"\n",(0,t.jsx)(n.p,{children:"Some operations have specific behaviors and modes. Below are important details to consider:"}),"\n",(0,t.jsx)(n.h4,{id:"namespace-operations",children:"Namespace Operations"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CreateNamespace"})," supports three modes:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"create"}),": Fails if namespace already exists"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"exist_ok"}),": Succeeds even if namespace exists"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"overwrite"}),": Replaces existing namespace"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"DropNamespace"})," behavior:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Recursively deletes all child namespaces and tables"}),"\n",(0,t.jsx)(n.li,{children:"Deletes both metadata and Lance data files"}),"\n",(0,t.jsx)(n.li,{children:"Operation is irreversible"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"table-operations",children:"Table Operations"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"RegisterTable vs CreateTable"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RegisterTable"}),": Links existing Lance datasets into Gravitino catalog without data movement"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CreateTable"}),": Creates new Lance table with schema and write metadata files"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"version"})," field of ",(0,t.jsx)(n.code,{children:"CreateTable"})," response is always null, which stands for the latest version."]})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"DropTable vs DeregisterTable"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DropTable"}),": Permanently deletes metadata and data files from storage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DeregisterTable"}),": Removes metadata from Gravitino but preserves Lance data files"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,t.jsx)(n.h3,{id:"running-with-gravitino-server",children:"Running with Gravitino Server"}),"\n",(0,t.jsxs)(n.p,{children:["To enable the Lance REST service within Gravitino server, configure the following properties in your Gravitino configuration file ",(0,t.jsx)(n.code,{children:"${GRAVITINO_HOME}/conf/gravitino.conf"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Configuration Property"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Default Value"}),(0,t.jsx)(n.th,{children:"Required"}),(0,t.jsx)(n.th,{children:"Since Version"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.auxService.names"})}),(0,t.jsxs)(n.td,{children:["Auxiliary services to run. Include ",(0,t.jsx)(n.code,{children:"lance-rest"})," to enable Lance REST service"]}),(0,t.jsx)(n.td,{children:"iceberg-rest,lance-rest"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"0.2.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.classpath"})}),(0,t.jsx)(n.td,{children:"Classpath for Lance REST service, relative to Gravitino home directory"}),(0,t.jsx)(n.td,{children:"lance-rest-server/libs"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.httpPort"})}),(0,t.jsx)(n.td,{children:"Port number for Lance REST service"}),(0,t.jsx)(n.td,{children:"9101"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.host"})}),(0,t.jsx)(n.td,{children:"Hostname for Lance REST service"}),(0,t.jsx)(n.td,{children:"0.0.0.0"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.namespace-backend"})}),(0,t.jsxs)(n.td,{children:["Namespace metadata backend (currently only ",(0,t.jsx)(n.code,{children:"gravitino"})," is supported)"]}),(0,t.jsx)(n.td,{children:"gravitino"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.gravitino-uri"})}),(0,t.jsxs)(n.td,{children:["Gravitino server URI (required when namespace-backend is ",(0,t.jsx)(n.code,{children:"gravitino"}),")"]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"http://localhost:8090",children:"http://localhost:8090"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.gravitino-metalake"})}),(0,t.jsxs)(n.td,{children:["Gravitino metalake name (required when namespace-backend is ",(0,t.jsx)(n.code,{children:"gravitino"}),")"]}),(0,t.jsx)(n.td,{children:"(none)"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"1.1.0"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example Configuration:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"gravitino.auxService.names = lance-rest\ngravitino.lance-rest.httpPort = 9101\ngravitino.lance-rest.host = 0.0.0.0\ngravitino.lance-rest.namespace-backend = gravitino\ngravitino.lance-rest.gravitino-uri = http://localhost:8090\ngravitino.lance-rest.gravitino-metalake = my_metalake\n"})}),"\n",(0,t.jsx)(n.h3,{id:"running-standalone",children:"Running Standalone"}),"\n",(0,t.jsx)(n.p,{children:"To run Lance REST service independently without Gravitino server (You need to start Gravitino server first):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"{GRAVITINO_HOME}/bin/gravitino-lance-rest-server.sh start\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Configure the service by editing ",(0,t.jsx)(n.code,{children:"{GRAVITINO_HOME}/conf/gravitino-lance-rest-server.conf"})," or passing command-line arguments:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Configuration Property"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Default Value"}),(0,t.jsx)(n.th,{children:"Required"}),(0,t.jsx)(n.th,{children:"Since Version"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.namespace-backend"})}),(0,t.jsx)(n.td,{children:"Namespace metadata backend"}),(0,t.jsx)(n.td,{children:"gravitino"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.gravitino-uri"})}),(0,t.jsx)(n.td,{children:"Gravitino server URI"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"http://localhost:8090",children:"http://localhost:8090"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.gravitino-metalake"})}),(0,t.jsx)(n.td,{children:"Gravitino metalake name"}),(0,t.jsx)(n.td,{children:"(none)"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.httpPort"})}),(0,t.jsx)(n.td,{children:"Service port number"}),(0,t.jsx)(n.td,{children:"9101"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.host"})}),(0,t.jsx)(n.td,{children:"Service hostname"}),(0,t.jsx)(n.td,{children:"0.0.0.0"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"1.1.0"})]})]})]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["In most cases, you only need to configure ",(0,t.jsx)(n.code,{children:"gravitino.lance-rest.gravitino-metalake"})," and other properties can use their default values."]})}),"\n",(0,t.jsx)(n.h3,{id:"running-with-docker",children:"Running with Docker"}),"\n",(0,t.jsx)(n.p,{children:"Launch Lance REST service using Docker(You need to start Gravitino server first):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker run -d --name lance-rest-service -p 9101:9101 \\\n  -e LANCE_REST_GRAVITINO_URI=http://gravitino-host:8090 \\\n  -e LANCE_REST_GRAVITINO_METALAKE_NAME=your_metalake_name \\\n  -e LANCE_REST_GRAVITINO_URI=http://gravitino-host:port \\\n  apache/gravitino-lance-rest:latest\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Access the service at ",(0,t.jsx)(n.code,{children:"http://localhost:9101"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Environment Variables:"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Environment Variable"}),(0,t.jsx)(n.th,{children:"Configuration Property"}),(0,t.jsx)(n.th,{children:"Required"}),(0,t.jsx)(n.th,{children:"Default Value"}),(0,t.jsx)(n.th,{children:"Since Version"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LANCE_REST_NAMESPACE_BACKEND"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.namespace-backend"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LANCE_REST_GRAVITINO_METALAKE_NAME"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.gravitino-metalake"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"(none)"}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LANCE_REST_GRAVITINO_URI"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.gravitino-uri"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"http://localhost:8090"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LANCE_REST_HOST"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.host"})}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"0.0.0.0"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LANCE_REST_PORT"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gravitino.lance-rest.httpPort"})}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"9101"})}),(0,t.jsx)(n.td,{children:"1.1.0"})]})]})]}),"\n",(0,t.jsx)(n.admonition,{title:"Configuration Tips",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Required:"})," Set ",(0,t.jsx)(n.code,{children:"LANCE_REST_GRAVITINO_METALAKE_NAME"})," to your Gravitino metalake name"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Conditional:"})," Update ",(0,t.jsx)(n.code,{children:"LANCE_REST_GRAVITINO_URI"})," if Gravitino server is not on ",(0,t.jsx)(n.code,{children:"localhost"})," in the docker instance."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Optional:"})," Other variables can use default values unless you have specific requirements"]}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"usage-guidelines",children:"Usage Guidelines"}),"\n",(0,t.jsx)(n.p,{children:"When using Lance REST service with Gravitino backend, keep the following considerations in mind:"}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A running Gravitino server with a created metalake"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"namespace-hierarchy",children:"Namespace Hierarchy"}),"\n",(0,t.jsxs)(n.p,{children:["Gravitino follows a three-level hierarchy: ",(0,t.jsx)(n.strong,{children:"catalog \u2192 schema \u2192 table"}),". When creating namespaces or tables:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Parent must exist:"})," Before creating ",(0,t.jsx)(n.code,{children:"lance_catalog/schema"}),", ensure ",(0,t.jsx)(n.code,{children:"lance_catalog"})," catalog exists in Gravitino metalake."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Two-level limit:"})," You can create namespace ",(0,t.jsx)(n.code,{children:"lance_catalog/schema"}),", but ",(0,t.jsx)(n.strong,{children:"not"})," ",(0,t.jsx)(n.code,{children:"lance_catalog/schema/sub_schema"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Table placement:"})," Tables can only be created under ",(0,t.jsx)(n.code,{children:"lance_catalog/schema"}),", not at catalog level."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example Hierarchy:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"metalake\n\u2514\u2500\u2500 lance_catalog (catalog - create via REST)\n    \u2514\u2500\u2500 schema (namespace - create via REST)\n        \u2514\u2500\u2500 table01 (table - create via REST)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"delimiter-convention",children:"Delimiter Convention"}),"\n",(0,t.jsxs)(n.p,{children:["The Lance REST API uses ",(0,t.jsx)(n.code,{children:"$"})," as the default delimiter to separate namespace levels in URIs. When making HTTP requests:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"URL Encoding Required"}),": ",(0,t.jsx)(n.code,{children:"$"})," must be URL-encoded as ",(0,t.jsx)(n.code,{children:"%24"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Example"}),": ",(0,t.jsx)(n.code,{children:"lance_catalog$schema$table01"})," becomes ",(0,t.jsx)(n.code,{children:"lance_catalog%24schema%24table01"})," in URLs"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Common Delimiters:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Namespace path:     lance_catalog.schema.table01\nURI representation: lance_catalog$schema$table01  \nURL encoded:        lance_catalog%24schema%24table01\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"Important Limitations",type:"caution",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Currently supports only ",(0,t.jsx)(n.strong,{children:"two levels of namespaces"})," before tables"]}),"\n",(0,t.jsxs)(n.li,{children:["Tables ",(0,t.jsx)(n.strong,{children:"cannot"})," be nested deeper than schema level"]}),"\n",(0,t.jsx)(n.li,{children:"Parent catalog must be created in Gravitino before using Lance REST API"}),"\n",(0,t.jsx)(n.li,{children:"Metadata operations require Gravitino server to be available"}),"\n",(0,t.jsx)(n.li,{children:"Namespace deletion is recursive and irreversible"}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.p,{children:"The following examples demonstrate how to interact with Lance REST service using different programming languages and tools."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Prerequisites:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Gravitino server is running with Lance REST service enabled."}),"\n",(0,t.jsx)(n.li,{children:"A metalake has been created in Gravitino."}),"\n"]}),"\n",(0,t.jsxs)(r.A,{groupId:"language",queryString:!0,children:[(0,t.jsx)(i.default,{value:"shell",label:"Shell",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'# Create a catalog-level namespace\n# mode: "create" | "exist_ok" | "overwrite" for create namespace/table; mode: "create" | "overwrite" for register table\ncurl -X POST http://localhost:9101/lance/v1/namespace/lance_catalog/create \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n    "id": ["lance_catalog"],\n    "mode": "create"\n  }\'\n\n# Create a schema namespace\n# Note: %24 is URL-encoded \'$\' character used as delimiter\ncurl -X POST http://localhost:9101/lance/v1/namespace/lance_catalog%24schema/create \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n    "id": ["lance_catalog", "schema"],\n    "mode": "create"\n  }\'\n\n# Register an existing table\ncurl -X POST http://localhost:9101/lance/v1/table/lance_catalog%24schema%24table01/register \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n    "id": ["lance_catalog", "schema", "table01"],\n    "location": "/tmp/lance_catalog/schema/table01",\n    "mode": "CREATE"\n  }\'\n\n# Create a new empty table\ncurl -X POST http://localhost:9101/lance/v1/table/lance_catalog%24schema%24table02/create-empty \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n    "id": ["lance_catalog", "schema", "table02"],\n    "location": "/tmp/lance_catalog/schema/table02",\n    "properties": { "description": "This is table02"  }\n  }\'  \n  \n# Create a table with schema, the schema is inferred from the Arrow IPC file\ncurl -X POST \\\n     "http://localhost:9101/lance/v1/table/lance_catalog%24schema%24table03/create" \\\n     -H \'Content-Type: application/vnd.apache.arrow.stream\' \\\n     -H "x-lance-table-location: /tmp/lance_catalog/schema/table03" \\\n     -H "x-lance-table-properties: {}" \\\n     --data-binary "@${ARROW_FILE}"    \n'})})}),(0,t.jsx)(i.default,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// Add dependency: implementation("com.lancedb:lance-namespace-core:0.0.20")\n\nimport org.apache.arrow.memory.BufferAllocator;\nimport org.apache.arrow.memory.RootAllocator;\nimport java.util.HashMap;\nimport java.util.Map;\n\n// Initialize allocator and namespace connection\nprivate final BufferAllocator allocator = new RootAllocator(Long.MAX_VALUE);\n\nMap<String, String> props = new HashMap<>();\nprops.put(RestNamespaceConfig.URI, "http://localhost:9101/lance");\nprops.put(RestNamespaceConfig.DELIMITER, RestNamespaceConfig.DELIMITER_DEFAULT);\n\nLanceNamespace ns = LanceNamespaces.connect("rest", props, null, allocator);\n\n// Create catalog namespace\nCreateNamespaceRequest createCatalogNsRequest = new CreateNamespaceRequest();\ncreateCatalogNsRequest.addIdItem("lance_catalog");\ncreateCatalogNsRequest.setMode(CreateNamespaceRequest.ModeEnum.CREATE);\nns.createNamespace(createCatalogNsRequest);\n\n// Create schema namespace\nCreateNamespaceRequest createSchemaNsRequest = new CreateNamespaceRequest();\ncreateSchemaNsRequest.addIdItem("lance_catalog");\ncreateSchemaNsRequest.addIdItem("schema");\ncreateSchemaNsRequest.setMode(CreateNamespaceRequest.ModeEnum.CREATE);\nns.createNamespace(createSchemaNsRequest);\n\n// Register a table\nRegisterTableRequest registerTableRequest = new RegisterTableRequest();\nregisterTableRequest.setLocation("/tmp/lance_catalog/schema/table01");\nregisterTableRequest.setId(Lists.newArrayList("lance_catalog", "schema", "table01"));\nregisterTableRequest.setMode(RegisterTableRequest.ModeEnum.CREATE);\nns.registerTable(registerTableRequest);\n\n// Create an empty table\nCreateEmptyTableRequest createEmptyTableRequest = new CreateEmptyTableRequest();\ncreateEmptyTableRequest.setLocation("/tmp/lance_catalog/schema/table02");\ncreateEmptyTableRequest.setId(Lists.newArrayList("lance_catalog", "schema", "table02"));\nns.createEmptyTable(createEmptyTableRequest);\n\n// Create a table with schema inferred from Arrow IPC file\nCreateTableRequest createTableRequest = new CreateTableRequest();\ncreateTableRequest.setIds(Lists.newArrayList("lance_catalog", "schema", "table03"));\ncreateTableRequest.setLocation("/tmp/lance_catalog/schema/table03");\norg.apache.arrow.vector.types.pojo.Schema schema =\n        new org.apache.arrow.vector.types.pojo.Schema(\n                Arrays.asList(\n                        Field.nullable("id", new ArrowType.Int(32, true)),\n                        Field.nullable("value", new ArrowType.Utf8())));\nbyte[] body = ArrowUtils.generateIpcStream(schema);\nns.createTable(createTableRequest, body);\n\n'})})}),(0,t.jsx)(i.default,{value:"python",label:"Python",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Install: pip install lance-namespace==0.0.20\n\nimport lance_namespace as ln\n\n# Connect to Lance REST service\nns = ln.connect(\"rest\", {\"uri\": \"http://your_lance_rest:9101/lance\"})\n\n# Create catalog namespace\ncreate_catalog_ns_request = ln.CreateNamespaceRequest(id=[\"lance_catalog\"])\ncatalog = ns.create_namespace(create_catalog_ns_request)\n\n# Create schema namespace\ncreate_schema_ns_request = ln.CreateNamespaceRequest(id=[\"lance_catalog\", \"schema\"])\nschema = ns.create_namespace(create_schema_ns_request)\n\n# Register a table\nregister_table_request = ln.RegisterTableRequest(\n    id=['lance_catalog', 'schema', 'table01'],\n    location='/tmp/lance_catalog/schema/table01'\n)\nns.register_table(register_table_request)\n\n# Create an empty table\ncreate_empty_table_request = ln.CreateEmptyTableRequest(\n    id=['lance_catalog', 'schema', 'table02'],\n    location='/tmp/lance_catalog/schema/table02'\n)\n\n# Create a table with schema inferred from Arrow IPC file\ncreate_table_request = ln.CreateTableRequest(\n    id=['lance_catalog', 'schema', 'table03'],\n    location='/tmp/lance_catalog/schema/table03'\n)\nwith open('schema.ipc', 'rb') as f:\n    body = f.read()\n\nns.create_table(create_table_request, body)\n"})})})]})]})}function j(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(x,{...e})}):x(e)}},88941(e,n,a){a.d(n,{A:()=>p});var t=a(79474),s=a(13526),r=a(68029),i=a(63274),c=a(22992);const l="tabList_dlek",d="tabItem_WT7E";var o=a(13274);function h({className:e,block:n,selectedValue:a,selectValue:t,tabValues:i}){const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,r.a_)(),h=e=>{const n=e.currentTarget,s=c.indexOf(n),r=i[s].value;r!==a&&(l(n),t(r))},x=e=>{let n=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const a=c.indexOf(e.currentTarget)+1;n=c[a]??c[0];break}case"ArrowLeft":{const a=c.indexOf(e.currentTarget)-1;n=c[a]??c[c.length-1];break}}n?.focus()};return(0,o.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:t})=>(0,o.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>c.push(e),onKeyDown:x,onClick:h,...t,className:(0,s.A)("tabs__item",d,t?.className,{"tabs__item--active":a===e}),children:n??e},e))})}function x({lazy:e,children:n,selectedValue:a}){const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===a);return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,o.jsx)("div",{className:"margin-top--md",children:s.map((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==a}))})}function j(e){const n=(0,i.u)(e);return(0,o.jsxs)("div",{className:(0,s.A)("tabs-container",l),children:[(0,o.jsx)(h,{...n,...e}),(0,o.jsx)(x,{...n,...e})]})}function p(e){const n=(0,c.default)();return(0,o.jsx)(j,{...e,children:(0,i.v)(e.children)},String(n))}}}]);